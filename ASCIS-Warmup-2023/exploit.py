from PIL import Image

# Open the image
image = Image.open("lsb.png")

# Get the pixel values of the top row
pixels = [image.getpixel((x, 0)) for x in range(image.width)]

# Get the unique colors in the top row
unique_colors = list(set(pixels))

# Sort the unique colors
unique_colors.sort()

# Create a dictionary to map colors to binary values
color_map = {unique_colors[0]: '0', unique_colors[1]: '1'}

# Convert the pixels to a binary string
binary_string = ''.join([color_map.get(pixel, '0') for pixel in pixels])
# binary_string = ''.join(['1' if i == '0' else '0' for i in binary_string])
print(binary_string)

# Create an empty list to store the flag characters
flag_chars = []

# Iterate over the binary string in chunks of 8
for i in range(0, len(binary_string), 8):
    # Get the chunk of 8 bits
    chunk = binary_string[i:i+8]
    
    # Convert the chunk to an integer
    num = int(chunk, 2)
    
    # Convert the integer to a character and append it to the flag_chars list
    flag_chars.append(chr(num))

# Convert the list of flag characters to a string
flag = ''.join(flag_chars)

print(flag)

