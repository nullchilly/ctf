<?xml version='1.0' encoding='utf-8'?>
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" version="3" category="std" consensus="true" docName="draft-ietf-bess-dci-evpn-overlay-10" indexInclude="true" ipr="trust200902" number="9014" prepTime="2021-05-26T18:17:06" scripts="Common,Latin" sortRefs="true" submissionType="IETF" symRefs="true" tocDepth="3" tocInclude="true" xml:lang="en">
  <link href="https://datatracker.ietf.org/doc/draft-ietf-bess-dci-evpn-overlay-10" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9014" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <front>
    <title abbrev="Interconnect for EVPN-Overlays">Interconnect Solution for Ethernet VPN (EVPN) Overlay Networks</title>
    <seriesInfo name="RFC" value="9014" stream="IETF"/>
    <author initials="J." surname="Rabadan" fullname="Jorge Rabadan" role="editor">
      <organization showOnFrontPage="true">Nokia</organization>
      <address>
        <postal>
          <street>777 E. Middlefield Road</street>
          <city>Mountain View</city>
          <region>CA</region>
          <code>94043</code>
          <country>USA</country>
        </postal>
        <email>jorge.rabadan@nokia.com</email>
      </address>
    </author>
    <author initials="S." surname="Sathappan" fullname="Senthil Sathappan">
      <organization showOnFrontPage="true">Nokia</organization>
      <address>
        <email>senthil.sathappan@nokia.com</email>
      </address>
    </author>
    <author initials="W." surname="Henderickx" fullname="Wim Henderickx">
      <organization showOnFrontPage="true">Nokia</organization>
      <address>
        <email>wim.henderickx@nokia.com</email>
      </address>
    </author>
    <author initials="A." surname="Sajassi" fullname="Ali Sajassi">
      <organization showOnFrontPage="true">Cisco</organization>
      <address>
        <email>sajassi@cisco.com</email>
      </address>
    </author>
    <author initials="J." surname="Drake" fullname="John Drake">
      <organization showOnFrontPage="true">Juniper</organization>
      <address>
        <email>jdrake@juniper.net</email>
      </address>
    </author>
    <date month="05" year="2021"/>
    <workgroup>BESS Workgroup</workgroup>
    <abstract pn="section-abstract">
      <t indent="0" pn="section-abstract-1">
   This document describes how Network Virtualization Overlays (NVOs) can
   be connected to a Wide Area Network (WAN) in order to extend the
   Layer 2 connectivity required for some tenants. The solution analyzes
   the interaction between NVO networks running Ethernet Virtual Private
   Networks (EVPNs) and other Layer 2 VPN (L2VPN) technologies used in the WAN, such as
   Virtual Private LAN Services (VPLSs), VPLS extensions for Provider
   Backbone Bridging (PBB-VPLS), EVPN, or PBB-EVPN. It also describes how
   the existing technical specifications apply to the interconnection
   and extends the EVPN procedures needed in some cases. In particular,
   this document describes how EVPN routes are processed on Gateways
   (GWs) that interconnect EVPN-Overlay and EVPN-MPLS networks, as well
   as the Interconnect Ethernet Segment (I-ES), to provide multihoming. This
   document also describes the use of the Unknown MAC Route (UMR) to avoid issues of a Media Access Control (MAC) scale on Data Center Network Virtualization Edge (NVE) devices.</t>
    </abstract>
    <boilerplate>
      <section anchor="status-of-memo" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.1">
        <name slugifiedName="name-status-of-this-memo">Status of This Memo</name>
        <t indent="0" pn="section-boilerplate.1-1">
            This is an Internet Standards Track document.
        </t>
        <t indent="0" pn="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.
        </t>
        <t indent="0" pn="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <eref target="https://www.rfc-editor.org/info/rfc9014" brackets="none"/>.
        </t>
      </section>
      <section anchor="copyright" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.2">
        <name slugifiedName="name-copyright-notice">Copyright Notice</name>
        <t indent="0" pn="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.
        </t>
        <t indent="0" pn="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<eref target="https://trustee.ietf.org/license-info" brackets="none"/>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.
        </t>
      </section>
    </boilerplate>
    <toc>
      <section anchor="toc" numbered="false" removeInRFC="false" toc="exclude" pn="section-toc.1">
        <name slugifiedName="name-table-of-contents">Table of Contents</name>
        <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1">
          <li pn="section-toc.1-1.1">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.1"><xref derivedContent="1" format="counter" sectionFormat="of" target="section-1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-introduction">Introduction</xref></t>
          </li>
          <li pn="section-toc.1-1.2">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.2.1"><xref derivedContent="2" format="counter" sectionFormat="of" target="section-2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-conventions-and-terminology">Conventions and Terminology</xref></t>
          </li>
          <li pn="section-toc.1-1.3">
            <t indent="0" pn="section-toc.1-1.3.1"><xref derivedContent="3" format="counter" sectionFormat="of" target="section-3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-decoupled-interconnect-solu">Decoupled Interconnect Solution for EVPN-Overlay Networks</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.3.2">
              <li pn="section-toc.1-1.3.2.1">
                <t indent="0" keepWithNext="true" pn="section-toc.1-1.3.2.1.1"><xref derivedContent="3.1" format="counter" sectionFormat="of" target="section-3.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-interconnect-requirements">Interconnect Requirements</xref></t>
              </li>
              <li pn="section-toc.1-1.3.2.2">
                <t indent="0" pn="section-toc.1-1.3.2.2.1"><xref derivedContent="3.2" format="counter" sectionFormat="of" target="section-3.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-vlan-based-handoff">VLAN-Based Handoff</xref></t>
              </li>
              <li pn="section-toc.1-1.3.2.3">
                <t indent="0" pn="section-toc.1-1.3.2.3.1"><xref derivedContent="3.3" format="counter" sectionFormat="of" target="section-3.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-pw-based-handoff">PW-Based Handoff</xref></t>
              </li>
              <li pn="section-toc.1-1.3.2.4">
                <t indent="0" pn="section-toc.1-1.3.2.4.1"><xref derivedContent="3.4" format="counter" sectionFormat="of" target="section-3.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-multihoming-solution-on-the">Multihoming Solution on the GWs</xref></t>
              </li>
              <li pn="section-toc.1-1.3.2.5">
                <t indent="0" pn="section-toc.1-1.3.2.5.1"><xref derivedContent="3.5" format="counter" sectionFormat="of" target="section-3.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-gateway-optimizations">Gateway Optimizations</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.3.2.5.2">
                  <li pn="section-toc.1-1.3.2.5.2.1">
                    <t indent="0" pn="section-toc.1-1.3.2.5.2.1.1"><xref derivedContent="3.5.1" format="counter" sectionFormat="of" target="section-3.5.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-mac-address-advertisement-c">MAC Address Advertisement Control</xref></t>
                  </li>
                  <li pn="section-toc.1-1.3.2.5.2.2">
                    <t indent="0" pn="section-toc.1-1.3.2.5.2.2.1"><xref derivedContent="3.5.2" format="counter" sectionFormat="of" target="section-3.5.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-arp-nd-flooding-control">ARP/ND Flooding Control</xref></t>
                  </li>
                  <li pn="section-toc.1-1.3.2.5.2.3">
                    <t indent="0" pn="section-toc.1-1.3.2.5.2.3.1"><xref derivedContent="3.5.3" format="counter" sectionFormat="of" target="section-3.5.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-handling-failures-between-g">Handling Failures between GW and WAN Edge Routers</xref></t>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.4">
            <t indent="0" pn="section-toc.1-1.4.1"><xref derivedContent="4" format="counter" sectionFormat="of" target="section-4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-integrated-interconnect-sol">Integrated Interconnect Solution for EVPN-Overlay Networks</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2">
              <li pn="section-toc.1-1.4.2.1">
                <t indent="0" pn="section-toc.1-1.4.2.1.1"><xref derivedContent="4.1" format="counter" sectionFormat="of" target="section-4.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-interconnect-requirements-2">Interconnect Requirements</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.2">
                <t indent="0" pn="section-toc.1-1.4.2.2.1"><xref derivedContent="4.2" format="counter" sectionFormat="of" target="section-4.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-vpls-interconnect-for-evpn-">VPLS Interconnect for EVPN-Overlay Networks</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2.2.2">
                  <li pn="section-toc.1-1.4.2.2.2.1">
                    <t indent="0" pn="section-toc.1-1.4.2.2.2.1.1"><xref derivedContent="4.2.1" format="counter" sectionFormat="of" target="section-4.2.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-control-data-plane-setup-pr">Control/Data Plane Setup Procedures on the GWs</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.2.2.2">
                    <t indent="0" pn="section-toc.1-1.4.2.2.2.2.1"><xref derivedContent="4.2.2" format="counter" sectionFormat="of" target="section-4.2.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-multihoming-procedures-on-t">Multihoming Procedures on the GWs</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.4.2.3">
                <t indent="0" pn="section-toc.1-1.4.2.3.1"><xref derivedContent="4.3" format="counter" sectionFormat="of" target="section-4.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-pbb-vpls-interconnect-for-e">PBB-VPLS Interconnect for EVPN-Overlay Networks</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2.3.2">
                  <li pn="section-toc.1-1.4.2.3.2.1">
                    <t indent="0" pn="section-toc.1-1.4.2.3.2.1.1"><xref derivedContent="4.3.1" format="counter" sectionFormat="of" target="section-4.3.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-control-data-plane-setup-pro">Control/Data Plane Setup Procedures on the GWs</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.3.2.2">
                    <t indent="0" pn="section-toc.1-1.4.2.3.2.2.1"><xref derivedContent="4.3.2" format="counter" sectionFormat="of" target="section-4.3.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-multihoming-procedures-on-th">Multihoming Procedures on the GWs</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.4.2.4">
                <t indent="0" pn="section-toc.1-1.4.2.4.1"><xref derivedContent="4.4" format="counter" sectionFormat="of" target="section-4.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-evpn-mpls-interconnect-for-">EVPN-MPLS Interconnect for EVPN-Overlay Networks</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2.4.2">
                  <li pn="section-toc.1-1.4.2.4.2.1">
                    <t indent="0" pn="section-toc.1-1.4.2.4.2.1.1"><xref derivedContent="4.4.1" format="counter" sectionFormat="of" target="section-4.4.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-control-plane-setup-procedu">Control plane Setup Procedures on the GWs</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.4.2.2">
                    <t indent="0" pn="section-toc.1-1.4.2.4.2.2.1"><xref derivedContent="4.4.2" format="counter" sectionFormat="of" target="section-4.4.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-data-plane-setup-procedures">Data Plane Setup Procedures on the GWs</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.4.2.3">
                    <t indent="0" pn="section-toc.1-1.4.2.4.2.3.1"><xref derivedContent="4.4.3" format="counter" sectionFormat="of" target="section-4.4.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-multihoming-procedure-exten">Multihoming Procedure Extensions on the GWs</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.4.2.4">
                    <t indent="0" pn="section-toc.1-1.4.2.4.2.4.1"><xref derivedContent="4.4.4" format="counter" sectionFormat="of" target="section-4.4.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-impact-on-mac-mobility-proc">Impact on MAC Mobility Procedures</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.4.2.5">
                    <t indent="0" pn="section-toc.1-1.4.2.4.2.5.1"><xref derivedContent="4.4.5" format="counter" sectionFormat="of" target="section-4.4.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-gateway-optimizations-2">Gateway Optimizations</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.4.2.6">
                    <t indent="0" pn="section-toc.1-1.4.2.4.2.6.1"><xref derivedContent="4.4.6" format="counter" sectionFormat="of" target="section-4.4.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-benefits-of-the-evpn-mpls-i">Benefits of the EVPN-MPLS Interconnect Solution</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.4.2.5">
                <t indent="0" pn="section-toc.1-1.4.2.5.1"><xref derivedContent="4.5" format="counter" sectionFormat="of" target="section-4.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-pbb-evpn-interconnect-for-e">PBB-EVPN Interconnect for EVPN-Overlay Networks</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2.5.2">
                  <li pn="section-toc.1-1.4.2.5.2.1">
                    <t indent="0" pn="section-toc.1-1.4.2.5.2.1.1"><xref derivedContent="4.5.1" format="counter" sectionFormat="of" target="section-4.5.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-control-data-plane-setup-proc">Control/Data Plane Setup Procedures on the GWs</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.5.2.2">
                    <t indent="0" pn="section-toc.1-1.4.2.5.2.2.1"><xref derivedContent="4.5.2" format="counter" sectionFormat="of" target="section-4.5.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-multihoming-procedures-on-the">Multihoming Procedures on the GWs</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.5.2.3">
                    <t indent="0" pn="section-toc.1-1.4.2.5.2.3.1"><xref derivedContent="4.5.3" format="counter" sectionFormat="of" target="section-4.5.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-impact-on-mac-mobility-proce">Impact on MAC Mobility Procedures</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.5.2.4">
                    <t indent="0" pn="section-toc.1-1.4.2.5.2.4.1"><xref derivedContent="4.5.4" format="counter" sectionFormat="of" target="section-4.5.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-gateway-optimizations-3">Gateway Optimizations</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.4.2.6">
                <t indent="0" pn="section-toc.1-1.4.2.6.1"><xref derivedContent="4.6" format="counter" sectionFormat="of" target="section-4.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-evpn-vxlan-interconnect-for">EVPN-VXLAN Interconnect for EVPN-Overlay Networks</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2.6.2">
                  <li pn="section-toc.1-1.4.2.6.2.1">
                    <t indent="0" pn="section-toc.1-1.4.2.6.2.1.1"><xref derivedContent="4.6.1" format="counter" sectionFormat="of" target="section-4.6.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-globally-unique-vnis-in-the">Globally Unique VNIs in the Interconnect Network</xref></t>
                  </li>
                  <li pn="section-toc.1-1.4.2.6.2.2">
                    <t indent="0" pn="section-toc.1-1.4.2.6.2.2.1"><xref derivedContent="4.6.2" format="counter" sectionFormat="of" target="section-4.6.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-downstream-assigned-vnis-in">Downstream-Assigned VNIs in the Interconnect Network</xref></t>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.5">
            <t indent="0" pn="section-toc.1-1.5.1"><xref derivedContent="5" format="counter" sectionFormat="of" target="section-5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-security-considerations">Security Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.6">
            <t indent="0" pn="section-toc.1-1.6.1"><xref derivedContent="6" format="counter" sectionFormat="of" target="section-6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-iana-considerations">IANA Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.7">
            <t indent="0" pn="section-toc.1-1.7.1"><xref derivedContent="7" format="counter" sectionFormat="of" target="section-7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-references">References</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.7.2">
              <li pn="section-toc.1-1.7.2.1">
                <t indent="0" pn="section-toc.1-1.7.2.1.1"><xref derivedContent="7.1" format="counter" sectionFormat="of" target="section-7.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-normative-references">Normative References</xref></t>
              </li>
              <li pn="section-toc.1-1.7.2.2">
                <t indent="0" pn="section-toc.1-1.7.2.2.1"><xref derivedContent="7.2" format="counter" sectionFormat="of" target="section-7.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-informative-references">Informative References</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.8">
            <t indent="0" pn="section-toc.1-1.8.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.a"/><xref derivedContent="" format="title" sectionFormat="of" target="name-acknowledgments">Acknowledgments</xref></t>
          </li>
          <li pn="section-toc.1-1.9">
            <t indent="0" pn="section-toc.1-1.9.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.b"/><xref derivedContent="" format="title" sectionFormat="of" target="name-contributors">Contributors</xref></t>
          </li>
          <li pn="section-toc.1-1.10">
            <t indent="0" pn="section-toc.1-1.10.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.c"/><xref derivedContent="" format="title" sectionFormat="of" target="name-authors-addresses">Authors' Addresses</xref></t>
          </li>
        </ul>
      </section>
    </toc>
  </front>
  <middle>
    <section anchor="sect-2" numbered="true" toc="include" removeInRFC="false" pn="section-1">
      <name slugifiedName="name-introduction">Introduction</name>
      <t indent="0" pn="section-1-1">
   <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/> discusses the use of Ethernet Virtual Private
   Networks (EVPNs) <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> as the control plane for Network
   Virtualization Overlays (NVOs), where VXLAN <xref target="RFC7348" format="default" sectionFormat="of" derivedContent="RFC7348"/>, NVGRE <xref target="RFC7637" format="default" sectionFormat="of" derivedContent="RFC7637"/>, or
   MPLS over GRE <xref target="RFC4023" format="default" sectionFormat="of" derivedContent="RFC4023"/> can be used as
   possible data plane encapsulation options.</t>
      <t indent="0" pn="section-1-2">
   While this model provides a scalable and efficient multitenant solution
   within the Data Center, it might not be easily extended to the Wide Area
   Network (WAN) in some cases, due to the requirements and existing deployed
   technologies. For instance, a Service Provider might have an already
   deployed Virtual Private LAN Service (VPLS) <xref target="RFC4761" format="default" sectionFormat="of" derivedContent="RFC4761"/> <xref target="RFC4762" format="default" sectionFormat="of" derivedContent="RFC4762"/>, VPLS
   extensions for Provider Backbone Bridging (PBB-VPLS) <xref target="RFC7041" format="default" sectionFormat="of" derivedContent="RFC7041"/>, EVPN
   <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>, or PBB-EVPN <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/> network that has to be used to
   interconnect
   Data Centers and WAN VPN users. A Gateway (GW) function is required in
   these cases. In fact, <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/> discusses two main Data Center
   Interconnect (DCI) solution groups: "DCI using GWs" and "DCI using ASBRs". This
   document specifies the solutions that correspond to the "DCI using GWs"
   group.</t>
      <t indent="0" pn="section-1-3">
   It is assumed that the NVO GW and the WAN Edge functions
   can be decoupled into two separate systems or integrated into the same
   system. The former option will be referred to as "decoupled interconnect
   solution" throughout the document, whereas the latter one will be
   referred to as "integrated interconnect solution".</t>
      <t indent="0" pn="section-1-4">
   The specified procedures are local to the redundant GWs connecting a
   DC to the WAN. The document does not preclude any combination across
   different DCs for the same tenant. For instance, a "Decoupled"
   solution can be used in GW1 and GW2 (for DC1), and an "Integrated"
   solution can be used in GW3 and GW4 (for DC2).</t>
      <t indent="0" pn="section-1-5">
   While the Gateways and WAN Provider Edges (PEs) use existing specifications in some
   cases, the document also defines extensions that are specific to DCI.
   In particular, those extensions are:</t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-1-6">
        <li pn="section-1-6.1">The Interconnect Ethernet Segment (I-ES), an Ethernet Segment that
     can be associated to a set of pseudowires (PWs) or other tunnels. The I-ES defined in
     this document is not associated with a set of Ethernet links, as
     per <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>, but rather with a set of virtual tunnels (e.g., a
     set of PWs). This set of virtual tunnels is referred to as vES
     <xref target="I-D.ietf-bess-evpn-virtual-eth-segment" format="default" sectionFormat="of" derivedContent="VIRTUAL-ES"/>.</li>
        <li pn="section-1-6.2">The use of the Unknown MAC Route (UMR) in a DCI scenario.</li>
        <li pn="section-1-6.3">The processing of EVPN routes on Gateways with MAC-VRFs connecting
     EVPN-Overlay and EVPN-MPLS networks, or EVPN-Overlay and EVPN-Overlay
     networks.</li>
      </ul>
    </section>
    <section anchor="sect-1" numbered="true" toc="include" removeInRFC="false" pn="section-2">
      <name slugifiedName="name-conventions-and-terminology">Conventions and Terminology</name>
      <t indent="0" pn="section-2-1">
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as
    described in BCP 14 <xref target="RFC2119" format="default" sectionFormat="of" derivedContent="RFC2119"/> <xref target="RFC8174" format="default" sectionFormat="of" derivedContent="RFC8174"/> 
    when, and only when, they appear in all capitals, as shown here.
      </t>
      <dl indent="3" newline="false" spacing="normal" pn="section-2-2">
        <dt pn="section-2-2.1">AC:</dt>
        <dd pn="section-2-2.2"> Attachment Circuit</dd>
        <dt pn="section-2-2.3">ARP:</dt>
        <dd pn="section-2-2.4">Address Resolution Protocol</dd>
        <dt pn="section-2-2.5">BUM:</dt>
        <dd pn="section-2-2.6">Broadcast, Unknown Unicast and Multicast (traffic)</dd>
        <dt pn="section-2-2.7">CE:</dt>
        <dd pn="section-2-2.8">Customer Equipment</dd>
        <dt pn="section-2-2.9">CFM:</dt>
        <dd pn="section-2-2.10">Connectivity Fault Management</dd>
        <dt pn="section-2-2.11">DC:</dt>
        <dd pn="section-2-2.12">Data Center</dd>
        <dt pn="section-2-2.13">DCI:</dt>
        <dd pn="section-2-2.14">Data Center Interconnect</dd>
        <dt pn="section-2-2.15">DF:</dt>
        <dd pn="section-2-2.16">Designated Forwarder</dd>
        <dt pn="section-2-2.17">EVI:</dt>
        <dd pn="section-2-2.18">EVPN Instance</dd>
        <dt pn="section-2-2.19">EVPN:</dt>
        <dd pn="section-2-2.20">Ethernet Virtual Private Network, as in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/></dd>
        <dt pn="section-2-2.21">EVPN Tunnel binding:</dt>
        <dd pn="section-2-2.22">refers to a tunnel to a remote PE/NVE
      for a given EVI. Ethernet packets in these bindings are encapsulated with
   the Overlay or MPLS encapsulation and the EVPN label at the bottom of
   the stack.</dd>
        <dt pn="section-2-2.23">ES:</dt>
        <dd pn="section-2-2.24">Ethernet Segment</dd>
        <dt pn="section-2-2.25">ESI:</dt>
        <dd pn="section-2-2.26">Ethernet Segment Identifier</dd>
        <dt pn="section-2-2.27">GW:</dt>
        <dd pn="section-2-2.28">Gateway or Data Center Gateway</dd>
        <dt pn="section-2-2.29">I-ES and I-ESI:</dt>
        <dd pn="section-2-2.30">Interconnect Ethernet Segment and
      Interconnect Ethernet Segment Identifier. An I-ES is defined on the GWs
      for multihoming to/from the WAN.</dd>
        <dt pn="section-2-2.31">MAC</dt>
        <dd pn="section-2-2.32">Media Access Control</dd>
        <dt pn="section-2-2.33">MAC-VRF:</dt>
        <dd pn="section-2-2.34">refers to an EVI instance in a particular node</dd>
        <dt pn="section-2-2.35">MP2P and LSM tunnels:</dt>
        <dd pn="section-2-2.36">refer to multipoint-to-point and label
      switched multicast tunnels</dd>
        <dt pn="section-2-2.37">ND:</dt>
        <dd pn="section-2-2.38">Neighbor Discovery</dd>
        <dt pn="section-2-2.39">NDF:</dt>
        <dd pn="section-2-2.40">Non-Designated Forwarder</dd>
        <dt pn="section-2-2.41">NVE:</dt>
        <dd pn="section-2-2.42">Network Virtualization Edge</dd>
        <dt pn="section-2-2.43">NVGRE:</dt>
        <dd pn="section-2-2.44">Network Virtualization using Generic Routing
      Encapsulation</dd>
        <dt pn="section-2-2.45">NVO:</dt>
        <dd pn="section-2-2.46">Network Virtualization Overlay</dd>
        <dt pn="section-2-2.47">OAM:</dt>
        <dd pn="section-2-2.48">Operations, Administration, and Maintenance</dd>
        <dt pn="section-2-2.49">PBB:</dt>
        <dd pn="section-2-2.50">Provider Backbone Bridging</dd>
        <dt pn="section-2-2.51">PE:</dt>
        <dd pn="section-2-2.52">Provider Edge</dd>
        <dt pn="section-2-2.53">PW:</dt>
        <dd pn="section-2-2.54">Pseudowire</dd>
        <dt pn="section-2-2.55">RD:</dt>
        <dd pn="section-2-2.56">Route Distinguisher</dd>
        <dt pn="section-2-2.57">RR:</dt>
        <dd pn="section-2-2.58">Route Reflector</dd>
        <dt pn="section-2-2.59">RT:</dt>
        <dd pn="section-2-2.60">Route Target</dd>
        <dt pn="section-2-2.61">S/C-TAG:</dt>
        <dd pn="section-2-2.62">refers to a combination of Service Tag and Customer
      Tag in a 802.1Q frame</dd>
        <dt pn="section-2-2.63">TOR:</dt>
        <dd pn="section-2-2.64">Top-Of-Rack</dd>
        <dt pn="section-2-2.65">UMR:</dt>
        <dd pn="section-2-2.66">Unknown MAC Route</dd>
        <dt pn="section-2-2.67">vES:</dt>
        <dd pn="section-2-2.68">virtual Ethernet Segment</dd>
        <dt pn="section-2-2.69">VNI/VSID:</dt>
        <dd pn="section-2-2.70">refers to VXLAN/NVGRE virtual identifiers</dd>
        <dt pn="section-2-2.71">VPLS:</dt>
        <dd pn="section-2-2.72">Virtual Private LAN Service</dd>
        <dt pn="section-2-2.73">VSI:</dt>
        <dd pn="section-2-2.74">Virtual Switch Instance or VPLS instance in a
      particular PE</dd>
        <dt pn="section-2-2.75">VXLAN:</dt>
        <dd pn="section-2-2.76">Virtual eXtensible LAN</dd>
      </dl>
    </section>
    <section anchor="sect-3" numbered="true" toc="include" removeInRFC="false" pn="section-3">
      <name slugifiedName="name-decoupled-interconnect-solu">Decoupled Interconnect Solution for EVPN-Overlay Networks</name>
      <t indent="0" pn="section-3-1">
   This section describes the interconnect solution when the GW and WAN
   Edge functions are implemented in different systems. <xref target="fig-1" format="default" sectionFormat="of" derivedContent="Figure 1"/> depicts
   the reference model described in this section. Note that, although
   not shown in <xref target="fig-1" format="default" sectionFormat="of" derivedContent="Figure 1"/>, GWs may have local Attachment Circuits
      (ACs).</t>
      <figure anchor="fig-1" align="left" suppress-title="false" pn="figure-1">
        <name slugifiedName="name-decoupled-interconnect-mode">Decoupled Interconnect Model</name>
        <artwork name="" type="" align="left" alt="" pn="section-3-2.1">
                                +--+
                                |CE|
                                +--+
                                  |
                               +----+
                          +----| PE |----+
        +---------+       |    +----+    |       +---------+
+----+  |        +---+  +----+        +----+  +---+        |  +----+
|NVE1|--|        |   |  |WAN |        |WAN |  |   |        |--|NVE3|
+----+  |        |GW1|--|Edge|        |Edge|--|GW3|        |  +----+
        |        +---+  +----+        +----+  +---+        |
        |  NVO-1   |      |     WAN      |      |   NVO-2  |
        |        +---+  +----+        +----+  +---+        |
        |        |   |  |WAN |        |WAN |  |   |        |
+----+  |        |GW2|--|Edge|        |Edge|--|GW4|        |  +----+
|NVE2|--|        +---+  +----+        +----+  +---+        |--|NVE4|
+----+  +---------+       |              |       +---------+  +----+
                          +--------------+

|&lt;-EVPN-Overlay--&gt;|&lt;-VLAN-&gt;|&lt;-WAN L2VPN-&gt;|&lt;--PW--&gt;|&lt;--EVPN-Overlay-&gt;|
                   handoff               handoff
</artwork>
      </figure>
      <t indent="0" pn="section-3-3">
   The following section describes the interconnect requirements for
   this model.</t>
      <section anchor="sect-3.1" numbered="true" toc="include" removeInRFC="false" pn="section-3.1">
        <name slugifiedName="name-interconnect-requirements">Interconnect Requirements</name>
        <t indent="0" pn="section-3.1-1">
   The decoupled interconnect architecture is intended to be deployed in
   networks where the EVPN-Overlay and WAN providers are different
   entities and a clear demarcation is needed. This solution solves the
   following requirements:</t>
        <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3.1-2">
          <li pn="section-3.1-2.1">A simple connectivity handoff between the EVPN-Overlay network
     provider and the WAN provider so that QoS and security enforcement
     are easily accomplished.</li>
          <li pn="section-3.1-2.2">Independence of the L2VPN technology deployed in
     the WAN.</li>
          <li pn="section-3.1-2.3">Multihoming between GW and WAN Edge routers, including per-service
     load balancing. Per-flow load balancing is not a strong requirement,
     since a deterministic path per service is usually required for an
     easy QoS and security enforcement.</li>
          <li pn="section-3.1-2.4">Support of Ethernet OAM and Connectivity Fault Management (CFM)
     <xref target="IEEE.802.1AG" format="default" sectionFormat="of" derivedContent="IEEE.802.1AG"/> <xref target="Y.1731" format="default" sectionFormat="of" derivedContent="Y.1731"/> functions between the GW and the WAN Edge router
     to detect individual AC failures.</li>
          <li pn="section-3.1-2.5">
            <t indent="0" pn="section-3.1-2.5.1">Support for the following optimizations at the GW:</t>
            <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3.1-2.5.2">
              <li pn="section-3.1-2.5.2.1">Flooding reduction of unknown unicast traffic sourced from the DC
        Network Virtualization Edge (NVE) devices.</li>
              <li pn="section-3.1-2.5.2.2">Control of the WAN MAC addresses advertised to the DC.</li>
              <li pn="section-3.1-2.5.2.3">Address Resolution Protocol (ARP) and Neighbor Discovery (ND)
        flooding control for the requests coming from the WAN.</li>
            </ul>
          </li>
        </ul>
      </section>
      <section anchor="sect-3.2" numbered="true" toc="include" removeInRFC="false" pn="section-3.2">
        <name slugifiedName="name-vlan-based-handoff">VLAN-Based Handoff</name>
        <t indent="0" pn="section-3.2-1">
   In this option, the handoff between the GWs and the WAN Edge routers
   is based on VLANs <xref target="IEEE.802.1Q" format="default" sectionFormat="of" derivedContent="IEEE.802.1Q"/>. This
   is illustrated in <xref target="fig-1" format="default" sectionFormat="of" derivedContent="Figure 1"/>
   (between the GWs in NVO-1 and the WAN Edge routers). Each MAC-VRF in
   the GW is connected to a different VSI/MAC-VRF instance in the WAN
   Edge router by using a different C-TAG VLAN ID or a different
   combination of S/C-TAG VLAN IDs that matches at both sides.</t>
        <t indent="0" pn="section-3.2-2">
   This option provides the best possible demarcation between the DC and
   WAN providers, and it does not require control plane interaction
   between both providers. The disadvantage of this model is the
   provisioning overhead, since the service has to be mapped to a C-TAG
   or S/C-TAG VLAN ID combination at both GW and WAN Edge routers.</t>
        <t indent="0" pn="section-3.2-3">
   In this model, the GW acts as a regular Network Virtualization Edge
   (NVE) towards the DC. Its control plane, data plane procedures, and
   interactions are described in <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/>.</t>
        <t indent="0" pn="section-3.2-4">
   The WAN Edge router acts as a (PBB-)VPLS or (PBB-)EVPN PE with
   Attachment Circuits (ACs) to the GWs.

   Its functions are described in
   <xref target="RFC4761" format="default" sectionFormat="of" derivedContent="RFC4761"/>, <xref target="RFC4762" format="default" sectionFormat="of" derivedContent="RFC4762"/>, <xref target="RFC6074" format="default" sectionFormat="of" derivedContent="RFC6074"/>, <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>, and <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/>.</t>
      </section>
      <section anchor="sect-3.3" numbered="true" toc="include" removeInRFC="false" pn="section-3.3">
        <name slugifiedName="name-pw-based-handoff">PW-Based Handoff</name>
        <t indent="0" pn="section-3.3-1">
   If MPLS between the GW and the WAN Edge router is an option, a PW-based
   interconnect solution can be deployed. In this option, the handoff between
   both routers is based on FEC128-based PWs <xref target="RFC4762" format="default" sectionFormat="of" derivedContent="RFC4762"/> or FEC129-based PWs
   (for a greater level of network automation) <xref target="RFC6074" format="default" sectionFormat="of" derivedContent="RFC6074"/>. Note that this model
   still provides a clear demarcation between DC and WAN (since there
   is a single PW between each MAC-VRF and peer VSI), and security/QoS
   policies may be applied on a per-PW basis. This model provides better
   scalability than a C-TAG-based handoff and less provisioning overhead than
   a combined C/S-TAG handoff. The PW-based handoff interconnect is
   illustrated in <xref target="fig-1" format="default" sectionFormat="of" derivedContent="Figure 1"/> (between the NVO-2 GWs and the WAN Edge routers).</t>
        <t indent="0" pn="section-3.3-2">
   In this model, besides the usual MPLS procedures between GW and WAN
   Edge router <xref target="RFC3031" format="default" sectionFormat="of" derivedContent="RFC3031"/>, the GW <bcp14>MUST</bcp14> support an interworking function
   in each MAC-VRF that requires extension to the WAN:</t>
        <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3.3-3">
          <li pn="section-3.3-3.1">If a FEC128-based PW is used between the MAC-VRF (GW) and the VSI (WAN
     Edge), the corresponding Virtual Connection Identifier (VCID) <bcp14>MUST</bcp14> be provisioned on the MAC-VRF and
     match the VCID used in the peer VSI at the WAN Edge router.</li>
          <li pn="section-3.3-3.2">If BGP Auto-discovery <xref target="RFC6074" format="default" sectionFormat="of" derivedContent="RFC6074"/> and FEC129-based PWs are used
     between the GW MAC-VRF and the WAN Edge VSI, the provisioning of
     the VPLS-ID <bcp14>MUST</bcp14> be supported on the MAC-VRF and <bcp14>MUST</bcp14> match the
     VPLS-ID used in the WAN Edge VSI.</li>
        </ul>
        <t indent="0" pn="section-3.3-4">
   If a PW-based handoff is used, the GW's AC (or point of attachment to
   the EVPN instance) uses a combination of a PW label and VLAN IDs. PWs
   are treated as service interfaces, defined in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.</t>
      </section>
      <section anchor="sect-3.4" numbered="true" toc="include" removeInRFC="false" pn="section-3.4">
        <name slugifiedName="name-multihoming-solution-on-the">Multihoming Solution on the GWs</name>
        <t indent="0" pn="section-3.4-1">
   EVPN single-active multihoming -- i.e., per-service load-balancing
   multihoming -- is required in this type of interconnect.</t>
        <t indent="0" pn="section-3.4-2">

   The GWs will be provisioned with a unique ES for each WAN interconnect,
   and the handoff attachment circuits or PWs between the GW and the
   WAN Edge router will be assigned an ESI for each such ES. The ESI will be
   administratively configured on the GWs according to the procedures in
   <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>. This I-ES will be
   referred to as "I-ES" hereafter,
   and its identifier will be referred to as "I-ESI". Different ESI types are described in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>. The use of Type 0 for the I-ESI is <bcp14>RECOMMENDED</bcp14>
   in this document.</t>
        <t indent="0" pn="section-3.4-3">
   The solution (on the GWs) <bcp14>MUST</bcp14> follow the single-active multihoming
   procedures as described in <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/> for
   the provisioned I-ESI -- i.e., Ethernet A-D routes per ES and per EVI will be advertised to the DC
   NVEs for the multihoming functions, and ES routes will be advertised so that
   ES discovery and Designated Forwarder (DF) procedures can be followed. The
   MAC addresses learned (in the data plane) on the handoff links will be
   advertised with the I-ESI encoded in the ESI field.</t>
      </section>
      <section anchor="sect-3.5" numbered="true" toc="include" removeInRFC="false" pn="section-3.5">
        <name slugifiedName="name-gateway-optimizations">Gateway Optimizations</name>
        <t indent="0" pn="section-3.5-1">
   The following GW features are optional and optimize the control plane
   and data plane in the DC.</t>
        <section anchor="sect-3.5.1" numbered="true" toc="include" removeInRFC="false" pn="section-3.5.1">
          <name slugifiedName="name-mac-address-advertisement-c">MAC Address Advertisement Control</name>
          <t indent="0" pn="section-3.5.1-1">
   The use of EVPN in NVO networks brings a significant number of
   benefits, as described in <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/>. However, if multiple DCs
   are interconnected into a single EVI, each DC will have to import all
   of the MAC addresses from each of the other DCs.</t>
          <t indent="0" pn="section-3.5.1-2">
   Even if optimized BGP techniques like RT constraint <xref target="RFC4684" format="default" sectionFormat="of" derivedContent="RFC4684"/> are
   used, the number of MAC addresses to advertise or withdraw (in case
   of failure) by the GWs of a given DC could overwhelm the NVEs within
   that DC, particularly when the NVEs reside in the hypervisors.</t>
          <t indent="0" pn="section-3.5.1-3">
   The solution specified in this document uses the Unknown MAC Route (UMR)
   that is advertised into a given DC by each of the DC's GWs.  This route is
   defined in <xref target="RFC7543" format="default" sectionFormat="of" derivedContent="RFC7543"/> and is a regular EVPN MAC/IP Advertisement route in
   which the MAC Address Length is set to 48, the MAC address is set to 0, and
   the ESI field is set to the DC GW's I-ESI.</t>
          <t indent="0" pn="section-3.5.1-4">
   An NVE within that DC that understands and processes the UMR will send
   unknown unicast frames to one of the DC's GWs, which will then forward
   that packet to the correct egress PE. Note that, because the ESI is
   set to the DC GW's I-ESI, all-active multihoming can be applied to
   unknown unicast MAC addresses. An NVE that does not understand the
   Unknown MAC Route will handle unknown unicast as described in
   <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.</t>
          <t indent="0" pn="section-3.5.1-5">
   This document proposes that local policy determine whether MAC
   addresses and/or the UMR are advertised into a given DC. As an
   example, when all the DC MAC addresses are learned in the
   control/management plane, it may be appropriate to advertise only the
   UMR. Advertising all the DC MAC addresses in the control/management
   plane is usually the case when the NVEs reside in hypervisors. Refer
   to <xref target="RFC8365" sectionFormat="comma" section="7" format="default" derivedLink="https://rfc-editor.org/rfc/rfc8365#section-7" derivedContent="RFC8365"/>.</t>
          <t indent="0" pn="section-3.5.1-6">
   It is worth noting that the UMR usage in <xref target="RFC7543" format="default" sectionFormat="of" derivedContent="RFC7543"/> and the UMR usage in
   this document are different. In the former, a Virtual Spoke (V-spoke) does
   not necessarily learn all the MAC addresses pertaining to hosts in other
   V-spokes of the same network. The communication between two V-spokes is
   done through the Default MAC Gateway (DMG) until the V-spokes learn each other's MAC
   addresses. In this document, two leaf switches in the same DC are
   recommended for V-spokes to learn each other's MAC addresses for the same EVI. The
	  leaf-to-leaf communication is always direct and does not go through
	  the GW.</t>
        </section>
        <section anchor="sect-3.5.2" numbered="true" toc="include" removeInRFC="false" pn="section-3.5.2">
          <name slugifiedName="name-arp-nd-flooding-control">ARP/ND Flooding Control</name>
          <t indent="0" pn="section-3.5.2-1">
   Another optimization mechanism, naturally provided by EVPN in the
   GWs, is the Proxy ARP/ND function. The GWs should build a Proxy
   ARP/ND cache table, as per <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>. When
   the active GW receives an
   ARP/ND request/solicitation coming from the WAN, the GW does a Proxy
   ARP/ND table lookup and replies as long as the information is
   available in its table.</t>
          <t indent="0" pn="section-3.5.2-2">
   This mechanism is especially recommended on the GWs, since it
   protects the DC network from external ARP/ND-flooding storms.</t>
        </section>
        <section anchor="sect-3.5.3" numbered="true" toc="include" removeInRFC="false" pn="section-3.5.3">
          <name slugifiedName="name-handling-failures-between-g">Handling Failures between GW and WAN Edge Routers</name>
          <t indent="0" pn="section-3.5.3-1">
   Link/PE failures are handled on the GWs as specified in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.
   The GW detecting the failure will withdraw the EVPN routes, as per
   <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.</t>
          <t indent="0" pn="section-3.5.3-2">
   Individual AC/PW failures may be detected by OAM mechanisms. For
   instance:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3.5.3-3">
            <li pn="section-3.5.3-3.1">If the interconnect solution is based on a VLAN handoff, Ethernet-CFM
     <xref target="IEEE.802.1AG" format="default" sectionFormat="of" derivedContent="IEEE.802.1AG"/> <xref target="Y.1731" format="default" sectionFormat="of" derivedContent="Y.1731"/> may be used to detect individual AC failures on both
     the GW and WAN Edge router. An individual AC failure will trigger the
     withdrawal of the corresponding A-D per EVI route as well as the MACs
     learned on that AC.</li>
            <li pn="section-3.5.3-3.2">If the interconnect solution is based on a PW handoff, the Label
     Distribution Protocol (LDP) PW Status bits TLV <xref target="RFC6870" format="default" sectionFormat="of" derivedContent="RFC6870"/> may be
     used to detect individual PW failures on both the GW and WAN Edge
     router.</li>
          </ul>
        </section>
      </section>
    </section>
    <section anchor="sect-4" numbered="true" toc="include" removeInRFC="false" pn="section-4">
      <name slugifiedName="name-integrated-interconnect-sol">Integrated Interconnect Solution for EVPN-Overlay Networks</name>
      <t indent="0" pn="section-4-1">
   When the DC and the WAN are operated by the same administrative
   entity, the Service Provider can decide to integrate the GW and WAN
   Edge PE functions in the same router for obvious reasons to save as relates to Capital Expenditure (CAPEX) and Operating Expenses (OPEX). This is illustrated in <xref target="fig-2" format="default" sectionFormat="of" derivedContent="Figure 2"/>. Note that this
   model
   does not provide an explicit demarcation link between DC and WAN
   anymore. Although not shown in <xref target="fig-2" format="default" sectionFormat="of" derivedContent="Figure 2"/>, note that the GWs may have
   local ACs.</t>
      <figure anchor="fig-2" align="left" suppress-title="false" pn="figure-2">
        <name slugifiedName="name-integrated-interconnect-mod">Integrated Interconnect Model</name>
        <artwork name="" type="" align="left" alt="" pn="section-4-2.1">
                          +--+
                          |CE|
                          +--+
                            |
                         +----+
                    +----| PE |----+
        +---------+ |    +----+    | +---------+
+----+  |        +---+            +---+        |  +----+
|NVE1|--|        |   |            |   |        |--|NVE3|
+----+  |        |GW1|            |GW3|        |  +----+
        |        +---+            +---+        |
        |  NVO-1   |       WAN      |   NVO-2  |
        |        +---+            +---+        |
        |        |   |            |   |        |
+----+  |        |GW2|            |GW4|        |  +----+
|NVE2|--|        +---+            +---+        |--|NVE4|
+----+  +---------+ |              | +---------+  +----+
                    +--------------+

|&lt;--EVPN-Overlay---&gt;|&lt;-----VPLS---&gt;|&lt;---EVPN-Overlay--&gt;|
                    |&lt;--PBB-VPLS--&gt;|
  Interconnect  -&gt;  |&lt;-EVPN-MPLS--&gt;|
   options          |&lt;--EVPN-Ovl--&gt;|*
                    |&lt;--PBB-EVPN--&gt;|

* EVPN-Ovl stands for EVPN-Overlay (and it's an interconnect option).
</artwork>
      </figure>
      <section anchor="sect-4.1" numbered="true" toc="include" removeInRFC="false" pn="section-4.1">
        <name slugifiedName="name-interconnect-requirements-2">Interconnect Requirements</name>
        <t indent="0" pn="section-4.1-1">
   The integrated interconnect solution meets the following
   requirements:</t>
        <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.1-2">
          <li pn="section-4.1-2.1">Control plane and data plane interworking between the EVPN-Overlay
     network and the L2VPN technology supported in the WAN, irrespective
     of the technology choice -- i.e., (PBB‑)VPLS or (PBB-)EVPN, as
     depicted in <xref target="fig-2" format="default" sectionFormat="of" derivedContent="Figure 2"/>.</li>
          <li pn="section-4.1-2.2">Multihoming, including single-active multihoming with per-service load
     balancing or all-active multihoming -- i.e., per-flow load-balancing -- as
     long as the technology deployed in the WAN supports it.</li>
          <li pn="section-4.1-2.3">Support for end-to-end MAC Mobility, Static MAC protection and
     other procedures (e.g., proxy-arp) described in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> as long as
     EVPN-MPLS is the technology of choice in the WAN.</li>
          <li pn="section-4.1-2.4">Independent inclusive multicast trees in the WAN and in the DC.
     That is, the inclusive multicast tree type defined in the WAN does
     not need to be the same as in the DC.</li>
        </ul>
      </section>
      <section anchor="sect-4.2" numbered="true" toc="include" removeInRFC="false" pn="section-4.2">
        <name slugifiedName="name-vpls-interconnect-for-evpn-">VPLS Interconnect for EVPN-Overlay Networks</name>
        <section anchor="sect-4.2.1" numbered="true" toc="include" removeInRFC="false" pn="section-4.2.1">
          <name slugifiedName="name-control-data-plane-setup-pr">Control/Data Plane Setup Procedures on the GWs</name>
          <t indent="0" pn="section-4.2.1-1">
   Regular MPLS tunnels and Targeted LDP (tLDP) / BGP sessions will be set up to the WAN
   PEs and RRs as per <xref target="RFC4761" format="default" sectionFormat="of" derivedContent="RFC4761"/>, <xref target="RFC4762" format="default" sectionFormat="of" derivedContent="RFC4762"/>, and <xref target="RFC6074" format="default" sectionFormat="of" derivedContent="RFC6074"/>, and overlay
   tunnels and EVPN will be set up as per <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/>. Note that
   different route targets for the DC and the WAN are normally
   required (unless <xref target="RFC4762" format="default" sectionFormat="of" derivedContent="RFC4762"/> is used in the WAN, in which case no WAN
   route target is needed). A single type-1 RD per service may be used.</t>
          <t indent="0" pn="section-4.2.1-2">
   In order to support multihoming, the GWs will be provisioned with an
   I-ESI (see <xref target="sect-3.4" format="default" sectionFormat="of" derivedContent="Section 3.4"/>), which will be unique for each
   interconnection. In this case, the I-ES will represent the
   group of PWs to the WAN PEs and
   GWs. All the <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> procedures are still
   followed for the I-ES -- e.g., any MAC address learned from the WAN will be advertised to the
   DC with the I-ESI in the ESI field.</t>
          <t indent="0" pn="section-4.2.1-3">
   A MAC-VRF per EVI will be created in each GW. The MAC-VRF will have
   two different types of tunnel bindings instantiated in two different
   split-horizon groups:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.2.1-4">
            <li pn="section-4.2.1-4.1"> VPLS PWs will be instantiated in the WAN split-horizon group.</li>
            <li pn="section-4.2.1-4.2"> Overlay tunnel bindings (e.g., VXLAN, NVGRE) will be instantiated
	  in the DC split-horizon group.</li>
          </ul>
          <t indent="0" pn="section-4.2.1-5">
   Attachment circuits are also supported on the same MAC-VRF (although
   not shown in <xref target="fig-2" format="default" sectionFormat="of" derivedContent="Figure 2"/>), but they will not be part of any of the above
   split-horizon groups.</t>
          <t indent="0" pn="section-4.2.1-6">
   Traffic received in a given split-horizon group will never be
   forwarded to a member of the same split-horizon group.</t>
          <t indent="0" pn="section-4.2.1-7">
   As far as BUM flooding is concerned, a flooding list will be composed
   of the sublist created by the inclusive multicast routes and the
   sublist created for VPLS in the WAN. BUM frames received from a
   local Attachment Circuit (AC) will be forwarded to the flooding list.
   BUM frames received from the DC or the WAN will be forwarded to the
   flooding list, observing the split-horizon group rule described above.</t>
          <t indent="0" pn="section-4.2.1-8">
   Note that the GWs are not allowed to have an EVPN binding and a PW to
   the same far end within the same MAC-VRF, so that loops and packet
   duplication are avoided. In case a GW can successfully establish
   both an EVPN binding and a PW to the same far-end PE, the EVPN
   binding will prevail, and the PW will be brought down operationally.</t>
          <t indent="0" pn="section-4.2.1-9">
   The optimization procedures described in <xref target="sect-3.5" format="default" sectionFormat="of" derivedContent="Section 3.5"/> can
   also be applied to this model.</t>
        </section>
        <section anchor="sect-4.2.2" numbered="true" toc="include" removeInRFC="false" pn="section-4.2.2">
          <name slugifiedName="name-multihoming-procedures-on-t">Multihoming Procedures on the GWs</name>
          <t indent="0" pn="section-4.2.2-1">
   This model supports single-active multihoming on the GWs. All-active
   multihoming is not supported by VPLS; therefore, it cannot be used on
   the GWs.</t>
          <t indent="0" pn="section-4.2.2-2">
   In this case, for a given EVI, all the PWs in the WAN split-horizon group
   are assigned to I-ES. All the single-active multihoming procedures as
   described by <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/> will be followed for the I-ES.</t>
          <t indent="0" pn="section-4.2.2-3">
   The non-DF GW for the I-ES will block the transmission and reception
   of all the PWs in the WAN split-horizon group for BUM and unicast
   traffic.</t>
        </section>
      </section>
      <section anchor="sect-4.3" numbered="true" toc="include" removeInRFC="false" pn="section-4.3">
        <name slugifiedName="name-pbb-vpls-interconnect-for-e">PBB-VPLS Interconnect for EVPN-Overlay Networks</name>
        <section anchor="sect-4.3.1" numbered="true" toc="include" removeInRFC="false" pn="section-4.3.1">
          <name slugifiedName="name-control-data-plane-setup-pro">Control/Data Plane Setup Procedures on the GWs</name>
          <t indent="0" pn="section-4.3.1-1">
   In this case, there is no impact on the procedures described in
   <xref target="RFC7041" format="default" sectionFormat="of" derivedContent="RFC7041"/> for the B-component. However, the
   I-component instances
   become EVI instances with EVPN-Overlay bindings and potentially local
   attachment circuits. A number of MAC-VRF instances can be multiplexed
   into the same B-component instance. This option provides significant
   savings in terms of PWs to be maintained in the WAN.</t>
          <t indent="0" pn="section-4.3.1-2">
   The I-ESI concept described in <xref target="sect-4.2.1" format="default" sectionFormat="of" derivedContent="Section 4.2.1"/> will also be
   used for the PBB-VPLS-based interconnect.</t>
          <t indent="0" pn="section-4.3.1-3">
   B-component PWs and I-component EVPN-Overlay bindings established to
   the same far end will be compared. The following rules will be
   observed:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.3.1-4">
            <li pn="section-4.3.1-4.1"> Attempts to set up a PW between the two GWs within the B-component
	context will never be blocked.</li>
            <li pn="section-4.3.1-4.2"> If a PW exists between two GWs for the B-component and an attempt
	is made to set up an EVPN binding on an I-component linked to that
	B-component, the EVPN binding will be kept down operationally. Note
	that the BGP EVPN routes will still be valid but not used.</li>
            <li pn="section-4.3.1-4.3"> The EVPN binding will only be up and used as long as there is no
	PW to the same far end in the corresponding B-component. The EVPN
	bindings in the I-components will be brought down before the PW in the
	B-component is brought up.</li>
          </ul>
          <t indent="0" pn="section-4.3.1-5">
   The optimization procedures described in <xref target="sect-3.5" format="default" sectionFormat="of" derivedContent="Section 3.5"/> can also be
   applied to this interconnect option.</t>
        </section>
        <section anchor="sect-4.3.2" numbered="true" toc="include" removeInRFC="false" pn="section-4.3.2">
          <name slugifiedName="name-multihoming-procedures-on-th">Multihoming Procedures on the GWs</name>
          <t indent="0" pn="section-4.3.2-1">
   This model supports single-active multihoming on the GWs. All-active
   multihoming is not supported by this scenario.</t>
          <t indent="0" pn="section-4.3.2-2">
   The single-active multihoming procedures as described by <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/>
   will be followed for the I-ES for each EVI instance connected to the
   B-component. Note that in this case, for a given EVI, all the EVPN bindings
   in the I-component are assigned to the I-ES. The non-DF GW for the I-ES
   will block the transmission and reception of all the I-component EVPN
   bindings for BUM and unicast traffic. When learning MACs from the WAN, the
   non-DF <bcp14>MUST NOT</bcp14> advertise EVPN MAC/IP routes for those MACs.</t>
        </section>
      </section>
      <section anchor="sect-4.4" numbered="true" toc="include" removeInRFC="false" pn="section-4.4">
        <name slugifiedName="name-evpn-mpls-interconnect-for-">EVPN-MPLS Interconnect for EVPN-Overlay Networks</name>
        <t indent="0" pn="section-4.4-1">
   If EVPN for MPLS tunnels (referred to as "EVPN-MPLS" hereafter) are supported in the
   WAN, an end-to-end EVPN solution can be deployed. The following
   sections describe the proposed solution as well as its impact
   on the procedures from <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.</t>
        <section anchor="sect-4.4.1" numbered="true" toc="include" removeInRFC="false" pn="section-4.4.1">
          <name slugifiedName="name-control-plane-setup-procedu">Control plane Setup Procedures on the GWs</name>
          <t indent="0" pn="section-4.4.1-1">
   The GWs <bcp14>MUST</bcp14> establish separate BGP sessions for sending/receiving
   EVPN routes to/from the DC and to/from the WAN. Normally, each GW will
   set up one BGP EVPN session to the DC RR (or two BGP EVPN sessions if
   there are redundant DC RRs) and one session to the WAN RR (or two
   sessions if there are redundant WAN RRs).</t>
          <t indent="0" pn="section-4.4.1-2">
   In order to facilitate separate BGP processes for DC and WAN, EVPN
   routes sent to the WAN <bcp14>SHOULD</bcp14> carry a different Route Distinguisher
   (RD) than the EVPN routes sent to the DC. In addition, although
   reusing the same value is possible, different route targets are
   expected to be handled for the same EVI in the WAN and the DC. Note
   that the EVPN service routes sent to the DC RRs will normally include
   a <xref target="RFC9012" format="default" sectionFormat="of" derivedContent="RFC9012"/> BGP encapsulation extended community with a
   different tunnel type than the one sent to the WAN RRs.</t>
          <t indent="0" pn="section-4.4.1-3">
   As in the other discussed options, an I-ES and its assigned I-ESI
   will be configured on the GWs for multihoming. This I-ES represents
   the WAN EVPN-MPLS PEs to the DC but also the DC EVPN-Overlay NVEs to
   the WAN. Optionally, different I-ESI values are configured for
   representing the WAN and the DC. If different EVPN-Overlay networks
   are connected to the same group of GWs, each EVPN-Overlay network
   <bcp14>MUST</bcp14> get assigned a different I-ESI.</t>
          <t indent="0" pn="section-4.4.1-4">
   Received EVPN routes will never be reflected on the GWs but instead will be
   consumed and re‑advertised (if needed):</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.1-5">
            <li pn="section-4.4.1-5.1">Ethernet A-D routes, ES routes, and Inclusive Multicast routes are
	consumed by the GWs and processed locally for the corresponding <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> procedures.</li>
            <li pn="section-4.4.1-5.2">
              <t indent="0" pn="section-4.4.1-5.2.1">MAC/IP advertisement routes will be received and imported, and if they
        become active in the MAC-VRF, the information will be re-advertised as
        new routes with the following fields:

              </t>
              <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.1-5.2.2">
                <li pn="section-4.4.1-5.2.2.1">The RD will be the GW's RD for the MAC-VRF.</li>
                <li pn="section-4.4.1-5.2.2.2">The ESI will be set to the I-ESI.</li>
                <li pn="section-4.4.1-5.2.2.3">The Ethernet-tag value will be kept from the received NLRI the
	  received NLRI.</li>
                <li pn="section-4.4.1-5.2.2.4">The MAC length, MAC address, IP Length, and IP address values will
	  be kept from the received NLRI.</li>
                <li pn="section-4.4.1-5.2.2.5">The MPLS label will be a local 20-bit value (when sent to the
	  WAN) or a DC-global 24-bit value (when sent to the DC for
	  encapsulations using a VNI).</li>
                <li pn="section-4.4.1-5.2.2.6">The appropriate Route Targets (RTs) and <xref target="RFC9012" format="default" sectionFormat="of" derivedContent="RFC9012"/> BGP encapsulation extended
	  community will be used according to <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/>.</li>
              </ul>
            </li>
          </ul>
          <t indent="0" pn="section-4.4.1-6">
   The GWs will also generate the following local EVPN routes that will be
   sent to the DC and WAN, with their corresponding RTs and <xref target="RFC9012" format="default" sectionFormat="of" derivedContent="RFC9012"/> BGP encapsulation extended community values:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.1-7">
            <li pn="section-4.4.1-7.1">ES route(s) for the I-ESI(s).</li>
            <li pn="section-4.4.1-7.2">Ethernet A-D routes per ES and EVI for the I-ESI(s). The A-D
        per-EVI routes sent to the WAN and the DC will have consistent
        Ethernet-Tag values.</li>
            <li pn="section-4.4.1-7.3">Inclusive Multicast routes with independent tunnel-type value
        for the WAN and DC. For example, a P2MP Label Switched Path (LSP) may be used in the WAN,
        whereas ingress replication may be used in the DC. The routes
        sent to the WAN and the DC will have a consistent Ethernet-Tag.</li>
            <li pn="section-4.4.1-7.4">MAC/IP advertisement routes for MAC addresses learned in local
attachment circuits. Note that these routes will not include the
I-ESI value in the ESI field. These routes will include a zero ESI or a non-zero ESI for local multihomed
Ethernet Segments (ES). The routes sent to the WAN and the DC
        will have a consistent Ethernet-Tag.</li>
          </ul>
          <t indent="0" pn="section-4.4.1-8">
   Assuming GW1 and GW2 are peer GWs of the same DC, each GW will generate two
   sets of the above local service routes: set-DC will be sent to the DC RRs
   and will include an A-D per EVI, Inclusive Multicast, and MAC/IP routes for the
   DC encapsulation and RT. Set-WAN will be sent to the WAN RRs and will
   include the same routes but using the WAN RT and encapsulation. GW1 and GW2
   will receive each other's set-DC and set-WAN. This is the expected behavior
   on GW1 and GW2 for locally generated routes:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.1-9">
            <li pn="section-4.4.1-9.1">Inclusive multicast routes: When setting up the flooding lists for a
        given MAC-VRF, each GW will include its DC peer GW only in the
        EVPN-MPLS flooding list (by default) and not the EVPN-Overlay flooding
        list. That is, GW2 will import two Inclusive Multicast routes from GW1
        (from set-DC and set-WAN) but will only consider one of the two,
        giving the set-WAN route higher priority. An administrative option <bcp14>MAY</bcp14>
        change this preference so that the set-DC route is selected first.</li>
            <li pn="section-4.4.1-9.2">MAC/IP advertisement routes for local attachment circuits: As
        above, the GW will select only one, giving the route from the
        set-WAN a higher priority. As with the Inclusive multicast
        routes, an administrative option <bcp14>MAY</bcp14> change this priority.</li>
          </ul>
        </section>
        <section anchor="sect-4.4.2" numbered="true" toc="include" removeInRFC="false" pn="section-4.4.2">
          <name slugifiedName="name-data-plane-setup-procedures">Data Plane Setup Procedures on the GWs</name>
          <t indent="0" pn="section-4.4.2-1">
   The procedure explained at the end of the previous section will make sure
   there are no loops or packet duplication between the GWs of the same
   EVPN-Overlay network (for frames generated from local ACs), since only one
   EVPN binding per EVI (or per Ethernet Tag in the case of VLAN-aware bundle
   services) will be set up in the data plane between the two nodes. That
   binding will by default be added to the EVPN-MPLS flooding list.</t>
          <t indent="0" pn="section-4.4.2-2">
   As for the rest of the EVPN tunnel bindings, they will be added to one of
   the two flooding lists that each GW sets up for the same MAC-VRF:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.2-3">
            <li pn="section-4.4.2-3.1">EVPN-Overlay flooding list (composed of bindings to the remote NVEs
	or multicast tunnel to the NVEs).</li>
            <li pn="section-4.4.2-3.2">EVPN-MPLS flooding list (composed of MP2P or LSM tunnel to the
	remote PEs).</li>
          </ul>
          <t indent="0" pn="section-4.4.2-4">
   Each flooding list will be part of a separate split-horizon group:
   the WAN split-horizon group or the DC split-horizon group. Traffic
   generated from a local AC can be flooded to both
   split-horizon groups. Traffic from a binding of a split-horizon group
   can be flooded to the other split-horizon group and local ACs, but
   never to a member of its own split-horizon group.</t>
          <t indent="0" pn="section-4.4.2-5">
   When either GW1 or GW2 receives a BUM frame on an MPLS tunnel, including an
   ESI label at the bottom of the stack, they will perform an ESI label lookup
   and split-horizon filtering as per <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>, in case the ESI label
   identifies a local ESI (I-ESI or any other nonzero ESI).</t>
        </section>
        <section anchor="sect-4.4.3" numbered="true" toc="include" removeInRFC="false" pn="section-4.4.3">
          <name slugifiedName="name-multihoming-procedure-exten">Multihoming Procedure Extensions on the GWs</name>
          <t indent="0" pn="section-4.4.3-1">
   This model supports single-active as well as all-active multihoming.</t>
          <t indent="0" pn="section-4.4.3-2">
   All the <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> multihoming procedures
   for the DF election on I-ES(s), as
   well as the backup-path (single-active) and aliasing (all-active)
   procedures, will be followed on the GWs. Remote PEs in the EVPN-MPLS network
   will follow regular <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> aliasing or backup-path procedures for
   MAC/IP routes received from the GWs for the same I-ESI. So will NVEs in the
   EVPN-Overlay network for MAC/IP routes received with the same I-ESI.</t>
          <t indent="0" pn="section-4.4.3-3">
   As far as the forwarding plane is concerned, by default, the EVPN-Overlay
   network will have an analogous behavior to the access ACs in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>
   multihomed Ethernet Segments.</t>
          <t indent="0" pn="section-4.4.3-4">The forwarding behavior on the GWs is described below:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.3-5">
            <li pn="section-4.4.3-5.1">
              <t indent="0" pn="section-4.4.3-5.1.1">Single-active multihoming; assuming a WAN split-horizon group
        (comprised of EVPN-MPLS bindings), a DC split-horizon group
        (comprised of EVPN-Overlay bindings), and local ACs on the GWs: 

              </t>
              <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.3-5.1.2">
                <li pn="section-4.4.3-5.1.2.1">Forwarding behavior on the non-DF: The non-DF <bcp14>MUST</bcp14> block
           ingress and egress forwarding on the EVPN-Overlay bindings
           associated to the I-ES. The EVPN-MPLS network is considered to
           be the core network, and the EVPN-MPLS bindings to the remote
           PEs and GWs will be active.</li>
                <li pn="section-4.4.3-5.1.2.2">Forwarding behavior on the DF: The DF <bcp14>MUST NOT</bcp14> forward BUM or
	   unicast traffic received from a given split-horizon group to a
	   member of its own split-horizon group. Forwarding to other
	   split-horizon groups and local ACs is allowed (as long as the ACs
	   are not part of an ES for which the node is non-DF). As per <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> and for split-horizon purposes, when receiving
	   BUM traffic on the EVPN-Overlay bindings associated to an I-ES, the
	   DF GW <bcp14>SHOULD</bcp14> add the I-ESI label when forwarding to the peer GW
	   over EVPN-MPLS.</li>
                <li pn="section-4.4.3-5.1.2.3">When receiving EVPN MAC/IP routes from the WAN, the non-DF <bcp14>MUST NOT</bcp14> reoriginate the EVPN routes and advertise them to the DC
	   peers. In the same way, EVPN MAC/IP routes received from the DC
	   <bcp14>MUST NOT</bcp14> be advertised to the WAN peers. This is consistent with
	   <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> and allows the remote
	   PE/NVEs to know who the
	   primary GW is, based on the reception of the MAC/IP routes.</li>
              </ul>
            </li>
          </ul>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.3-6">
            <li pn="section-4.4.3-6.1">
              <t indent="0" pn="section-4.4.3-6.1.1">All-active multihoming; assuming a WAN split-horizon group
        (comprised of EVPN-MPLS bindings), a DC split-horizon group
        (comprised of EVPN-Overlay bindings), and local ACs on the GWs:

              </t>
              <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.3-6.1.2">
                <li pn="section-4.4.3-6.1.2.1">Forwarding behavior on the non-DF: The non-DF follows the same
           behavior as the non-DF in the single-active case, but only for BUM
           traffic. Unicast traffic received from a split-horizon group <bcp14>MUST NOT</bcp14> be forwarded to a member of its own split-horizon group but can
           be forwarded normally to the other split-horizon groups and local
           ACs. If a known unicast packet is identified as a "flooded" packet,
           the procedures for BUM traffic <bcp14>MUST</bcp14> be followed.</li>
                <li pn="section-4.4.3-6.1.2.2">Forwarding behavior on the DF: The DF follows the same behavior
	   as the DF in the single-active case, but only for BUM
	   traffic. Unicast traffic received from a split-horizon group <bcp14>MUST NOT</bcp14> be forwarded to a member of its own split-horizon group but can
	   be forwarded normally to the other split-horizon group and local
	   ACs. If a known unicast packet is identified as a "flooded" packet,
	   the procedures for BUM traffic <bcp14>MUST</bcp14> be followed. As per <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> and for split-horizon purposes, when receiving
	   BUM traffic on the EVPN-Overlay bindings associated to an I-ES, the
	   DF GW <bcp14>MUST</bcp14> add the I-ESI label when forwarding to the peer GW over
	   EVPN-MPLS.</li>
                <li pn="section-4.4.3-6.1.2.3">Contrary to the single-active multihoming case, both DF and
           non-DF reoriginate and advertise MAC/IP routes received from
           the WAN/DC peers, adding the corresponding I-ESI so that the
           remote PE/NVEs can perform regular aliasing, as per <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.</li>
              </ul>
            </li>
          </ul>
          <t indent="0" pn="section-4.4.3-7">
   The example in <xref target="fig-3" format="default" sectionFormat="of" derivedContent="Figure 3"/> illustrates the forwarding of BUM traffic
   originated from an NVE on a pair of all-active multihoming GWs.</t>
          <figure anchor="fig-3" align="left" suppress-title="false" pn="figure-3">
            <name slugifiedName="name-multihoming-bum-forwarding">Multihoming BUM Forwarding</name>
            <artwork name="" type="" align="left" alt="" pn="section-4.4.3-8.1">
     |&lt;--EVPN-Overlay---&gt;|&lt;--EVPN-MPLS--&gt;|

             +---------+ +--------------+
      +----+ BUM       +---+             |
      |NVE1+----+----&gt; |   +-+-----+     |
      +----+  | |   DF |GW1| |     |     |
              | |      +-+-+ |     |    ++--+
              | |        |   |     +--&gt; |PE1|
              | +---&gt;X +-+-+ |          ++--+
              |     NDF|   | |           |
      +----+  |        |GW2&lt;-+           |
      |NVE2+--+        +-+-+             |
      +----+  +--------+ |  +------------+
                         v
                       +--+
                       |CE|
                       +--+
</artwork>
          </figure>
          <t indent="0" pn="section-4.4.3-9">
   GW2 is the non-DF for the I-ES and blocks the BUM forwarding. GW1 is
   the DF and forwards the traffic to PE1 and GW2. Packets sent to GW2
   will include the ESI label for the I-ES. Based on the ESI label, GW2
   identifies the packets as I-ES-generated packets and will only
   forward them to local ACs (CE in the example) and not back to the
   EVPN-Overlay network.</t>
        </section>
        <section anchor="sect-4.4.4" numbered="true" toc="include" removeInRFC="false" pn="section-4.4.4">
          <name slugifiedName="name-impact-on-mac-mobility-proc">Impact on MAC Mobility Procedures</name>
          <t indent="0" pn="section-4.4.4-1">
   MAC Mobility procedures described in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> are not modified by
   this document.</t>
          <t indent="0" pn="section-4.4.4-2">
   Note that an intra-DC MAC move still leaves the MAC attached to the
   same I-ES, so under the rules of <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>,
   this is not considered a
   MAC Mobility event. Only when the MAC moves from the WAN domain to
   the DC domain (or from one DC to another) will the MAC be learned
   from a different ES, and the MAC Mobility procedures will kick in.</t>
          <t indent="0" pn="section-4.4.4-3">
   The sticky-bit indication in the MAC Mobility extended community <bcp14>MUST</bcp14>
   be propagated between domains.</t>
        </section>
        <section anchor="sect-4.4.5" numbered="true" toc="include" removeInRFC="false" pn="section-4.4.5">
          <name slugifiedName="name-gateway-optimizations-2">Gateway Optimizations</name>
          <t indent="0" pn="section-4.4.5-1">
   All the Gateway optimizations described in <xref target="sect-3.5" format="default" sectionFormat="of" derivedContent="Section 3.5"/>
            <bcp14>MAY</bcp14> be applied
   to the GWs when the interconnect is based on EVPN-MPLS.</t>
          <t indent="0" pn="section-4.4.5-2">
   In particular, the use of the Unknown MAC Route, as described in
   <xref target="sect-3.5.1" format="default" sectionFormat="of" derivedContent="Section 3.5.1"/>, solves some transient packet-duplication
   issues in
   cases of all-active multihoming, as explained below.</t>
          <t indent="0" pn="section-4.4.5-3">
   Consider the diagram in <xref target="fig-2" format="default" sectionFormat="of" derivedContent="Figure 2"/> for EVPN-MPLS interconnect and all-active
   multihoming, and the following sequence:</t>
          <ol spacing="normal" type="(%c)" indent="adaptive" start="1" pn="section-4.4.5-4">
            <li pn="section-4.4.5-4.1" derivedCounter="(a)">MAC Address M1 is advertised from NVE3 in EVI-1.</li>
            <li pn="section-4.4.5-4.2" derivedCounter="(b)">GW3 and GW4 learn M1 for EVI-1 and re-advertise M1 to the WAN
	  with I-ESI-2 in the ESI field.</li>
            <li pn="section-4.4.5-4.3" derivedCounter="(c)">GW1 and GW2 learn M1 and install GW3/GW4 as next hops following
	  the EVPN aliasing procedures.</li>
            <li pn="section-4.4.5-4.4" derivedCounter="(d)">Before NVE1 learns M1, a packet arrives at NVE1 with destination
	  M1. If the Unknown MAC Route had not been advertised into the DC,
	  NVE1 would have flooded the packet throughout the DC, in particular
	  to both GW1 and GW2. If the same VNI/VSID is used for both known
	  unicast and BUM traffic, as is typically the case, there is no
	  indication in the packet that it is a BUM packet, and both GW1 and
	  GW2 would have forwarded it, creating packet duplication. However,
	  because the Unknown MAC Route had been advertised into the DC, NVE1
	  will unicast the packet to either GW1 or GW2.</li>
            <li pn="section-4.4.5-4.5" derivedCounter="(e)">Since both GW1 and GW2 know M1, the GW receiving the packet will
	  forward it to either GW3 or GW4.</li>
          </ol>
        </section>
        <section anchor="sect-4.4.6" numbered="true" toc="include" removeInRFC="false" pn="section-4.4.6">
          <name slugifiedName="name-benefits-of-the-evpn-mpls-i">Benefits of the EVPN-MPLS Interconnect Solution</name>
          <t indent="0" pn="section-4.4.6-1">
   The "DCI using ASBRs" solution described in <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/> and the GW solution
   with EVPN-MPLS interconnect may be seen as similar, since they both
   retain the EVPN attributes between Data Centers and throughout the
   WAN. However, the EVPN-MPLS interconnect solution on the GWs has
   significant benefits compared to the "DCI using ASBRs" solution:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.4.6-2">
            <li pn="section-4.4.6-2.1">As in any of the described GW models, this solution supports the
	  connectivity of local attachment circuits on the GWs. This is not
	  possible in a "DCI using ASBRs" solution.</li>
            <li pn="section-4.4.6-2.2">Different data plane encapsulations can be supported in the DC
	  and the WAN, while a uniform encapsulation is needed in the "DCI
	  using ASBRs" solution.</li>
            <li pn="section-4.4.6-2.3">Optimized multicast solution, with independent inclusive
	  multicast trees in DC and WAN.</li>
            <li pn="section-4.4.6-2.4">MPLS label aggregation: For the case where MPLS labels are
	  signaled from the NVEs for MAC/IP advertisement routes, this
	  solution provides label aggregation. A remote PE <bcp14>MAY</bcp14> receive a
	  single label per GW MAC-VRF, as opposed to a label per NVE/MAC-VRF
	  connected to the GW MAC-VRF. For instance, in <xref target="fig-2" format="default" sectionFormat="of" derivedContent="Figure 2"/>, PE would
	  receive only one label for all the routes advertised for a given
	  MAC-VRF from GW1, as opposed to a label per NVE/MAC-VRF.</li>
            <li pn="section-4.4.6-2.5">The GW will not propagate MAC Mobility for the MACs moving within
	  a DC. Mobility intra-DC is solved by all the NVEs in the DC. The MAC
	  Mobility procedures on the GWs are only required in case of mobility
	  across DCs.</li>
            <li pn="section-4.4.6-2.6">Proxy-ARP/ND function on the DC GWs can be leveraged to reduce
	  ARP/ND flooding in the DC or/and the WAN.</li>
          </ul>
        </section>
      </section>
      <section anchor="sect-4.5" numbered="true" toc="include" removeInRFC="false" pn="section-4.5">
        <name slugifiedName="name-pbb-evpn-interconnect-for-e">PBB-EVPN Interconnect for EVPN-Overlay Networks</name>
        <t indent="0" pn="section-4.5-1">
   PBB-EVPN <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/> is yet another interconnect option. It requires
   the use of GWs where I-components and associated B-components are
   part of EVI instances.</t>
        <section anchor="sect-4.5.1" numbered="true" toc="include" removeInRFC="false" pn="section-4.5.1">
          <name slugifiedName="name-control-data-plane-setup-proc">Control/Data Plane Setup Procedures on the GWs</name>
          <t indent="0" pn="section-4.5.1-1">
   EVPN will run independently in both components, the I-component MAC-VRF and
   B-component MAC-VRF. Compared to <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/>,
   the DC customer MACs (C-MACs) are no longer
   learned in the data plane on the GW but in the control plane through EVPN
   running on the I-component. Remote C-MACs coming from remote PEs are still
   learned in the data plane. B-MACs in the B‑component will be assigned and
   advertised following the procedures described in <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/>.</t>
          <t indent="0" pn="section-4.5.1-2">
   An I-ES will be configured on the GWs for multihoming, but its I-ESI will
   only be used in the EVPN control plane for the I-component EVI.  No
   unreserved ESIs will be used in the control plane of the B-component EVI,
   as per <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/>. That is, the I-ES will be
   represented to the WAN PBB-EVPN
   PEs using shared or dedicated B-MACs.</t>
          <t indent="0" pn="section-4.5.1-3">
   The rest of the control plane procedures will follow <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> for
   the I-component EVI and <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/> for the B-component EVI.</t>
          <t indent="0" pn="section-4.5.1-4">
   From the data plane perspective, the I-component and B-component EVPN
   bindings established to the same far end will be compared, and the
   I-component EVPN-Overlay binding will be kept down following the rules
   described in <xref target="sect-4.3.1" format="default" sectionFormat="of" derivedContent="Section 4.3.1"/>.</t>
        </section>
        <section anchor="sect-4.5.2" numbered="true" toc="include" removeInRFC="false" pn="section-4.5.2">
          <name slugifiedName="name-multihoming-procedures-on-the">Multihoming Procedures on the GWs</name>
          <t indent="0" pn="section-4.5.2-1">
   This model supports single-active as well as all-active multihoming.</t>
          <t indent="0" pn="section-4.5.2-2">
   The forwarding behavior of the DF and non-DF will be changed based on
   the description outlined in <xref target="sect-4.4.3" format="default" sectionFormat="of" derivedContent="Section 4.4.3"/>, substituting the
   WAN split-horizon group for the B-component, and using <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/>
   procedures for the traffic sent or received on the B-component.</t>
        </section>
        <section anchor="sect-4.5.3" numbered="true" toc="include" removeInRFC="false" pn="section-4.5.3">
          <name slugifiedName="name-impact-on-mac-mobility-proce">Impact on MAC Mobility Procedures</name>
          <t indent="0" pn="section-4.5.3-1">
   C-MACs learned from the B-component will be advertised in EVPN within
   the I-component EVI scope. If the C-MAC was previously known in the
   I-component database, EVPN would advertise the C-MAC with a higher
   sequence number, as per <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>. From the
   perspective of Mobility and the related procedures described in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>, the C-MACs learned
   from the B-component are considered local.</t>
        </section>
        <section anchor="sect-4.5.4" numbered="true" toc="include" removeInRFC="false" pn="section-4.5.4">
          <name slugifiedName="name-gateway-optimizations-3">Gateway Optimizations</name>
          <t indent="0" pn="section-4.5.4-1">
   All the considerations explained in <xref target="sect-4.4.5" format="default" sectionFormat="of" derivedContent="Section 4.4.5"/> are
   applicable to
   the PBB-EVPN interconnect option.</t>
        </section>
      </section>
      <section anchor="sect-4.6" numbered="true" toc="include" removeInRFC="false" pn="section-4.6">
        <name slugifiedName="name-evpn-vxlan-interconnect-for">EVPN-VXLAN Interconnect for EVPN-Overlay Networks</name>
        <t indent="0" pn="section-4.6-1">
   If EVPN for Overlay tunnels is supported in the WAN, and a GW function
   is required, an end-to-end EVPN solution can be deployed. While
   multiple Overlay tunnel combinations at the WAN and the DC are
   possible (MPLSoGRE, NVGRE, etc.), VXLAN is described here, given its
   popularity in the industry. This section focuses on the specific case
   of EVPN for VXLAN (EVPN-VXLAN hereafter) and the impact on the
   <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> procedures.</t>
        <t indent="0" pn="section-4.6-2">
   The procedures described in <xref target="sect-4.4" format="default" sectionFormat="of" derivedContent="Section 4.4"/> apply to this section, too, only
   substituting EVPN-MPLS for EVPN-VXLAN control plane specifics and using
   <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/> "Local Bias" procedures instead
   of <xref target="sect-4.4.3" format="default" sectionFormat="of" derivedContent="Section 4.4.3"/>. Since
   there are no ESI labels in VXLAN, GWs need to rely on "Local Bias" to apply
   split horizon on packets generated from the I-ES and sent to the peer GW.</t>
        <t indent="0" pn="section-4.6-3">
   This use case assumes that NVEs need to use the VNIs or VSIDs as
   globally unique identifiers within a Data Center, and a Gateway needs
   to be employed at the edge of the Data-Center network to translate
   the VNI or VSID when crossing the network boundaries. This GW
   function provides VNI and tunnel-IP-address translation. The use case
   in which local downstream-assigned VNIs or VSIDs can be used (like
   MPLS labels) is described by <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/>.</t>
        <t indent="0" pn="section-4.6-4">
   While VNIs are globally significant within each DC, there are two
   possibilities in the interconnect network:</t>
        <ol spacing="normal" indent="adaptive" start="1" type="1" pn="section-4.6-5">
          <li pn="section-4.6-5.1" derivedCounter="1.">Globally unique VNIs in the interconnect network. In this case,
	  the GWs and PEs in the interconnect network will agree on a common
	  VNI for a given EVI. The RT to be used in the interconnect network
	  can be autoderived from the agreed-upon interconnect VNI. The VNI used
	  inside each DC <bcp14>MAY</bcp14> be the same as the interconnect VNI.</li>
          <li pn="section-4.6-5.2" derivedCounter="2.">Downstream-assigned VNIs in the interconnect network. In this
	  case, the GWs and PEs <bcp14>MUST</bcp14> use the proper RTs to import/export the EVPN routes. Note that even if the VNI is downstream assigned in the
	  interconnect network, and unlike option (a), it only identifies the
	  &lt;Ethernet Tag, GW&gt; pair and not the &lt;Ethernet Tag, egress
	  PE&gt; pair. The VNI used inside each DC <bcp14>MAY</bcp14> be the same as the
	  interconnect VNI. GWs <bcp14>SHOULD</bcp14> support multiple VNI spaces per EVI
	  (one per interconnect network they are connected to).
	</li>
        </ol>
        <t indent="0" pn="section-4.6-6">
   In both options, NVEs inside a DC only have to be aware of a single
   VNI space, and only GWs will handle the complexity of managing
   multiple VNI spaces. In addition to VNI translation above, the GWs
   will provide translation of the tunnel source IP for the packets
   generated from the NVEs, using their own IP address. GWs will use
   that IP address as the BGP next hop in all the EVPN updates to the
   interconnect network.</t>
        <t indent="0" pn="section-4.6-7">
   The following sections provide more details about these two options.</t>
        <section anchor="sect-4.6.1" numbered="true" toc="include" removeInRFC="false" pn="section-4.6.1">
          <name slugifiedName="name-globally-unique-vnis-in-the">Globally Unique VNIs in the Interconnect Network</name>
          <t indent="0" pn="section-4.6.1-1">
   Considering <xref target="fig-2" format="default" sectionFormat="of" derivedContent="Figure 2"/>, if a host H1 in NVO-1 needs to communicate with a
   host H2 in NVO-2, and assuming that different VNIs are used in each DC for
   the same EVI (e.g., VNI-10 in NVO-1 and VNI-20 in NVO-2), then the VNIs
   <bcp14>MUST</bcp14>
   be translated to a common interconnect VNI (e.g., VNI-100) on the GWs. Each
   GW is provisioned with a VNI translation mapping so that it can translate
   the VNI in the control plane when sending BGP EVPN route updates to the
   interconnect network. In other words, GW1 and GW2 <bcp14>MUST</bcp14> be configured to map
   VNI-10 to VNI-100 in the BGP update messages for H1's MAC route.

   This
   mapping is also used to translate the VNI in the data plane in both
   directions: that is, VNI-10 to VNI-100 when the packet is received from
   NVO-1 and the reverse mapping from VNI-100 to VNI-10 when the packet is
   received from the remote NVO-2 network and needs to be forwarded to NVO-1.</t>
          <t indent="0" pn="section-4.6.1-2">
   The procedures described in <xref target="sect-4.4" format="default" sectionFormat="of" derivedContent="Section 4.4"/> will be followed,
   considering
   that the VNIs advertised/received by the GWs will be translated
   accordingly.</t>
        </section>
        <section anchor="sect-4.6.2" numbered="true" toc="include" removeInRFC="false" pn="section-4.6.2">
          <name slugifiedName="name-downstream-assigned-vnis-in">Downstream-Assigned VNIs in the Interconnect Network</name>
          <t indent="0" pn="section-4.6.2-1">
   In this case, if a host H1 in NVO-1 needs to communicate with a host
   H2 in NVO-2, and assuming that different VNIs are used in each DC for
   the same EVI, e.g., VNI-10 in NVO-1 and VNI-20 in NVO-2, then the VNIs
   <bcp14>MUST</bcp14> be translated as in <xref target="sect-4.6.1" format="default" sectionFormat="of" derivedContent="Section 4.6.1"/>. However, in this case, there
   is no need to translate to a common interconnect VNI on the GWs. Each
   GW can translate the VNI received in an EVPN update to a locally
   assigned VNI advertised to the interconnect network. Each GW can use
   a different interconnect VNI; hence, this VNI does not need to be
   agreed upon on all the GWs and PEs of the interconnect network.</t>
          <t indent="0" pn="section-4.6.2-2">
   The procedures described in <xref target="sect-4.4" format="default" sectionFormat="of" derivedContent="Section 4.4"/> will be followed,
   taking into account the considerations above for the VNI translation.</t>
        </section>
      </section>
    </section>
    <section anchor="sect-5" numbered="true" toc="include" removeInRFC="false" pn="section-5">
      <name slugifiedName="name-security-considerations">Security Considerations</name>
      <t indent="0" pn="section-5-1">
   This document applies existing specifications to a number of
   interconnect models. The security considerations included in those
   documents, such as <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>, <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/>, <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/>, <xref target="RFC4761" format="default" sectionFormat="of" derivedContent="RFC4761"/>,
   and <xref target="RFC4762" format="default" sectionFormat="of" derivedContent="RFC4762"/> apply to this document
   whenever those technologies are
   used.</t>
      <t indent="0" pn="section-5-2">
   As discussed, <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/> discusses two main DCI solution groups:
   "DCI using GWs" and "DCI using ASBRs". This document specifies the
   solutions that correspond to the "DCI using GWs" group. It is
   important to note that the use of GWs provides a superior level of
   security on a per-tenant basis, compared to the use of ASBRs. This is
   due to the fact that GWs need to perform a MAC lookup on the frames
   being received from the WAN, and they apply security procedures, such
   as filtering of undesired frames, filtering of frames with a source
   MAC that matches a protected MAC in the DC, or application of
   MAC-duplication procedures defined in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>. On ASBRs, though, traffic
   is forwarded based on a label or VNI swap, and there is usually no
   visibility of the encapsulated frames, which can carry malicious
   traffic.</t>
      <t indent="0" pn="section-5-3">
   In addition, the GW optimizations specified in this document provide
   additional protection of the DC tenant systems. For instance, the
   MAC-address advertisement control and Unknown MAC Route defined in
   <xref target="sect-3.5.1" format="default" sectionFormat="of" derivedContent="Section 3.5.1"/> protect the DC NVEs from being overwhelmed with an
   excessive number of MAC/IP routes being learned on the GWs from the WAN.
   The ARP/ND flooding control described in <xref target="sect-3.5.2" format="default" sectionFormat="of" derivedContent="Section 3.5.2"/> can reduce/suppress
   broadcast storms being injected from the WAN.</t>
      <t indent="0" pn="section-5-4">
   Finally, the reader should be aware of the potential security
   implications of designing a DCI with the decoupled interconnect
   solution (<xref target="sect-3" format="default" sectionFormat="of" derivedContent="Section 3"/>) or the integrated interconnect solution
   (<xref target="sect-4" format="default" sectionFormat="of" derivedContent="Section 4"/>). In the decoupled interconnect solution, the DC is typically easier
   to protect from the WAN, since each GW has a single logical link to
   one WAN PE, whereas in the Integrated solution, the GW has logical
   links to all the WAN PEs that are attached to the tenant. In either
   model, proper control plane and data plane policies should be put in
   place in the GWs in order to protect the DC from potential attacks
   coming from the WAN.</t>
    </section>
    <section anchor="sect-6" numbered="true" toc="include" removeInRFC="false" pn="section-6">
      <name slugifiedName="name-iana-considerations">IANA Considerations</name>
      <t indent="0" pn="section-6-1">
   This document has no IANA actions.</t>
    </section>
  </middle>
  <back>
    <displayreference target="I-D.ietf-bess-evpn-virtual-eth-segment" to="VIRTUAL-ES"/>
    <references pn="section-7">
      <name slugifiedName="name-references">References</name>
      <references pn="section-7.1">
        <name slugifiedName="name-normative-references">Normative References</name>
        <reference anchor="RFC2119" target="https://www.rfc-editor.org/info/rfc2119" quoteTitle="true" derivedAnchor="RFC2119">
          <front>
            <title>Key words for use in RFCs to Indicate Requirement Levels</title>
            <author initials="S." surname="Bradner" fullname="S. Bradner">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="1997" month="March"/>
            <abstract>
              <t indent="0">In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="2119"/>
          <seriesInfo name="DOI" value="10.17487/RFC2119"/>
        </reference>
        <reference anchor="RFC4761" target="https://www.rfc-editor.org/info/rfc4761" quoteTitle="true" derivedAnchor="RFC4761">
          <front>
            <title>Virtual Private LAN Service (VPLS) Using BGP for Auto-Discovery and Signaling</title>
            <author initials="K." surname="Kompella" fullname="K. Kompella" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="Y." surname="Rekhter" fullname="Y. Rekhter" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2007" month="January"/>
            <abstract>
              <t indent="0">Virtual Private LAN Service (VPLS), also known as Transparent LAN Service and Virtual Private Switched Network service, is a useful Service Provider offering.  The service offers a Layer 2 Virtual Private Network (VPN); however, in the case of VPLS, the customers in the VPN are connected by a multipoint Ethernet LAN, in contrast to the usual Layer 2 VPNs, which are point-to-point in nature.</t>
              <t indent="0">This document describes the functions required to offer VPLS, a mechanism for signaling a VPLS, and rules for forwarding VPLS frames across a packet switched network.  [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="4761"/>
          <seriesInfo name="DOI" value="10.17487/RFC4761"/>
        </reference>
        <reference anchor="RFC4762" target="https://www.rfc-editor.org/info/rfc4762" quoteTitle="true" derivedAnchor="RFC4762">
          <front>
            <title>Virtual Private LAN Service (VPLS) Using Label Distribution Protocol (LDP) Signaling</title>
            <author initials="M." surname="Lasserre" fullname="M. Lasserre" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="V." surname="Kompella" fullname="V. Kompella" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2007" month="January"/>
            <abstract>
              <t indent="0">This document describes a Virtual Private LAN Service (VPLS) solution using pseudowires, a service previously implemented over other tunneling technologies and known as Transparent LAN Services (TLS).  A VPLS creates an emulated LAN segment for a given set of users; i.e., it creates a Layer 2 broadcast domain that is fully capable of learning and forwarding on Ethernet MAC addresses and that is closed to a given set of users.  Multiple VPLS services can be supported from a single Provider Edge (PE) node.</t>
              <t indent="0">This document describes the control plane functions of signaling pseudowire labels using Label Distribution Protocol (LDP), extending RFC 4447.  It is agnostic to discovery protocols.  The data plane functions of forwarding are also described, focusing in particular on the learning of MAC addresses.  The encapsulation of VPLS packets is described by RFC 4448.  [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="4762"/>
          <seriesInfo name="DOI" value="10.17487/RFC4762"/>
        </reference>
        <reference anchor="RFC6074" target="https://www.rfc-editor.org/info/rfc6074" quoteTitle="true" derivedAnchor="RFC6074">
          <front>
            <title>Provisioning, Auto-Discovery, and Signaling in Layer 2 Virtual Private Networks (L2VPNs)</title>
            <author initials="E." surname="Rosen" fullname="E. Rosen">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="B." surname="Davie" fullname="B. Davie">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="V." surname="Radoaca" fullname="V. Radoaca">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="W." surname="Luo" fullname="W. Luo">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2011" month="January"/>
            <abstract>
              <t indent="0">Provider Provisioned Layer 2 Virtual Private Networks (L2VPNs) may have different "provisioning models", i.e., models for what information needs to be configured in what entities.  Once configured, the provisioning information is distributed by a "discovery process".  When the discovery process is complete, a signaling protocol is automatically invoked to set up the mesh of pseudowires (PWs) that form the (virtual) backbone of the L2VPN. This document specifies a number of L2VPN provisioning models, and further specifies the semantic structure of the endpoint identifiers required by each model.  It discusses the distribution of these identifiers by the discovery process, especially when discovery is based on the Border Gateway Protocol (BGP).  It then specifies how the endpoint identifiers are carried in the two signaling protocols that are used to set up PWs, the Label Distribution Protocol (LDP), and the Layer 2 Tunneling Protocol version 3 (L2TPv3).  [STANDARDS- TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6074"/>
          <seriesInfo name="DOI" value="10.17487/RFC6074"/>
        </reference>
        <reference anchor="RFC7041" target="https://www.rfc-editor.org/info/rfc7041" quoteTitle="true" derivedAnchor="RFC7041">
          <front>
            <title>Extensions to the Virtual Private LAN Service (VPLS) Provider Edge (PE) Model for Provider Backbone Bridging</title>
            <author initials="F." surname="Balus" fullname="F. Balus" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="A." surname="Sajassi" fullname="A. Sajassi" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="N." surname="Bitar" fullname="N. Bitar" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2013" month="November"/>
            <abstract>
              <t indent="0">The IEEE 802.1 Provider Backbone Bridges (PBBs) specification defines an architecture and bridge protocols for interconnection of multiple Provider Bridged Networks (PBNs).  Provider backbone bridging was defined by IEEE as a connectionless technology based on multipoint VLAN tunnels.  PBB can be used to attain better scalability than Provider Bridges (PBs) in terms of the number of customer Media Access Control addresses and the number of service instances that can be supported.</t>
              <t indent="0">The Virtual Private LAN Service (VPLS) provides a framework for extending Ethernet LAN services, using MPLS tunneling capabilities, through a routed MPLS backbone without running the Rapid Spanning Tree Protocol (RSTP) or the Multiple Spanning Tree Protocol (MSTP) across the backbone.  As a result, VPLS has been deployed on a large scale in service provider networks.</t>
              <t indent="0">This document discusses extensions to the VPLS Provider Edge (PE) model required to incorporate desirable PBB components while maintaining the service provider fit of the initial model.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7041"/>
          <seriesInfo name="DOI" value="10.17487/RFC7041"/>
        </reference>
        <reference anchor="RFC7432" target="https://www.rfc-editor.org/info/rfc7432" quoteTitle="true" derivedAnchor="RFC7432">
          <front>
            <title>BGP MPLS-Based Ethernet VPN</title>
            <author initials="A." surname="Sajassi" fullname="A. Sajassi" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Aggarwal" fullname="R. Aggarwal">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="N." surname="Bitar" fullname="N. Bitar">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="A." surname="Isaac" fullname="A. Isaac">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Uttaro" fullname="J. Uttaro">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Drake" fullname="J. Drake">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="W." surname="Henderickx" fullname="W. Henderickx">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2015" month="February"/>
            <abstract>
              <t indent="0">This document describes procedures for BGP MPLS-based Ethernet VPNs (EVPN).  The procedures described here meet the requirements specified in RFC 7209 -- "Requirements for Ethernet VPN (EVPN)".</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7432"/>
          <seriesInfo name="DOI" value="10.17487/RFC7432"/>
        </reference>
        <reference anchor="RFC7543" target="https://www.rfc-editor.org/info/rfc7543" quoteTitle="true" derivedAnchor="RFC7543">
          <front>
            <title>Covering Prefixes Outbound Route Filter for BGP-4</title>
            <author initials="H." surname="Jeng" fullname="H. Jeng">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="L." surname="Jalil" fullname="L. Jalil">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Bonica" fullname="R. Bonica">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="K." surname="Patel" fullname="K. Patel">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="L." surname="Yong" fullname="L. Yong">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2015" month="May"/>
            <abstract>
              <t indent="0">This document defines a new Outbound Route Filter (ORF) type, called the Covering Prefixes ORF (CP-ORF).  CP-ORF is applicable in Virtual Hub-and-Spoke VPNs.  It also is applicable in BGP/MPLS Ethernet VPN (EVPN) networks.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7543"/>
          <seriesInfo name="DOI" value="10.17487/RFC7543"/>
        </reference>
        <reference anchor="RFC7623" target="https://www.rfc-editor.org/info/rfc7623" quoteTitle="true" derivedAnchor="RFC7623">
          <front>
            <title>Provider Backbone Bridging Combined with Ethernet VPN (PBB-EVPN)</title>
            <author initials="A." surname="Sajassi" fullname="A. Sajassi" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="S." surname="Salam" fullname="S. Salam">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="N." surname="Bitar" fullname="N. Bitar">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="A." surname="Isaac" fullname="A. Isaac">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="W." surname="Henderickx" fullname="W. Henderickx">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2015" month="September"/>
            <abstract>
              <t indent="0">This document discusses how Ethernet Provider Backbone Bridging (PBB) can be combined with Ethernet VPN (EVPN) in order to reduce the number of BGP MAC Advertisement routes by aggregating Customer/Client MAC (C-MAC) addresses via Provider Backbone MAC (B-MAC) address, provide client MAC address mobility using C-MAC aggregation, confine the scope of C-MAC learning to only active flows, offer per-site policies, and avoid C-MAC address flushing on topology changes.  The combined solution is referred to as PBB-EVPN.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7623"/>
          <seriesInfo name="DOI" value="10.17487/RFC7623"/>
        </reference>
        <reference anchor="RFC8174" target="https://www.rfc-editor.org/info/rfc8174" quoteTitle="true" derivedAnchor="RFC8174">
          <front>
            <title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
            <author initials="B." surname="Leiba" fullname="B. Leiba">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2017" month="May"/>
            <abstract>
              <t indent="0">RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="8174"/>
          <seriesInfo name="DOI" value="10.17487/RFC8174"/>
        </reference>
        <reference anchor="RFC8365" target="https://www.rfc-editor.org/info/rfc8365" quoteTitle="true" derivedAnchor="RFC8365">
          <front>
            <title>A Network Virtualization Overlay Solution Using Ethernet VPN (EVPN)</title>
            <author initials="A." surname="Sajassi" fullname="A. Sajassi" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Drake" fullname="J. Drake" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="N." surname="Bitar" fullname="N. Bitar">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Shekhar" fullname="R. Shekhar">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Uttaro" fullname="J. Uttaro">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="W." surname="Henderickx" fullname="W. Henderickx">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2018" month="March"/>
            <abstract>
              <t indent="0">This document specifies how Ethernet VPN (EVPN) can be used as a Network Virtualization Overlay (NVO) solution and explores the various tunnel encapsulation options over IP and their impact on the EVPN control plane and procedures.  In particular, the following encapsulation options are analyzed: Virtual Extensible LAN (VXLAN), Network Virtualization using Generic Routing Encapsulation (NVGRE), and MPLS over GRE.  This specification is also applicable to Generic Network Virtualization Encapsulation (GENEVE); however, some incremental work is required, which will be covered in a separate document.  This document also specifies new multihoming procedures for split-horizon filtering and mass withdrawal.  It also specifies EVPN route constructions for VXLAN/NVGRE encapsulations and Autonomous System Border Router (ASBR) procedures for multihoming of Network Virtualization Edge (NVE) devices.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8365"/>
          <seriesInfo name="DOI" value="10.17487/RFC8365"/>
        </reference>
        <reference anchor="RFC9012" target="https://www.rfc-editor.org/info/rfc9012" quoteTitle="true" derivedAnchor="RFC9012">
          <front>
            <title>The BGP Tunnel Encapsulation Attribute</title>
            <author initials="K." surname="Patel" fullname="K. Patel">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="G." surname="Van de Velde" fullname="G. Van de Velde">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="S." surname="Sangli" fullname="S. Sangli">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Scudder" fullname="J. Scudder">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2021" month="April"/>
            <abstract>
              <t indent="0">This document defines a BGP path attribute known as the "Tunnel Encapsulation attribute", which can be used with BGP UPDATEs of various Subsequent Address Family Identifiers (SAFIs) to provide information needed to create tunnels and their corresponding encapsulation headers. It provides encodings for a number of tunnel types, along with procedures for choosing between alternate tunnels and routing packets into tunnels.</t>
              <t indent="0">This document obsoletes RFC 5512, which provided an earlier definition of the Tunnel Encapsulation attribute. RFC 5512 was never deployed in production. Since RFC 5566 relies on RFC 5512, it is likewise obsoleted. This document updates RFC 5640 by indicating that the Load-Balancing Block sub-TLV may be included in any Tunnel Encapsulation attribute where load balancing is desired.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="9012"/>
          <seriesInfo name="DOI" value="10.17487/RFC9012"/>
        </reference>
      </references>
      <references pn="section-7.2">
        <name slugifiedName="name-informative-references">Informative References</name>
        <reference anchor="IEEE.802.1AG" quoteTitle="true" derivedAnchor="IEEE.802.1AG">
          <front>
            <title>IEEE Standard for Local and Metropolitan Area Networks Virtual Bridged Local Area Networks Amendment 5: Connectivity Fault Management</title>
            <author>
              <organization showOnFrontPage="true">IEEE</organization>
            </author>
            <date month="January" year="2008"/>
          </front>
          <seriesInfo name="IEEE standard" value="802.1ag-2007"/>
        </reference>
        <reference anchor="IEEE.802.1Q" quoteTitle="true" target="https://doi.org/10.1109/IEEESTD.2014.6991462" derivedAnchor="IEEE.802.1Q">
          <front>
            <title>IEEE Standard for Local and metropolitan area networks--Bridges and Bridged Networks</title>
            <author>
              <organization showOnFrontPage="true">IEEE</organization>
            </author>
            <date month="December" year="2014"/>
          </front>
          <seriesInfo name="IEEE standard" value="802.1Q-2014"/>
          <seriesInfo name="DOI" value="10.1109/IEEESTD.2014.6991462"/>
        </reference>
        <reference anchor="RFC3031" target="https://www.rfc-editor.org/info/rfc3031" quoteTitle="true" derivedAnchor="RFC3031">
          <front>
            <title>Multiprotocol Label Switching Architecture</title>
            <author initials="E." surname="Rosen" fullname="E. Rosen">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="A." surname="Viswanathan" fullname="A. Viswanathan">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Callon" fullname="R. Callon">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2001" month="January"/>
            <abstract>
              <t indent="0">This document specifies the architecture for Multiprotocol Label Switching (MPLS).  [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="3031"/>
          <seriesInfo name="DOI" value="10.17487/RFC3031"/>
        </reference>
        <reference anchor="RFC4023" target="https://www.rfc-editor.org/info/rfc4023" quoteTitle="true" derivedAnchor="RFC4023">
          <front>
            <title>Encapsulating MPLS in IP or Generic Routing Encapsulation (GRE)</title>
            <author initials="T." surname="Worster" fullname="T. Worster">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="Y." surname="Rekhter" fullname="Y. Rekhter">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="E." surname="Rosen" fullname="E. Rosen" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2005" month="March"/>
            <abstract>
              <t indent="0">Various applications of MPLS make use of label stacks with multiple entries.  In some cases, it is possible to replace the top label of the stack with an IP-based encapsulation, thereby enabling the application to run over networks that do not have MPLS enabled in their core routers.  This document specifies two IP-based encapsulations: MPLS-in-IP and MPLS-in-GRE (Generic Routing Encapsulation).  Each of these is applicable in some circumstances. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="4023"/>
          <seriesInfo name="DOI" value="10.17487/RFC4023"/>
        </reference>
        <reference anchor="RFC4684" target="https://www.rfc-editor.org/info/rfc4684" quoteTitle="true" derivedAnchor="RFC4684">
          <front>
            <title>Constrained Route Distribution for Border Gateway Protocol/MultiProtocol Label Switching (BGP/MPLS) Internet Protocol (IP) Virtual Private Networks (VPNs)</title>
            <author initials="P." surname="Marques" fullname="P. Marques">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Bonica" fullname="R. Bonica">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="L." surname="Fang" fullname="L. Fang">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="L." surname="Martini" fullname="L. Martini">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Raszuk" fullname="R. Raszuk">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="K." surname="Patel" fullname="K. Patel">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Guichard" fullname="J. Guichard">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2006" month="November"/>
            <abstract>
              <t indent="0">This document defines Multi-Protocol BGP (MP-BGP) procedures that allow BGP speakers to exchange Route Target reachability information.  This information can be used to build a route distribution graph in order to limit the propagation of Virtual Private Network (VPN) Network Layer Reachability Information (NLRI) between different autonomous systems or distinct clusters of the same autonomous system.  This document updates RFC 4364.  [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="4684"/>
          <seriesInfo name="DOI" value="10.17487/RFC4684"/>
        </reference>
        <reference anchor="RFC6870" target="https://www.rfc-editor.org/info/rfc6870" quoteTitle="true" derivedAnchor="RFC6870">
          <front>
            <title>Pseudowire Preferential Forwarding Status Bit</title>
            <author initials="P." surname="Muley" fullname="P. Muley" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="M." surname="Aissaoui" fullname="M. Aissaoui" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2013" month="February"/>
            <abstract>
              <t indent="0">This document describes a mechanism for signaling the active and standby status of redundant Pseudowires (PWs) between their termination points.  A set of Redundant PWs is configured between Provider Edge (PE) nodes in single-segment pseudowire (SS-PW) applications or between Terminating Provider Edge (T-PE) nodes in Multi-Segment Pseudowire (MS-PW) applications.</t>
              <t indent="0">In order for the PE/T-PE nodes to indicate the preferred PW to use for forwarding PW packets to one another, a new status bit is defined.  This bit indicates a Preferential Forwarding status with a value of active or standby for each PW in a redundant set.</t>
              <t indent="0">In addition, a second status bit is defined to allow peer PE nodes to coordinate a switchover operation of the PW.</t>
              <t indent="0">Finally, this document updates RFC 4447 by adding details to the handling of the PW status code bits in the PW Status TLV.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6870"/>
          <seriesInfo name="DOI" value="10.17487/RFC6870"/>
        </reference>
        <reference anchor="RFC7348" target="https://www.rfc-editor.org/info/rfc7348" quoteTitle="true" derivedAnchor="RFC7348">
          <front>
            <title>Virtual eXtensible Local Area Network (VXLAN): A Framework for Overlaying Virtualized Layer 2 Networks over Layer 3 Networks</title>
            <author initials="M." surname="Mahalingam" fullname="M. Mahalingam">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="D." surname="Dutt" fullname="D. Dutt">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="K." surname="Duda" fullname="K. Duda">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="P." surname="Agarwal" fullname="P. Agarwal">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="L." surname="Kreeger" fullname="L. Kreeger">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="T." surname="Sridhar" fullname="T. Sridhar">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="M." surname="Bursell" fullname="M. Bursell">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="C." surname="Wright" fullname="C. Wright">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2014" month="August"/>
            <abstract>
              <t indent="0">This document describes Virtual eXtensible Local Area Network (VXLAN), which is used to address the need for overlay networks within virtualized data centers accommodating multiple tenants.  The scheme and the related protocols can be used in networks for cloud service providers and enterprise data centers.  This memo documents the deployed VXLAN protocol for the benefit of the Internet community.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7348"/>
          <seriesInfo name="DOI" value="10.17487/RFC7348"/>
        </reference>
        <reference anchor="RFC7637" target="https://www.rfc-editor.org/info/rfc7637" quoteTitle="true" derivedAnchor="RFC7637">
          <front>
            <title>NVGRE: Network Virtualization Using Generic Routing Encapsulation</title>
            <author initials="P." surname="Garg" fullname="P. Garg" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="Y." surname="Wang" fullname="Y. Wang" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2015" month="September"/>
            <abstract>
              <t indent="0">This document describes the usage of the Generic Routing Encapsulation (GRE) header for Network Virtualization (NVGRE) in multi-tenant data centers.  Network Virtualization decouples virtual networks and addresses from physical network infrastructure, providing isolation and concurrency between multiple virtual networks on the same physical network infrastructure.  This document also introduces a Network Virtualization framework to illustrate the use cases, but the focus is on specifying the data-plane aspect of NVGRE.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7637"/>
          <seriesInfo name="DOI" value="10.17487/RFC7637"/>
        </reference>
        <reference anchor="I-D.ietf-bess-evpn-virtual-eth-segment" quoteTitle="true" target="https://tools.ietf.org/html/draft-ietf-bess-evpn-virtual-eth-segment-06" derivedAnchor="VIRTUAL-ES">
          <front>
            <title>EVPN Virtual Ethernet Segment</title>
            <author fullname="Ali Sajassi">
              <organization showOnFrontPage="true">Cisco Systems</organization>
            </author>
            <author fullname="Patrice Brissette">
              <organization showOnFrontPage="true">Cisco Systems</organization>
            </author>
            <author fullname="Rick Schell">
              <organization showOnFrontPage="true">Verizon</organization>
            </author>
            <author fullname="John E Drake">
              <organization showOnFrontPage="true">Juniper</organization>
            </author>
            <author fullname="Jorge Rabadan">
              <organization showOnFrontPage="true">Nokia</organization>
            </author>
            <date month="March" day="9" year="2020"/>
            <abstract>
              <t indent="0">   EVPN and PBB-EVPN introduce a family of solutions for multipoint
   Ethernet services over MPLS/IP network with many advanced features
   among which their multi-homing capabilities.  These solutions
   introduce Single-Active and All-Active for an Ethernet Segment (ES),
   itself defined as a set of physical links between the multi-homed
   device/network and a set of PE devices that they are connected to.
   This document extends the Ethernet Segment concept so that an ES can
   be associated to a set of EVCs (e.g., VLANs) or other objects such as
   MPLS Label Switch Paths (LSPs) or Pseudowires (PWs), referred to as
   Virtual Ethernet Segments (vES).  This draft describes the
   requirements and the extensions needed to support vES in EVPN and
   PBB-EVPN.


              </t>
            </abstract>
          </front>
          <seriesInfo name="Internet-Draft" value="draft-ietf-bess-evpn-virtual-eth-segment-06"/>
          <format type="TXT" target="https://www.ietf.org/archive/id/draft-ietf-bess-evpn-virtual-eth-segment-06.txt"/>
          <refcontent>Work in Progress</refcontent>
        </reference>
        <reference anchor="Y.1731" quoteTitle="true" derivedAnchor="Y.1731">
          <front>
            <title>OAM functions and mechanisms for Ethernet based networks</title>
            <author>
              <organization showOnFrontPage="true">ITU-T</organization>
            </author>
            <date month="August" year="2019"/>
          </front>
          <seriesInfo name="ITU-T Recommendation" value="Y.1731"/>
        </reference>
      </references>
    </references>
    <section anchor="sect-8" numbered="false" toc="include" removeInRFC="false" pn="section-appendix.a">
      <name slugifiedName="name-acknowledgments">Acknowledgments</name>
      <t indent="0" pn="section-appendix.a-1">
   The authors would like to thank <contact fullname="Neil Hart"/>, <contact fullname="Vinod Prabhu"/>, and <contact fullname="Kiran Nagaraj"/> for
   their valuable comments and feedback. We would also like
   to thank <contact fullname="Martin Vigoureux"/> and <contact fullname="Alvaro Retana"/> for their detailed reviews and comments.</t>
    </section>
    <section anchor="sect-9" numbered="false" toc="include" removeInRFC="false" pn="section-appendix.b">
      <name slugifiedName="name-contributors">Contributors</name>
      <t indent="0" pn="section-appendix.b-1">
   In addition to the authors listed on the front page, the following
   coauthors have also contributed to this document:</t>
      <contact fullname="Ravi Shekhar">
        <organization showOnFrontPage="true">Juniper Networks</organization>
      </contact>
      <contact fullname="Anil Lohiya">
        <organization showOnFrontPage="true">Juniper Networks</organization>
      </contact>
      <contact fullname="Wen Lin">
        <organization showOnFrontPage="true">Juniper Networks</organization>
      </contact>
      <contact fullname="Florin Balus">
        <organization showOnFrontPage="true">Cisco</organization>
      </contact>
      <contact fullname="Patrice Brissette">
        <organization showOnFrontPage="true">Cisco</organization>
      </contact>
      <contact fullname="Senad Palislamovic">
        <organization showOnFrontPage="true">Nokia</organization>
      </contact>
      <contact fullname="Dennis Cai">
        <organization showOnFrontPage="true">Alibaba</organization>
      </contact>
    </section>
    <section anchor="authors-addresses" numbered="false" removeInRFC="false" toc="include" pn="section-appendix.c">
      <name slugifiedName="name-authors-addresses">Authors' Addresses</name>
      <author initials="J." surname="Rabadan" fullname="Jorge Rabadan" role="editor">
        <organization showOnFrontPage="true">Nokia</organization>
        <address>
          <postal>
            <street>777 E. Middlefield Road</street>
            <city>Mountain View</city>
            <region>CA</region>
            <code>94043</code>
            <country>USA</country>
          </postal>
          <email>jorge.rabadan@nokia.com</email>
        </address>
      </author>
      <author initials="S." surname="Sathappan" fullname="Senthil Sathappan">
        <organization showOnFrontPage="true">Nokia</organization>
        <address>
          <email>senthil.sathappan@nokia.com</email>
        </address>
      </author>
      <author initials="W." surname="Henderickx" fullname="Wim Henderickx">
        <organization showOnFrontPage="true">Nokia</organization>
        <address>
          <email>wim.henderickx@nokia.com</email>
        </address>
      </author>
      <author initials="A." surname="Sajassi" fullname="Ali Sajassi">
        <organization showOnFrontPage="true">Cisco</organization>
        <address>
          <email>sajassi@cisco.com</email>
        </address>
      </author>
      <author initials="J." surname="Drake" fullname="John Drake">
        <organization showOnFrontPage="true">Juniper</organization>
        <address>
          <email>jdrake@juniper.net</email>
        </address>
      </author>
    </section>
  </back>
</rfc>
