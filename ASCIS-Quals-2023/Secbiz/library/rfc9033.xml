<?xml version='1.0' encoding='utf-8'?>
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" version="3" category="std" consensus="true" docName="draft-ietf-6tisch-msf-18" indexInclude="true" ipr="trust200902" number="9033" prepTime="2021-05-29T10:02:09" scripts="Common,Latin" sortRefs="true" submissionType="IETF" symRefs="true" tocDepth="3" tocInclude="true" xml:lang="en">
  <link href="https://datatracker.ietf.org/doc/draft-ietf-6tisch-msf-18" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9033" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <front>
    <title abbrev="6TiSCH MSF">6TiSCH Minimal Scheduling Function (MSF)</title>
    <seriesInfo name="RFC" value="9033" stream="IETF"/>
    <author initials="T" surname="Chang" fullname="Tengfei Chang" role="editor">
      <organization showOnFrontPage="true">Inria</organization>
      <address>
        <postal>
          <street>2 rue Simone Iff</street>
          <city>Paris</city>
          <code>75012</code>
          <country>France</country>
        </postal>
        <email>tengfei.chang@gmail.com</email>
      </address>
    </author>
    <author initials="M." surname="Vučinić" fullname="Mališa Vučinić">
      <organization showOnFrontPage="true">Inria</organization>
      <address>
        <postal>
          <street>2 rue Simone Iff</street>
          <city>Paris</city>
          <code>75012</code>
          <country>France</country>
        </postal>
        <email>malisa.vucinic@inria.fr</email>
      </address>
    </author>
    <author initials="X" surname="Vilajosana" fullname="Xavier Vilajosana">
      <organization showOnFrontPage="true">Universitat Oberta de Catalunya</organization>
      <address>
        <postal>
          <street>156 Rambla Poblenou</street>
          <city>Barcelona</city>
          <region>Catalonia</region>
          <code>08018</code>
          <country>Spain</country>
        </postal>
        <email>xvilajosana@uoc.edu</email>
      </address>
    </author>
    <author initials="S" surname="Duquennoy" fullname="Simon Duquennoy">
      <organization showOnFrontPage="true">RISE SICS</organization>
      <address>
        <postal>
          <street>Isafjordsgatan 22</street>
          <city>Kista</city>
          <code>164 29</code>
          <country>Sweden</country>
        </postal>
        <email>simon.duquennoy@gmail.com</email>
      </address>
    </author>
    <author initials="D" surname="Dujovne" fullname="Diego Dujovne">
      <organization showOnFrontPage="true">Universidad Diego Portales</organization>
      <address>
        <postal>
          <street>Escuela de Informática y Telecomunicaciones</street>
          <street>Av. Ejército 441</street>
          <city>Santiago</city>
          <region>Región Metropolitana</region>
          <country>Chile</country>
        </postal>
        <phone>+56 (2) 676-8121</phone>
        <email>diego.dujovne@mail.udp.cl</email>
      </address>
    </author>
    <date month="05" year="2021"/>
    <area>Internet Area</area>
    <workgroup>6TiSCH</workgroup>
    <keyword>TSCH</keyword>
    <keyword>communication schedule</keyword>
    <keyword>6P</keyword>
    <abstract pn="section-abstract">
      <t indent="0" pn="section-abstract-1">
                This specification defines the "IPv6 over the TSCH mode of IEEE 802.15.4" (6TiSCH) Minimal Scheduling Function (MSF).
                This Scheduling Function describes both
                the behavior of a node when joining the network and
                how the communication schedule is managed in a distributed fashion.
                MSF is built upon
                the 6TiSCH Operation Sublayer Protocol (6P) and
                the minimal security framework for 6TiSCH.
      </t>
    </abstract>
    <boilerplate>
      <section anchor="status-of-memo" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.1">
        <name slugifiedName="name-status-of-this-memo">Status of This Memo</name>
        <t indent="0" pn="section-boilerplate.1-1">
            This is an Internet Standards Track document.
        </t>
        <t indent="0" pn="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.
        </t>
        <t indent="0" pn="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <eref target="https://www.rfc-editor.org/info/rfc9033" brackets="none"/>.
        </t>
      </section>
      <section anchor="copyright" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.2">
        <name slugifiedName="name-copyright-notice">Copyright Notice</name>
        <t indent="0" pn="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.
        </t>
        <t indent="0" pn="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<eref target="https://trustee.ietf.org/license-info" brackets="none"/>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.
        </t>
      </section>
    </boilerplate>
    <toc>
      <section anchor="toc" numbered="false" removeInRFC="false" toc="exclude" pn="section-toc.1">
        <name slugifiedName="name-table-of-contents">Table of Contents</name>
        <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1">
          <li pn="section-toc.1-1.1">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.1"><xref derivedContent="1" format="counter" sectionFormat="of" target="section-1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-introduction">Introduction</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.1.2">
              <li pn="section-toc.1-1.1.2.1">
                <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.2.1.1"><xref derivedContent="1.1" format="counter" sectionFormat="of" target="section-1.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-requirements-language">Requirements Language</xref></t>
              </li>
              <li pn="section-toc.1-1.1.2.2">
                <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.2.2.1"><xref derivedContent="1.2" format="counter" sectionFormat="of" target="section-1.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-related-documents">Related Documents</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.2">
            <t indent="0" pn="section-toc.1-1.2.1"><xref derivedContent="2" format="counter" sectionFormat="of" target="section-2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-interface-to-the-minimal-6t">Interface to the Minimal 6TiSCH Configuration</xref></t>
          </li>
          <li pn="section-toc.1-1.3">
            <t indent="0" pn="section-toc.1-1.3.1"><xref derivedContent="3" format="counter" sectionFormat="of" target="section-3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-autonomous-cells">Autonomous Cells</xref></t>
          </li>
          <li pn="section-toc.1-1.4">
            <t indent="0" pn="section-toc.1-1.4.1"><xref derivedContent="4" format="counter" sectionFormat="of" target="section-4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-node-behavior-at-boot">Node Behavior at Boot</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2">
              <li pn="section-toc.1-1.4.2.1">
                <t indent="0" pn="section-toc.1-1.4.2.1.1"><xref derivedContent="4.1" format="counter" sectionFormat="of" target="section-4.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-start-state">Start State</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.2">
                <t indent="0" pn="section-toc.1-1.4.2.2.1"><xref derivedContent="4.2" format="counter" sectionFormat="of" target="section-4.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-1-choosing-frequency">Step 1 - Choosing Frequency</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.3">
                <t indent="0" pn="section-toc.1-1.4.2.3.1"><xref derivedContent="4.3" format="counter" sectionFormat="of" target="section-4.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-2-receiving-ebs">Step 2 - Receiving EBs</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.4">
                <t indent="0" pn="section-toc.1-1.4.2.4.1"><xref derivedContent="4.4" format="counter" sectionFormat="of" target="section-4.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-3-setting-up-autonomou">Step 3 - Setting up Autonomous Cells for the Join Process</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.5">
                <t indent="0" pn="section-toc.1-1.4.2.5.1"><xref derivedContent="4.5" format="counter" sectionFormat="of" target="section-4.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-4-acquiring-a-rpl-rank">Step 4 - Acquiring a RPL Rank</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.6">
                <t indent="0" pn="section-toc.1-1.4.2.6.1"><xref derivedContent="4.6" format="counter" sectionFormat="of" target="section-4.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-5-setting-up-first-tx-">Step 5 - Setting up First Tx Negotiated Cells</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.7">
                <t indent="0" pn="section-toc.1-1.4.2.7.1"><xref derivedContent="4.7" format="counter" sectionFormat="of" target="section-4.7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-step-6-sending-ebs-and-dios">Step 6 - Sending EBs and DIOs</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.8">
                <t indent="0" pn="section-toc.1-1.4.2.8.1"><xref derivedContent="4.8" format="counter" sectionFormat="of" target="section-4.8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-end-state">End State</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.5">
            <t indent="0" pn="section-toc.1-1.5.1"><xref derivedContent="5" format="counter" sectionFormat="of" target="section-5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-rules-for-adding-and-deleti">Rules for Adding and Deleting Cells</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.5.2">
              <li pn="section-toc.1-1.5.2.1">
                <t indent="0" pn="section-toc.1-1.5.2.1.1"><xref derivedContent="5.1" format="counter" sectionFormat="of" target="section-5.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-adapting-to-traffic">Adapting to Traffic</xref></t>
              </li>
              <li pn="section-toc.1-1.5.2.2">
                <t indent="0" pn="section-toc.1-1.5.2.2.1"><xref derivedContent="5.2" format="counter" sectionFormat="of" target="section-5.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-switching-parent">Switching Parent</xref></t>
              </li>
              <li pn="section-toc.1-1.5.2.3">
                <t indent="0" pn="section-toc.1-1.5.2.3.1"><xref derivedContent="5.3" format="counter" sectionFormat="of" target="section-5.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-handling-schedule-collision">Handling Schedule Collisions</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.6">
            <t indent="0" pn="section-toc.1-1.6.1"><xref derivedContent="6" format="counter" sectionFormat="of" target="section-6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-6p-signal-command">6P SIGNAL Command</xref></t>
          </li>
          <li pn="section-toc.1-1.7">
            <t indent="0" pn="section-toc.1-1.7.1"><xref derivedContent="7" format="counter" sectionFormat="of" target="section-7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-scheduling-function-identif">Scheduling Function Identifier</xref></t>
          </li>
          <li pn="section-toc.1-1.8">
            <t indent="0" pn="section-toc.1-1.8.1"><xref derivedContent="8" format="counter" sectionFormat="of" target="section-8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-rules-for-celllist">Rules for CellList</xref></t>
          </li>
          <li pn="section-toc.1-1.9">
            <t indent="0" pn="section-toc.1-1.9.1"><xref derivedContent="9" format="counter" sectionFormat="of" target="section-9"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-6p-timeout-value">6P Timeout Value</xref></t>
          </li>
          <li pn="section-toc.1-1.10">
            <t indent="0" pn="section-toc.1-1.10.1"><xref derivedContent="10" format="counter" sectionFormat="of" target="section-10"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-rule-for-ordering-cells">Rule for Ordering Cells</xref></t>
          </li>
          <li pn="section-toc.1-1.11">
            <t indent="0" pn="section-toc.1-1.11.1"><xref derivedContent="11" format="counter" sectionFormat="of" target="section-11"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-meaning-of-the-metadata-fie">Meaning of the Metadata Field</xref></t>
          </li>
          <li pn="section-toc.1-1.12">
            <t indent="0" pn="section-toc.1-1.12.1"><xref derivedContent="12" format="counter" sectionFormat="of" target="section-12"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-6p-error-handling">6P Error Handling</xref></t>
          </li>
          <li pn="section-toc.1-1.13">
            <t indent="0" pn="section-toc.1-1.13.1"><xref derivedContent="13" format="counter" sectionFormat="of" target="section-13"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-schedule-inconsistency-hand">Schedule Inconsistency Handling</xref></t>
          </li>
          <li pn="section-toc.1-1.14">
            <t indent="0" pn="section-toc.1-1.14.1"><xref derivedContent="14" format="counter" sectionFormat="of" target="section-14"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-msf-constants">MSF Constants</xref></t>
          </li>
          <li pn="section-toc.1-1.15">
            <t indent="0" pn="section-toc.1-1.15.1"><xref derivedContent="15" format="counter" sectionFormat="of" target="section-15"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-msf-statistics">MSF Statistics</xref></t>
          </li>
          <li pn="section-toc.1-1.16">
            <t indent="0" pn="section-toc.1-1.16.1"><xref derivedContent="16" format="counter" sectionFormat="of" target="section-16"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-security-considerations">Security Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.17">
            <t indent="0" pn="section-toc.1-1.17.1"><xref derivedContent="17" format="counter" sectionFormat="of" target="section-17"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-iana-considerations">IANA Considerations</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.17.2">
              <li pn="section-toc.1-1.17.2.1">
                <t indent="0" pn="section-toc.1-1.17.2.1.1"><xref derivedContent="17.1" format="counter" sectionFormat="of" target="section-17.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-msf-scheduling-function-ide">MSF Scheduling Function Identifiers</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.18">
            <t indent="0" pn="section-toc.1-1.18.1"><xref derivedContent="18" format="counter" sectionFormat="of" target="section-18"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-references">References</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.18.2">
              <li pn="section-toc.1-1.18.2.1">
                <t indent="0" pn="section-toc.1-1.18.2.1.1"><xref derivedContent="18.1" format="counter" sectionFormat="of" target="section-18.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-normative-references">Normative References</xref></t>
              </li>
              <li pn="section-toc.1-1.18.2.2">
                <t indent="0" pn="section-toc.1-1.18.2.2.1"><xref derivedContent="18.2" format="counter" sectionFormat="of" target="section-18.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-informative-references">Informative References</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.19">
            <t indent="0" pn="section-toc.1-1.19.1"><xref derivedContent="Appendix A" format="default" sectionFormat="of" target="section-appendix.a"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-implementation-of-t">Example Implementation of the SAX Hash Function</xref></t>
          </li>
          <li pn="section-toc.1-1.20">
            <t indent="0" pn="section-toc.1-1.20.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.b"/><xref derivedContent="" format="title" sectionFormat="of" target="name-contributors">Contributors</xref></t>
          </li>
          <li pn="section-toc.1-1.21">
            <t indent="0" pn="section-toc.1-1.21.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.c"/><xref derivedContent="" format="title" sectionFormat="of" target="name-authors-addresses">Authors' Addresses</xref></t>
          </li>
        </ul>
      </section>
    </toc>
  </front>
  <middle>
    <section anchor="sec_intro" numbered="true" toc="include" removeInRFC="false" pn="section-1">
      <name slugifiedName="name-introduction">Introduction</name>
      <t indent="0" pn="section-1-1">
                The 6TiSCH Minimal Scheduling Function (MSF), defined in this specification, is a 6TiSCH Scheduling Function (SF).
                The role of an SF is entirely defined in <xref target="RFC8480" format="default" sectionFormat="of" derivedContent="RFC8480"/>.
                This specification complements <xref target="RFC8480" format="default" sectionFormat="of" derivedContent="RFC8480"/> by providing the rules of when to add and delete cells in the communication schedule.
                This specification satisfies all the requirements for an SF listed in <xref target="RFC8480" section="4.2" sectionFormat="of" format="default" derivedLink="https://rfc-editor.org/rfc/rfc8480#section-4.2" derivedContent="RFC8480"/>.
      </t>
      <t indent="0" pn="section-1-2">
                MSF builds on top of the following specifications:
                "<xref target="RFC8180" format="title" sectionFormat="of" derivedContent="Minimal IPv6 over the TSCH Mode of IEEE 802.15.4e (6TiSCH) Configuration"/>" <xref target="RFC8180" format="default" sectionFormat="of" derivedContent="RFC8180"/>,
                "<xref target="RFC8480" format="title" sectionFormat="of" derivedContent="6TiSCH Operation Sublayer (6top) Protocol (6P)"/>"  <xref target="RFC8480" format="default" sectionFormat="of" derivedContent="RFC8480"/>, and
                "<xref target="RFC9031" format="title" sectionFormat="of" derivedContent="Constrained Join Protocol (CoJP) for 6TiSCH"/>"  <xref target="RFC9031" format="default" sectionFormat="of" derivedContent="RFC9031"/>.
      </t>
      <t indent="0" pn="section-1-3">
                MSF defines both
                the behavior of a node when joining the network, and
                how the communication schedule is managed in a distributed fashion.
                When a node running MSF boots up, it joins the network by following the six steps described in <xref target="sec_boot" format="default" sectionFormat="of" derivedContent="Section 4"/>.
                The end state of the join process is that the node
                is synchronized to the network,
                has mutually authenticated with the network,
                has identified a routing parent,
                and has scheduled one negotiated Tx cell (defined in <xref target="sec_traffic" format="default" sectionFormat="of" derivedContent="Section 5.1"/>) to/from its routing parent.
                After the join process, the node can continuously add, delete, and relocate cells as described in <xref target="sec_add_delete" format="default" sectionFormat="of" derivedContent="Section 5"/>.

                It does so for three reasons:
                to match the link-layer resources to the traffic,
                to handle changing parent, and 
                to handle a schedule collision.
      </t>
      <t indent="0" pn="section-1-4">
                MSF works closely with the IPv6 Routing Protocol for Low-Power and Lossy Networks (RPL), specifically the routing parent defined in <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.
                This specification only describes how MSF works with the routing parent; this parent is referred to as the "selected parent".
                The activity of MSF towards the single routing parent is called a "MSF session". 
                Though the performance of MSF is evaluated only when the "selected parent" represents the node's preferred parent, there should be no restrictions to use multiple MSF sessions, one per parent.
                The distribution of traffic over multiple parents is a routing decision that is out of scope for MSF.
      </t>
      <t indent="0" pn="section-1-5">
                MSF is designed to operate in a wide range of application domains.
                It is optimized for applications with regular upstream traffic, from the nodes to the Destination-Oriented Directed Acyclic Graph (DODAG) root <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.
      </t>
      <t indent="0" pn="section-1-6">
                This specification follows the recommended structure of an SF specification, given in <xref target="RFC8480" section="A" sectionFormat="of" format="default" derivedLink="https://rfc-editor.org/rfc/rfc8480#appendix-A" derivedContent="RFC8480"/>, with the following adaptations:
      </t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-1-7">
        <li pn="section-1-7.1">
                    We have reordered some sections, in particular to have the section on the node behavior at boot (<xref target="sec_boot" format="default" sectionFormat="of" derivedContent="Section 4"/>) appear early in this specification.
                </li>
        <li pn="section-1-7.2">
                    We added sections on
                    the interface to the minimal 6TiSCH configuration (<xref target="sec_minimal" format="default" sectionFormat="of" derivedContent="Section 2"/>),
                    the use of the SIGNAL command (<xref target="sec_signal" format="default" sectionFormat="of" derivedContent="Section 6"/>),
                    the MSF constants (<xref target="sec_constants" format="default" sectionFormat="of" derivedContent="Section 14"/>), and
                    the MSF statistics (<xref target="sec_stats" format="default" sectionFormat="of" derivedContent="Section 15"/>).
                </li>
      </ul>
      <section numbered="true" removeInRFC="false" toc="include" pn="section-1.1">
        <name slugifiedName="name-requirements-language">Requirements Language</name>
        <t indent="0" pn="section-1.1-1">                
                    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>", "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as described in BCP 14 <xref target="RFC2119" format="default" sectionFormat="of" derivedContent="RFC2119"/> <xref target="RFC8174" format="default" sectionFormat="of" derivedContent="RFC8174"/> when, and only when, they appear in all capitals, as shown here.
        </t>
      </section>
      <section numbered="true" removeInRFC="false" toc="include" pn="section-1.2">
        <name slugifiedName="name-related-documents">Related Documents</name>
        <t indent="0" pn="section-1.2-1">This specification uses messages and variables defined in 
               IEEE Std 802.15.4-2015 <xref target="IEEE802154" format="default" sectionFormat="of" derivedContent="IEEE802154"/>.  It is expected that 
               those resources will remain in the future versions of IEEE Std 802.15.4; 
               in which case, this specification also applies to those future versions.
               In the remainder of the document, we use <xref target="IEEE802154" format="default" sectionFormat="of" derivedContent="IEEE802154"/> to refer to 
               IEEE Std 802.15.4-2015 as well as future versions of IEEE Std 802.15.4 
               that remain compatible.</t>
      </section>
    </section>
    <section anchor="sec_minimal" numbered="true" toc="include" removeInRFC="false" pn="section-2">
      <name slugifiedName="name-interface-to-the-minimal-6t">Interface to the Minimal 6TiSCH Configuration</name>
      <t indent="0" pn="section-2-1">
                In a Time-Slotted Channel Hopping (TSCH) network, time is sliced up into time slots.
                The time slots are grouped as one or multiple slotframes that repeat over time.
                The TSCH schedule instructs a node what to do at each time slot, such as transmit, receive, or sleep <xref target="RFC7554" format="default" sectionFormat="of" derivedContent="RFC7554"/>.
                 For time slots for transmitting or receiving, a channel is assigned to the time slot.    
                The tuple (slot, channel) is indicated as a cell of the TSCH schedule.
                MSF is one of the policies defining how to manage the TSCH schedule.
      </t>
      <t indent="0" pn="section-2-2">
                A node implementing MSF <bcp14>SHOULD</bcp14> implement the minimal 6TiSCH configuration <xref target="RFC8180" format="default" sectionFormat="of" derivedContent="RFC8180"/>, which defines the "minimal cell", a single shared cell providing minimal connectivity between the nodes in the network.
                The MSF implementation provided in this specification is based on the implementation of the minimal 6TiSCH configuration.
                However, an implementor <bcp14>MAY</bcp14> implement MSF based on other specifications as long as the specification defines a way to advertise the Enhanced Beacons (EBs) and DODAG Information Objects (DIOs) among the network.
      </t>
      <t indent="0" pn="section-2-3">
                MSF uses the minimal cell for broadcast frames such as Enhanced Beacons (EBs) <xref target="IEEE802154" format="default" sectionFormat="of" derivedContent="IEEE802154"/> and broadcast DODAG Information Objects (DIOs) <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.
                Cells scheduled by MSF are meant to be used only for unicast frames.
      </t>
      <t indent="0" pn="section-2-4">
                To ensure there is enough bandwidth available on the minimal cell, a node implementing MSF <bcp14>SHOULD</bcp14> enforce some rules for limiting the traffic of broadcast frames. 
                For example, the overall broadcast traffic among the node and its neighbors <bcp14>SHOULD NOT</bcp14> exceed one-third of the bandwidth of minimal cell.
                One of the algorithms that fulfills this requirement is the Trickle timer defined in  <xref target="RFC6206" format="default" sectionFormat="of" derivedContent="RFC6206"/>, which is applied to DIO messages <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>.
                However, any such algorithm of limiting the broadcast traffic to meet those rules is implementation-specific and is out of the scope of MSF.
      </t>
      <t indent="0" pn="section-2-5">
                Three slotframes are used in MSF. 
                MSF schedules autonomous cells at Slotframe 1 (<xref target="sec_autonomous_cells" format="default" sectionFormat="of" derivedContent="Section 3"/>) and 6P negotiated cells at Slotframe 2 (<xref target="sec_add_delete" format="default" sectionFormat="of" derivedContent="Section 5"/>), while Slotframe 0 is used for the bootstrap traffic as defined in the minimal 6TiSCH configuration.
                The same slotframe length for Slotframe 0, 1, and 2 is <bcp14>RECOMMENDED</bcp14>.
                Thus it is possible to avoid the scheduling collision between the autonomous cells and 6P negotiated cells (<xref target="sec_autonomous_cells" format="default" sectionFormat="of" derivedContent="Section 3"/>).
                The default slotframe length (SLOTFRAME_LENGTH) is <bcp14>RECOMMENDED</bcp14> for Slotframe 0, 1, and 2, although any value can be advertised in the EBs.
      </t>
    </section>
    <section anchor="sec_autonomous_cells" numbered="true" toc="include" removeInRFC="false" pn="section-3">
      <name slugifiedName="name-autonomous-cells">Autonomous Cells</name>
      <t indent="0" pn="section-3-1">
                MSF nodes initialize Slotframe 1 with a set of default cells for unicast communication with their neighbors.
                These cells are called "autonomous cells", because they are maintained autonomously by each node without negotiation through 6P.
                Cells scheduled by 6P Transaction are called "negotiated cells", which are reserved on Slotframe 2.
                How to schedule negotiated cells is detailed in <xref target="sec_add_delete" format="default" sectionFormat="of" derivedContent="Section 5"/>.
                There are two types of autonomous cells:
      </t>
      <dl spacing="normal" indent="3" newline="false" pn="section-3-2">
        <dt pn="section-3-2.1">
                    Autonomous Rx Cell (AutoRxCell):</dt>
        <dd pn="section-3-2.2"> One cell at a [slotOffset,channelOffset] computed as a hash of the 64-bit Extended Unique Identifier (EUI-64) of the node itself (detailed next).
                    Its cell options bits are assigned as TX=0, RX=1, SHARED=0.
                </dd>
        <dt pn="section-3-2.3">
                    Autonomous Tx Cell (AutoTxCell):</dt>
        <dd pn="section-3-2.4"> One cell at a [slotOffset,channelOffset] computed as a hash of the Layer 2 EUI-64 destination address in the unicast frame to be transmitted (detailed in <xref target="sec_join" format="default" sectionFormat="of" derivedContent="Section 4.4"/>).
                    Its cell options bits are assigned as TX=1, RX=0, SHARED=1.
                </dd>
      </dl>
      <t indent="0" pn="section-3-3">
                To compute a [slotOffset,channelOffset] from an EUI-64 address, nodes <bcp14>MUST</bcp14> use the hash function SAX as defined in Section 2 of <xref target="SAX-DASFAA" format="default" sectionFormat="of" derivedContent="SAX-DASFAA"/> with consistent input parameters, for example, those defined in <xref target="sec_hash_function" format="default" sectionFormat="of" derivedContent="Appendix A"/>.
                The coordinates are computed to distribute the cells across all channel offsets, and all but the first slot offset of Slotframe 1.
                The first time offset is skipped to avoid colliding with the minimal cell in Slotframe 0.
                The slot coordinates derived from a given EUI-64 address are computed as follows:
      </t>
      <t indent="6" pn="section-3-4">slotOffset(MAC) = 1 + hash(EUI64, length(Slotframe_1) - 1) </t>
      <t indent="6" pn="section-3-5">channelOffset(MAC) = hash(EUI64, NUM_CH_OFFSET)</t>
      <t indent="0" pn="section-3-6">
                The second input parameter defines the maximum return value of the hash function.
                Other optional parameters defined in SAX determine the performance of SAX hash function.
                Those parameters could be broadcast in an EB frame or preconfigured.
                For interoperability purposes, <xref target="sec_hash_function" format="default" sectionFormat="of" derivedContent="Appendix A"/> provides the reference values of those parameters.
      </t>
      <t indent="0" pn="section-3-7">
                AutoTxCell is not permanently installed in the schedule but is added or deleted on demand when there is a frame to be sent.
                Throughout the network lifetime, nodes maintain the autonomous cells as follows:
      </t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3-8">
        <li pn="section-3-8.1">
                    Add an AutoTxCell to the Layer 2 destination address, which is indicated in a frame when there is no 6P negotiated Tx cell in the schedule for that frame to transmit.
                </li>
        <li pn="section-3-8.2">
          <t indent="0" pn="section-3-8.2.1">
                        Remove an AutoTxCell when:
          </t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3-8.2.2">
            <li pn="section-3-8.2.2.1">there is no frame to transmit on that cell, or</li>
            <li pn="section-3-8.2.2.2">there is at least one 6P negotiated Tx cell in the schedule for the frames to transmit.</li>
          </ul>
        </li>
      </ul>
      <t indent="0" pn="section-3-9">
                The AutoRxCell <bcp14>MUST</bcp14> always remain scheduled after synchronization.            
                6P CLEAR <bcp14>MUST NOT</bcp14> erase any autonomous cells.
      </t>
      <t indent="0" pn="section-3-10">
                Because of hash collisions, there will be cases that the AutoTxCell and AutoRxCell are scheduled at the same slot offset and/or channel offset.
                In such cases, AutoTxCell always take precedence over AutoRxCell.
                Notice AutoTxCell is a shared type cell that applies a back-off mechanism.
                When the AutoTxCell and AutoRxCell collide,  AutoTxCell takes precedence if there is a packet to transmit.
                When in a back-off period, AutoRxCell is used.
                In the case of conflict with a negotiated cell, autonomous cells take precedence over negotiated cells, which is stated in <xref target="IEEE802154" format="default" sectionFormat="of" derivedContent="IEEE802154"/>.
                However, when the Slotframe 0, 1, and 2 use the same length value, it is possible for a negotiated cell to avoid the collision with AutoRxCell.
                Hence, the same slotframe length for Slotframe 0, 1, and 2 is <bcp14>RECOMMENDED</bcp14>.
      </t>
      <t indent="0" pn="section-3-11">

      </t>
    </section>
    <section anchor="sec_boot" numbered="true" toc="include" removeInRFC="false" pn="section-4">
      <name slugifiedName="name-node-behavior-at-boot">Node Behavior at Boot</name>
      <t indent="0" pn="section-4-1">
                This section details the behavior the node <bcp14>SHOULD</bcp14> follow from the moment it is switched on until it has successfully joined the network.
                Alternative behaviors may be involved, for example, when alternative security solutions are used for the network. 
                <xref target="sec_start_state" format="default" sectionFormat="of" derivedContent="Section 4.1"/> details the start state;
                <xref target="sec_end_state" format="default" sectionFormat="of" derivedContent="Section 4.8"/>   details the end   state.
                The other sections detail the six steps of the joining process.
                We use the term "pledge" and "joined node", as defined in <xref target="RFC9031" format="default" sectionFormat="of" derivedContent="RFC9031"/>.
      </t>
      <section anchor="sec_start_state" numbered="true" toc="include" removeInRFC="false" pn="section-4.1">
        <name slugifiedName="name-start-state">Start State</name>
        <t indent="0" pn="section-4.1-1">
                    A node implementing MSF <bcp14>SHOULD</bcp14> implement the Constrained Join Protocol (CoJP) for 6TiSCH <xref target="RFC9031" format="default" sectionFormat="of" derivedContent="RFC9031"/>.
                    As a corollary, this means that a pledge, before being switched on, may be preconfigured with the Pre-Shared Key (PSK) for joining, as well as any other configuration detailed in <xref target="RFC9031" format="default" sectionFormat="of" derivedContent="RFC9031"/>.
                    This is not necessary if the node implements a security solution that is not based on PSKs, such as <xref target="I-D.ietf-6tisch-dtsecurity-zerotouch-join" format="default" sectionFormat="of" derivedContent="ZEROTOUCH-JOIN"/>.
        </t>
      </section>
      <section anchor="sec_frequency" numbered="true" toc="include" removeInRFC="false" pn="section-4.2">
        <name slugifiedName="name-step-1-choosing-frequency">Step 1 - Choosing Frequency</name>
        <t indent="0" pn="section-4.2-1">
                    When switched on, the pledge randomly chooses a frequency from the channels through which the network cycles and starts listening for EBs on that frequency.
        </t>
      </section>
      <section anchor="sec_ebs" numbered="true" toc="include" removeInRFC="false" pn="section-4.3">
        <name slugifiedName="name-step-2-receiving-ebs">Step 2 - Receiving EBs</name>
        <t indent="0" pn="section-4.3-1">
                    Upon receiving the first EB, the pledge continues listening for additional EBs to learn:
        </t>
        <ol spacing="normal" type="1" indent="adaptive" start="1" pn="section-4.3-2">
                    <li pn="section-4.3-2.1" derivedCounter="1.">the number of neighbors N in its vicinity, and </li>
          <li pn="section-4.3-2.2" derivedCounter="2.">which neighbor to choose as a Join Proxy (JP) for the joining process.</li>
        </ol>
        <t indent="0" pn="section-4.3-3">
                    After having received the first EB, a node <bcp14>MAY</bcp14> keep listening for at most MAX_EB_DELAY seconds or until it has received EBs from NUM_NEIGHBOURS_TO_WAIT distinct neighbors.
                    This behavior is defined in <xref target="RFC8180" format="default" sectionFormat="of" derivedContent="RFC8180"/>.
        </t>
        <t indent="0" pn="section-4.3-4">
                    During this step, the pledge only gets synchronized when it has received enough EB from the network it wishes to join.
                    How to decide whether an EB originates from a node from the network it wishes to join is implementation-specific, but <bcp14>MAY</bcp14> involve filtering EBs by
                    the PANID field it contains,
                    the presence and contents of the Information Element (IE) defined in <xref target="RFC9032" format="default" sectionFormat="of" derivedContent="RFC9032"/>, or
                    the key used to authenticate it.
        </t>
        <t indent="0" pn="section-4.3-5">
                    The decision of which neighbor to use as a JP is implementation-specific and is discussed in <xref target="RFC9031" format="default" sectionFormat="of" derivedContent="RFC9031"/>.
        </t>
      </section>
      <section anchor="sec_join" numbered="true" toc="include" removeInRFC="false" pn="section-4.4">
        <name slugifiedName="name-step-3-setting-up-autonomou">Step 3 - Setting up Autonomous Cells for the Join Process</name>
        <t indent="0" pn="section-4.4-1">
                    After having selected a JP, a node generates a Join Request and installs an AutoTxCell to the JP.
                    The Join Request is then sent by the pledge to its selected JP over the AutoTxCell.
                    The AutoTxCell is removed by the pledge when the Join Request is sent out.
                    The JP receives the Join Request through its AutoRxCell.
                    Then it forwards the Join Request to the Join Registrar/Coordinator (JRC), possibly over multiple hops, over the 6P negotiated Tx cells.
                    Similarly, the JRC sends the Join Response to the JP, possibly over multiple hops, over AutoTxCells or the 6P negotiated Tx cells.
                    When the JP receives the Join Response from the JRC, it installs an AutoTxCell to the pledge and sends that Join Response to the pledge over AutoTxCell. 
                    The AutoTxCell is removed by the JP when the Join Response is sent out.
                    The pledge receives the Join Response from its AutoRxCell, thereby learns the keying material used in the network, as well as other configuration settings, and becomes a "joined node".
        </t>
        <t indent="0" pn="section-4.4-2">
                    When 6LoWPAN Neighbor Discovery (ND) <xref target="RFC8505" format="default" sectionFormat="of" derivedContent="RFC8505"/> is implemented, the unicast packets used by ND are sent on the AutoTxCell.
                    The specific process how the ND works during the join process is detailed in <xref target="RFC9030" format="default" sectionFormat="of" derivedContent="RFC9030"/>.
        </t>
      </section>
      <section anchor="sec_rank" numbered="true" toc="include" removeInRFC="false" pn="section-4.5">
        <name slugifiedName="name-step-4-acquiring-a-rpl-rank">Step 4 - Acquiring a RPL Rank</name>
        <t indent="0" pn="section-4.5-1">
                    Per <xref target="RFC6550" format="default" sectionFormat="of" derivedContent="RFC6550"/>, the joined node
                    receives DIOs,
                    computes its own Rank, and
                    selects a routing parent.
        </t>
      </section>
      <section anchor="sec_negotiated_cells" numbered="true" toc="include" removeInRFC="false" pn="section-4.6">
        <name slugifiedName="name-step-5-setting-up-first-tx-">Step 5 - Setting up First Tx Negotiated Cells</name>
        <t indent="0" pn="section-4.6-1">
                    Once it has selected a routing parent, the joined node <bcp14>MUST</bcp14> generate a 6P ADD Request and install an AutoTxCell to that parent.
                    The 6P ADD Request is sent out through the AutoTxCell, containing the following fields:
        </t>
        <dl newline="false" indent="3" spacing="normal" pn="section-4.6-2">
          <dt pn="section-4.6-2.1">CellOptions:</dt>
          <dd pn="section-4.6-2.2">Set to TX=1, RX=0, SHARED=0.</dd>
          <dt pn="section-4.6-2.3">NumCells:</dt>
          <dd pn="section-4.6-2.4">Set to 1.</dd>
          <dt pn="section-4.6-2.5">CellList:</dt>
          <dd pn="section-4.6-2.6">At least 5 cells, chosen according to <xref target="sec_celllist" format="default" sectionFormat="of" derivedContent="Section 8"/>.</dd>
        </dl>
        <t indent="0" pn="section-4.6-3">
                    The joined node removes the AutoTxCell to the selected parent when the 6P Request is sent out.
                    That parent receives the 6P ADD Request from its AutoRxCell.
                    Then it generates a 6P ADD Response and installs an AutoTxCell to the joined node.
                    When the parent sends out the 6P ADD Response, it <bcp14>MUST</bcp14> remove that AutoTxCell.
                    The joined node receives the 6P ADD Response from its AutoRxCell and completes the 6P Transaction.
                    In the case that the 6P ADD transaction failed, the node <bcp14>MUST</bcp14> issue another 6P ADD Request and repeat until the Tx cell is installed to the parent.
        </t>
      </section>
      <section anchor="sec_eb_dio" numbered="true" toc="include" removeInRFC="false" pn="section-4.7">
        <name slugifiedName="name-step-6-sending-ebs-and-dios">Step 6 - Sending EBs and DIOs</name>
        <t indent="0" pn="section-4.7-1">
                    The node starts sending EBs and DIOs on the minimal cell, while following the transmit rules for broadcast frames from <xref target="sec_minimal" format="default" sectionFormat="of" derivedContent="Section 2"/>.
        </t>
      </section>
      <section anchor="sec_end_state" numbered="true" toc="include" removeInRFC="false" pn="section-4.8">
        <name slugifiedName="name-end-state">End State</name>
        <t indent="0" pn="section-4.8-1">
                    At the end state of the joining process, a new node:
        </t>
        <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.8-2">
          <li pn="section-4.8-2.1">is synchronized to the network,</li>
          <li pn="section-4.8-2.2">is using the link-layer keying material it learned through the secure joining process,</li>
          <li pn="section-4.8-2.3">has selected one neighbor as its routing parent,</li>
          <li pn="section-4.8-2.4">has one AutoRxCell,</li>
          <li pn="section-4.8-2.5">has one negotiated Tx cell to the selected parent,</li>
          <li pn="section-4.8-2.6">starts to send DIOs, potentially serving as a router for other nodes' traffic, and</li>
          <li pn="section-4.8-2.7">starts to send EBs,  potentially serving as a JP for new pledges.</li>
        </ul>
      </section>
    </section>
    <section anchor="sec_add_delete" numbered="true" toc="include" removeInRFC="false" pn="section-5">
      <name slugifiedName="name-rules-for-adding-and-deleti">Rules for Adding and Deleting Cells</name>
      <t indent="0" pn="section-5-1">
                Once a node has joined the 6TiSCH network, it adds/deletes/relocates cells with the selected parent for three reasons:
      </t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-5-2">
        <li pn="section-5-2.1">to match the link-layer resources to the traffic between the node and the selected parent (<xref target="sec_traffic" format="default" sectionFormat="of" derivedContent="Section 5.1"/>),</li>
        <li pn="section-5-2.2">to handle switching the parent (<xref target="sec_switching_parent" format="default" sectionFormat="of" derivedContent="Section 5.2"/>), or</li>
        <li pn="section-5-2.3">to handle a schedule collision (<xref target="sec_collision" format="default" sectionFormat="of" derivedContent="Section 5.3"/>).</li>
      </ul>
      <t indent="0" pn="section-5-3">
                These cells are called "negotiated cells" as they are scheduled through 6P and negotiated with the node's parent.
                Without specific declaration, all cells mentioned in this section are negotiated cells, and they are installed at Slotframe 2.
      </t>
      <section anchor="sec_traffic" numbered="true" toc="include" removeInRFC="false" pn="section-5.1">
        <name slugifiedName="name-adapting-to-traffic">Adapting to Traffic</name>
        <t indent="0" pn="section-5.1-1">
                    A node implementing MSF <bcp14>MUST</bcp14> implement the behavior described in this section.
        </t>
        <t indent="0" pn="section-5.1-2">
                    The goal of MSF is to manage the communication schedule in the 6TiSCH schedule in a distributed manner.
                    For a node, this translates into monitoring the current usage of the cells it has to one of its neighbors, in most cases to the selected parent.
        </t>
        <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-5.1-3">
          <li pn="section-5.1-3.1">
                        If the node determines that the number of link-layer frames it is attempting to exchange with the selected parent per unit of time is larger than the capacity offered by the TSCH negotiated cells it has scheduled with it, the node issues a 6P ADD command to that parent to add cells to the TSCH schedule.
                    </li>
          <li pn="section-5.1-3.2">
                        If the traffic is lower than the capacity, the node issues a 6P DELETE command to that parent to delete cells from the TSCH schedule.
                    </li>
        </ul>
        <t indent="0" pn="section-5.1-4">
                    The node <bcp14>MUST</bcp14> maintain two separate pairs of the following counters for the selected parent:
                        one for the negotiated Tx cells to that parent and 
                        one for the negotiated Rx cells to that parent.
        </t>
        <dl newline="false" indent="3" spacing="normal" pn="section-5.1-5">
          <dt pn="section-5.1-5.1">NumCellsElapsed:</dt>
          <dd pn="section-5.1-5.2">
                        Counts the number of negotiated cells that have elapsed since the counter was initialized. 
                        This counter is initialized at 0.
                        When the current cell is declared as a negotiated cell to the selected parent, NumCellsElapsed is incremented by exactly 1, regardless of whether the cell is used to transmit or receive a frame.
                    </dd>
          <dt pn="section-5.1-5.3">NumCellsUsed:</dt>
          <dd pn="section-5.1-5.4">
            <t indent="0" pn="section-5.1-5.4.1">
                            Counts the number of negotiated cells that have been used. 
                            This counter is initialized at 0.
                            NumCellsUsed is incremented by exactly 1 when, during a negotiated cell to the selected parent, either of the following happens:
            </t>
            <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-5.1-5.4.2">
              <li pn="section-5.1-5.4.2.1">
                                The node sends a frame to the parent.
                                The counter increments regardless of whether a link-layer acknowledgment was received or not.
                            </li>
              <li pn="section-5.1-5.4.2.2">
                                The node receives a valid frame from the parent.
                                The counter increments only when a valid frame per <xref target="IEEE802154" format="default" sectionFormat="of" derivedContent="IEEE802154"/> is received by the node from its parent.
                            </li>
            </ul>
          </dd>
        </dl>
        <t indent="0" pn="section-5.1-6">
                    The cell option of cells listed in CellList in a 6P Request frame <bcp14>SHOULD</bcp14> be either (Tx=1, Rx=0) only or (Tx=0, Rx=1) only.
                    Both NumCellsElapsed and NumCellsUsed counters can be used for both types of negotiated cells.
        </t>
        <t indent="0" pn="section-5.1-7">
                    As there is no negotiated Rx cell installed at initial time, the AutoRxCell is taken into account as well for downstream traffic adaptation.
                    In this case:
        </t>
        <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-5.1-8">
          <li pn="section-5.1-8.1">
                        NumCellsElapsed is incremented by exactly 1 when the current cell is AutoRxCell.
                    </li>
          <li pn="section-5.1-8.2">
                        NumCellsUsed is incremented by exactly 1 when the node receives a frame from the selected parent on AutoRxCell.
                    </li>
        </ul>
        <t indent="0" pn="section-5.1-9">
                    Implementors <bcp14>MAY</bcp14> choose to create the same counters for each neighbor and add them as additional statistics in the neighbor table.
        </t>
        <t indent="0" pn="section-5.1-10">
                    The counters are used as follows:
        </t>
        <ol spacing="normal" type="1" indent="adaptive" start="1" pn="section-5.1-11">
                    <li pn="section-5.1-11.1" derivedCounter="1.">
                        Both NumCellsElapsed and NumCellsUsed are initialized to 0 when the node boots.
                    </li>
          <li anchor="counter_step2" pn="section-5.1-11.2" derivedCounter="2.">
            <t indent="0" pn="section-5.1-11.2.1">
                            When the value of NumCellsElapsed reaches MAX_NUM_CELLS:
            </t>
            <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-5.1-11.2.2">
              <li pn="section-5.1-11.2.2.1">If NumCellsUsed is greater than LIM_NUMCELLSUSED_HIGH, trigger 6P to add a single cell to the selected parent.</li>
              <li pn="section-5.1-11.2.2.2">If NumCellsUsed is less than LIM_NUMCELLSUSED_LOW, trigger 6P to remove a single cell to the selected parent.</li>
              <li pn="section-5.1-11.2.2.3">Reset both NumCellsElapsed and NumCellsUsed to 0 and restart <xref target="counter_step2" format="none" sectionFormat="of" derivedContent="">#2</xref>.</li>
            </ul>
          </li>
        </ol>
        <t indent="0" pn="section-5.1-12">
                    The value of MAX_NUM_CELLS is chosen according to the traffic type of the network.
                    Generally speaking, the larger the value MAX_NUM_CELLS is, the more accurately the cell usage is calculated.
                    By using a larger value of MAX_NUM_CELLS, the 6P traffic overhead could be reduced as well.
                    Meanwhile, the latency won't increase much by using a larger value of MAX_NUM_CELLS for periodic traffic type.
                    For bursty traffic, a larger value of MAX_NUM_CELLS indeed introduces higher latency.
                    The latency caused by slight changes of traffic load can be alleviated by the additional scheduled cells. 
                    In this sense, MSF is a Scheduling Function that trades latency with energy by scheduling more cells than needed.
                    Setting MAX_NUM_CELLS to a value at least four times the recent maximum number of cells used in a slotframe is <bcp14>RECOMMENDED</bcp14>.
                    For example, a two packets/slotframe traffic load results in an average of four cells scheduled (two cells are used), using at least the value of double the number of scheduled cells (which is eight) as MAX_NUM_CELLS gives a good resolution on the cell usage calculation.
        </t>
        <t indent="0" pn="section-5.1-13">
                    In the case that a node has booted or has disappeared from the network, the cell reserved at the selected parent may be kept in the schedule forever.
                    A cleanup mechanism <bcp14>MUST</bcp14> be provided to resolve this issue.
                    The cleanup mechanism is implementation-specific.
                    The goal is to confirm that those negotiated cells are not used anymore by the associated neighbors and remove them from the schedule.
        </t>
      </section>
      <section anchor="sec_switching_parent" numbered="true" toc="include" removeInRFC="false" pn="section-5.2">
        <name slugifiedName="name-switching-parent">Switching Parent</name>
        <t indent="0" pn="section-5.2-1">
                    A node implementing MSF <bcp14>SHOULD</bcp14> implement the behavior described in this section.
        </t>
        <t indent="0" pn="section-5.2-2">
                    As part of its normal operation, RPL can have a node switch parent.
                    The procedure for switching from the old parent to the new parent is the following:
        </t>
        <ol spacing="normal" type="1" indent="adaptive" start="1" pn="section-5.2-3">
                    <li pn="section-5.2-3.1" derivedCounter="1.">The node counts the number of negotiated cells it has per slotframe to the old parent.</li>
          <li pn="section-5.2-3.2" derivedCounter="2.">The node triggers one or more 6P ADD commands to schedule the same number of negotiated cells with same cell options to the new parent.</li>
          <li pn="section-5.2-3.3" derivedCounter="3.">When that successfully completes, the node issues a 6P CLEAR command to its old parent.</li>
        </ol>
        <t indent="0" pn="section-5.2-4">
                   The type of negotiated cell that should be installed first depends on which traffic has the higher priority, upstream or downstream, which is application-specific and out of scope of MSF.
        </t>
      </section>
      <section anchor="sec_collision" numbered="true" toc="include" removeInRFC="false" pn="section-5.3">
        <name slugifiedName="name-handling-schedule-collision">Handling Schedule Collisions</name>
        <t indent="0" pn="section-5.3-1">
                    A node implementing MSF <bcp14>SHOULD</bcp14> implement the behavior described in this section.
                    Other algorithms for handling schedule collisions can be an alternative to the algorithm proposed in this section.
        </t>
        <t indent="0" pn="section-5.3-2">
                    Since scheduling is entirely distributed, there is a nonzero probability that two pairs of nearby neighbor nodes schedule a negotiated cell at the same [slotOffset,channelOffset] location in the TSCH schedule.
                    In that case, data exchanged by the two pairs may collide on that cell.
                    We call this case a "schedule collision".
        </t>
        <t indent="0" pn="section-5.3-3">
                    The node <bcp14>MUST</bcp14> maintain the following counters for each negotiated Tx cell to the selected parent:
        </t>
        <dl newline="false" indent="3" spacing="normal" pn="section-5.3-4">
          <dt pn="section-5.3-4.1">NumTx:</dt>
          <dd pn="section-5.3-4.2">
                        Counts the number of transmission attempts on that cell.
                        Each time the node attempts to transmit a frame on that cell, NumTx is incremented by exactly 1.
                    </dd>
          <dt pn="section-5.3-4.3">NumTxAck:</dt>
          <dd pn="section-5.3-4.4">
                        Counts the number of successful transmission attempts on that cell.
                        Each time the node receives an acknowledgment for a transmission attempt, NumTxAck is incremented by exactly 1.
                    </dd>
        </dl>
        <t indent="0" pn="section-5.3-5">
                    Since both NumTx and NumTxAck are initialized to 0, we necessarily have NumTxAck less than or equal to NumTx.
                    We call Packet Delivery Ratio (PDR) the ratio NumTxAck/NumTx and represent it as a percentage.
                    A cell with a PDR equal to 50% means that half of the frames transmitted are not acknowledged.
        </t>
        <t indent="0" pn="section-5.3-6">
                    Each time the node switches parent (or during the join process when the node selects a parent for the first time), both NumTx and NumTxAck <bcp14>MUST</bcp14> be reset to 0.
                    They increment over time, as the schedule is executed, and the node sends frames to that parent.
                    When NumTx reaches MAX_NUMTX, both NumTx and NumTxAck <bcp14>MUST</bcp14> be divided by 2.
                    MAX_NUMTX needs to be a power of two to avoid division error.
                    For example, when MAX_NUMTX is set to 256, and NumTx=255 and NumTxAck=127, the counters become NumTx=128 and NumTxAck=64 if one frame is sent to the parent with an acknowledgment received.
                    This operation does not change the value of the PDR but allows the counters to keep incrementing.
                    The value of MAX_NUMTX is implementation-specific.
        </t>
        <t indent="0" pn="section-5.3-7">
                    The key for detecting a schedule collision is that, if a node has several cells to the selected parent, all cells should exhibit the same PDR.
                    A cell that exhibits a PDR significantly lower than the others indicates that there are collisions on that cell.
        </t>
        <t indent="0" pn="section-5.3-8">
                    Every HOUSEKEEPINGCOLLISION_PERIOD, the node executes the following steps:
        </t>
        <ol spacing="normal" indent="adaptive" start="1" type="1" pn="section-5.3-9">
                    <li pn="section-5.3-9.1" derivedCounter="1.">
                        It computes, for each negotiated Tx cell with the parent (not for the autonomous cell), that cell's PDR.
                    </li>
          <li pn="section-5.3-9.2" derivedCounter="2.">
                        Any cell that hasn't yet had NumTx divided by 2 since it was last reset is skipped in steps 3 and 4.
                        This avoids triggering cell relocation when the values of NumTx and NumTxAck are not statistically significant yet.
                    </li>
          <li pn="section-5.3-9.3" derivedCounter="3.">
                        It identifies the cell with the highest PDR.
                    </li>
          <li pn="section-5.3-9.4" derivedCounter="4.">
                        For any other cell, it compares its PDR against that of the cell with the highest PDR.
                        If the subtraction difference between the PDR of the cell and the highest PDR is larger than RELOCATE_PDRTHRES, it triggers the relocation of that cell using a 6P RELOCATE command.
                    </li>
        </ol>
        <t indent="0" pn="section-5.3-10">
                    The RELOCATION for negotiated Rx cells is not supported by MSF. 
        </t>
      </section>
    </section>
    <section anchor="sec_signal" numbered="true" toc="include" removeInRFC="false" pn="section-6">
      <name slugifiedName="name-6p-signal-command">6P SIGNAL Command</name>
      <t indent="0" pn="section-6-1">
                The 6P SIGNAL command is not used by MSF.
      </t>
    </section>
    <section anchor="sec_sfid" numbered="true" toc="include" removeInRFC="false" pn="section-7">
      <name slugifiedName="name-scheduling-function-identif">Scheduling Function Identifier</name>
      <t indent="0" pn="section-7-1">
                The Scheduling Function Identifier (SFID) of MSF is 0.
                How the value of 0 was chosen is described in <xref target="sec_iana" format="default" sectionFormat="of" derivedContent="Section 17"/>.
      </t>
    </section>
    <section anchor="sec_celllist" numbered="true" toc="include" removeInRFC="false" pn="section-8">
      <name slugifiedName="name-rules-for-celllist">Rules for CellList</name>
      <t indent="0" pn="section-8-1">
                MSF uses two-step 6P Transactions exclusively.
                6P Transactions are only initiated by a node towards its parent.
                As a result, the cells to put in the CellList of a 6P ADD command, and in the candidate CellList of a RELOCATE command, are chosen by the node initiating the 6P Transaction.
                In both cases, the same rules apply:
      </t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-8-2">
        <li pn="section-8-2.1">The CellList is <bcp14>RECOMMENDED</bcp14> to have five or more cells.</li>
        <li pn="section-8-2.2">Each cell in the CellList <bcp14>MUST</bcp14> have a different slotOffset value.</li>
        <li pn="section-8-2.3">For each cell in the CellList, the node <bcp14>MUST NOT</bcp14> have any scheduled cell on the same slotOffset.</li>
        <li pn="section-8-2.4">The slotOffset value of any cell in the CellList <bcp14>MUST NOT</bcp14> be the same as the slotOffset of the minimal cell (slotOffset=0).</li>
        <li pn="section-8-2.5">The slotOffset    of a cell in the CellList <bcp14>SHOULD</bcp14> be randomly and uniformly chosen among all the slotOffset values that satisfy the restrictions above.</li>
        <li pn="section-8-2.6">The channelOffset of a cell in the CellList <bcp14>SHOULD</bcp14> be randomly and uniformly chosen from [0..numFrequencies], where numFrequencies represents the number of frequencies a node can communicate on.</li>
      </ul>
      <t indent="0" pn="section-8-3">
                As a consequence of random cell selection, there is a nonzero chance that nodes in the vicinity have installed cells with same slotOffset and channelOffset.
                An implementer <bcp14>MAY</bcp14> implement a strategy to monitor the candidate cells before adding them in CellList to avoid collision.
                For example, a node <bcp14>MAY</bcp14> maintain a candidate cell pool for the CellList.
                The candidate cells in the pool are preconfigured as Rx cells to promiscuously listen to detect transmissions on those cells.
                If transmissions that rely on <xref target="IEEE802154" format="default" sectionFormat="of" derivedContent="IEEE802154"/> are observed on one cell over multiple iterations of the schedule, that cell is probably used by a TSCH neighbor.
                It is moved out from the pool, and a new cell is selected as a candidate cell.
                The cells in CellList are picked from the candidate pool directly when required.
      </t>
    </section>
    <section anchor="sec_timeout" numbered="true" toc="include" removeInRFC="false" pn="section-9">
      <name slugifiedName="name-6p-timeout-value">6P Timeout Value</name>
      <t indent="0" pn="section-9-1">
                The timeout value is calculated for the worst case that a 6P response is received, which means the 6P response is sent out successfully at the very latest retransmission.
                And for each retransmission, it backs off with largest value.
                Hence the 6P timeout value is calculated as ((2<sup>MAXBE</sup>) - 1) * MAXRETRIES * SLOTFRAME_LENGTH, where:
      </t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-9-2">
        <li pn="section-9-2.1">MAXBE, defined in <xref target="IEEE802154" format="default" sectionFormat="of" derivedContent="IEEE802154"/>,  is the maximum backoff exponent used.</li>
        <li pn="section-9-2.2">MAXRETRIES, defined in <xref target="IEEE802154" format="default" sectionFormat="of" derivedContent="IEEE802154"/>, is the maximum retransmission times.</li>
        <li pn="section-9-2.3">SLOTFRAME_LENGTH represents the length of slotframe.</li>
      </ul>
    </section>
    <section anchor="sec_ordering" numbered="true" toc="include" removeInRFC="false" pn="section-10">
      <name slugifiedName="name-rule-for-ordering-cells">Rule for Ordering Cells</name>
      <t indent="0" pn="section-10-1">
                Cells are ordered by slotOffset first, channelOffset second.
      </t>
      <t indent="0" pn="section-10-2">
                The following sequence is correctly ordered (each element represents the [slotOffset,channelOffset] of a cell in the schedule):
      </t>
      <t indent="0" pn="section-10-3">
                [1,3],[1,4],[2,0],[5,3],[6,0],[6,3],[7,9]
      </t>
    </section>
    <section anchor="sec_metadata" numbered="true" toc="include" removeInRFC="false" pn="section-11">
      <name slugifiedName="name-meaning-of-the-metadata-fie">Meaning of the Metadata Field</name>
      <t indent="0" pn="section-11-1">
                The Metadata field is not used by MSF.
      </t>
    </section>
    <section anchor="sec_error" numbered="true" toc="include" removeInRFC="false" pn="section-12">
      <name slugifiedName="name-6p-error-handling">6P Error Handling</name>
      <t indent="0" pn="section-12-1">
                <xref target="RFC8480" section="6.2.4" sectionFormat="of" format="default" derivedLink="https://rfc-editor.org/rfc/rfc8480#section-6.2.4" derivedContent="RFC8480"/> lists the 6P return codes.
                <xref target="tab_error" format="default" sectionFormat="of" derivedContent="Table 1"/> lists the same error codes and the behavior a node implementing MSF <bcp14>SHOULD</bcp14> follow.
      </t>
      <table anchor="tab_error" align="center" pn="table-1">
        <name slugifiedName="name-recommended-behavior-for-ea">Recommended Behavior for Each 6P Error Code</name>
        <thead>
          <tr>
            <th align="left" colspan="1" rowspan="1">Code</th>
            <th align="left" colspan="1" rowspan="1">
              <bcp14>RECOMMENDED</bcp14> Behavior</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_SUCCESS
		    </td>
            <td align="left" colspan="1" rowspan="1"> nothing</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_EOL
		    </td>
            <td align="left" colspan="1" rowspan="1"> nothing</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_ERR
		    </td>
            <td align="left" colspan="1" rowspan="1"> quarantine</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_RESET
		    </td>
            <td align="left" colspan="1" rowspan="1"> quarantine </td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_ERR_VERSION</td>
            <td align="left" colspan="1" rowspan="1"> quarantine</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_ERR_SFID</td>
            <td align="left" colspan="1" rowspan="1"> quarantine</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_ERR_SEQNUM</td>
            <td align="left" colspan="1" rowspan="1"> clear</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_ERR_CELLLIST </td>
            <td align="left" colspan="1" rowspan="1"> clear</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_ERR_BUSY</td>
            <td align="left" colspan="1" rowspan="1"> waitretry</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RC_ERR_LOCKED</td>
            <td align="left" colspan="1" rowspan="1"> waitretry</td>
          </tr>
        </tbody>
      </table>
      <t indent="0" pn="section-12-3">
                The meaning of each behavior from <xref target="tab_error" format="default" sectionFormat="of" derivedContent="Table 1"/> is:
      </t>
      <dl newline="false" indent="3" spacing="normal" pn="section-12-4">
        <dt pn="section-12-4.1">nothing:</dt>
        <dd pn="section-12-4.2">
                    Indicates that this return code is not an error.
                    No error handling behavior is triggered.
                </dd>
        <dt pn="section-12-4.3">clear:</dt>
        <dd pn="section-12-4.4">
                    Abort the 6P Transaction.
                    Issue a 6P CLEAR command to that neighbor (this command may fail at the link layer).
                    Remove all cells scheduled with that neighbor from the local schedule.
                </dd>
        <dt pn="section-12-4.5">quarantine:</dt>
        <dd pn="section-12-4.6">
                    Same behavior as for "clear".
                    In addition, remove the node from the neighbor and routing tables.
                    Place the node's identifier in a quarantine list for QUARANTINE_DURATION.
                    When in quarantine, drop all frames received from that node.
                </dd>
        <dt pn="section-12-4.7">waitretry:</dt>
        <dd pn="section-12-4.8">
                    Abort the 6P Transaction.
                    Wait for a duration randomly and uniformly chosen from [WAIT_DURATION_MIN,WAIT_DURATION_MAX].
                    Retry the same transaction.
                </dd>
      </dl>
    </section>
    <section anchor="sec_inconsistency" numbered="true" toc="include" removeInRFC="false" pn="section-13">
      <name slugifiedName="name-schedule-inconsistency-hand">Schedule Inconsistency Handling</name>
      <t indent="0" pn="section-13-1">
                The behavior when schedule inconsistency is detected is explained in <xref target="tab_error" format="default" sectionFormat="of" derivedContent="Table 1"/>, for 6P return code RC_ERR_SEQNUM.
      </t>
    </section>
    <section anchor="sec_constants" numbered="true" toc="include" removeInRFC="false" pn="section-14">
      <name slugifiedName="name-msf-constants">MSF Constants</name>
      <t indent="0" pn="section-14-1">
                <xref target="tab_constants" format="default" sectionFormat="of" derivedContent="Table 2"/> lists MSF constants and their <bcp14>RECOMMENDED</bcp14> values.
      </t>
      <table anchor="tab_constants" align="center" pn="table-2">
        <name slugifiedName="name-msf-constants-and-their-rec">MSF Constants and Their <bcp14>RECOMMENDED</bcp14> Values</name>
        <thead>
          <tr>
            <th align="left" colspan="1" rowspan="1">Name</th>
            <th align="left" colspan="1" rowspan="1">
              <bcp14>RECOMMENDED</bcp14> value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="left" colspan="1" rowspan="1"> SLOTFRAME_LENGTH</td>
            <td align="left" colspan="1" rowspan="1">101 slots</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> NUM_CH_OFFSET </td>
            <td align="left" colspan="1" rowspan="1">16</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> MAX_NUM_CELLS</td>
            <td align="left" colspan="1" rowspan="1">100</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> LIM_NUMCELLSUSED_HIGH</td>
            <td align="left" colspan="1" rowspan="1">75</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> LIM_NUMCELLSUSED_LOW </td>
            <td align="left" colspan="1" rowspan="1">25</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> MAX_NUMTX</td>
            <td align="left" colspan="1" rowspan="1">256</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> HOUSEKEEPINGCOLLISION_PERIOD</td>
            <td align="left" colspan="1" rowspan="1">1 min</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> RELOCATE_PDRTHRES</td>
            <td align="left" colspan="1" rowspan="1">50 %</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> QUARANTINE_DURATION</td>
            <td align="left" colspan="1" rowspan="1">5 min</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> WAIT_DURATION_MIN</td>
            <td align="left" colspan="1" rowspan="1">30 s</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> WAIT_DURATION_MAX </td>
            <td align="left" colspan="1" rowspan="1">60 s</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section anchor="sec_stats" numbered="true" toc="include" removeInRFC="false" pn="section-15">
      <name slugifiedName="name-msf-statistics">MSF Statistics</name>
      <t indent="0" pn="section-15-1">
                <xref target="tab_stats" format="default" sectionFormat="of" derivedContent="Table 3"/> lists MSF statistics and their <bcp14>RECOMMENDED</bcp14> widths.
      </t>
      <table anchor="tab_stats" align="center" pn="table-3">
        <name slugifiedName="name-msf-statistics-and-their-re">MSF Statistics and Their <bcp14>RECOMMENDED</bcp14> Widths</name>
        <thead>
          <tr>
            <th align="left" colspan="1" rowspan="1">Name</th>
            <th align="left" colspan="1" rowspan="1">
              <bcp14>RECOMMENDED</bcp14> width</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="left" colspan="1" rowspan="1"> NumCellsElapsed</td>
            <td align="left" colspan="1" rowspan="1">1 byte</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> NumCellsUsed</td>
            <td align="left" colspan="1" rowspan="1">1 byte</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> NumTx</td>
            <td align="left" colspan="1" rowspan="1">1 byte</td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1"> NumTxAck</td>
            <td align="left" colspan="1" rowspan="1">1 byte</td>
          </tr>
        </tbody>
      </table>
    </section>
    <section anchor="sec_security" numbered="true" toc="include" removeInRFC="false" pn="section-16">
      <name slugifiedName="name-security-considerations">Security Considerations</name>
      <t indent="0" pn="section-16-1">
                MSF defines a series of "rules" for the node to follow.
                It triggers several actions that are carried out by the protocols defined in the following specifications:
                "<xref target="RFC8180" format="title" sectionFormat="of" derivedContent="Minimal IPv6 over the TSCH Mode of IEEE 802.15.4e (6TiSCH) Configuration"/>" <xref target="RFC8180" format="default" sectionFormat="of" derivedContent="RFC8180"/>,
                "<xref target="RFC8480" format="title" sectionFormat="of" derivedContent="6TiSCH Operation Sublayer (6top) Protocol (6P)"/>" <xref target="RFC8480" format="default" sectionFormat="of" derivedContent="RFC8480"/>, and
                "<xref target="RFC9031" format="title" sectionFormat="of" derivedContent="Constrained Join Protocol (CoJP) for 6TiSCH"/>" <xref target="RFC9031" format="default" sectionFormat="of" derivedContent="RFC9031"/>.
                Confidentiality and authentication of MSF control and data traffic are provided by these specifications whose security considerations continue to apply to MSF.
                In particular, MSF does not define a new protocol or packet format.
      </t>
      <t indent="0" pn="section-16-2">
                MSF uses autonomous cells for initial bootstrap and the transport of join traffic.
                Autonomous cells are computed as a hash of nodes' EUI-64 addresses.
                This makes the coordinates of autonomous cell an easy target for an attacker, as EUI-64 addresses are visible on the wire and are not encrypted by the link-layer security mechanism.
                With the coordinates of autonomous cells available, the attacker can launch a selective jamming attack against any node's AutoRxCell.
                If the attacker targets a node acting as a JP, it can prevent pledges from using that JP to join the network.
                The pledge detects such a situation through the absence of a link-layer acknowledgment for its Join Request.
                As it is expected that each pledge will have more than one JP available to join the network, one available countermeasure for the pledge is to pseudorandomly select a new JP when the link to the previous JP appears bad.
                Such a strategy alleviates the issue of the attacker randomly jamming to disturb the network but does not help in the case the attacker is targeting a particular pledge.
                In that case, the attacker can jam the AutoRxCell of the pledge in order to prevent it from receiving the join response.
                This situation should be detected through the absence of a particular node from the network and handled by the network administrator through out-of-band means.
      </t>
      <t indent="0" pn="section-16-3">
                MSF adapts to traffic containing packets from the IP layer. 
                It is possible that the IP packet has a nonzero DSCP (Differentiated Services Code Point) <xref target="RFC2474" format="default" sectionFormat="of" derivedContent="RFC2474"/> value in its IPv6 header.
                The decision how to handle that packet belongs to the upper layer and is out of scope of MSF.
                As long as the decision is made to hand over to MAC layer to transmit, MSF will take that packet into account when adapting to traffic.
      </t>
      <t indent="0" pn="section-16-4">
                Note that nonzero DSCP values may imply that the traffic originated at unauthenticated pledges (see <xref target="RFC9031" format="default" sectionFormat="of" derivedContent="RFC9031"/>).
                The implementation at the IPv6 layer <bcp14>SHOULD</bcp14> rate limit this join traffic before it is passed to the 6top sublayer where MSF can observe it.
                If there is no rate limit for join traffic, intermediate nodes in the 6TiSCH network may be prone to a resource exhaustion attack, with the attacker injecting unauthenticated traffic from the network edge.
                The assumption is that the rate-limiting function is aware of the available bandwidth in the 6top Layer 3 bundle(s) towards a next hop, not directly from MSF, but from an interaction with the 6top sublayer that ultimately manages the bundles under MSF's guidance.
                How this rate limit is implemented is out of scope of MSF.
      </t>
    </section>
    <section anchor="sec_iana" numbered="true" toc="include" removeInRFC="false" pn="section-17">
      <name slugifiedName="name-iana-considerations">IANA Considerations</name>
      <section anchor="sec_iana_sfid" numbered="true" toc="include" removeInRFC="false" pn="section-17.1">
        <name slugifiedName="name-msf-scheduling-function-ide">MSF Scheduling Function Identifiers</name>
        <t indent="0" pn="section-17.1-1">
                    This document adds the following number to the
                    "6P Scheduling Function Identifiers" subregistry,
                    part of the "IPv6 Over the TSCH Mode of IEEE 802.15.4 (6TiSCH)" registry,
                    as defined by <xref target="RFC8480" format="default" sectionFormat="of" derivedContent="RFC8480"/>:
        </t>
        <table anchor="fig_iana_sfid" align="center" pn="table-4">
          <name slugifiedName="name-new-sfid-in-the-6p-scheduli">New SFID in the "6P Scheduling Function Identifiers" Subregistry</name>
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">SFID</th>
              <th align="left" colspan="1" rowspan="1">Name</th>
              <th align="left" colspan="1" rowspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">0</td>
              <td align="left" colspan="1" rowspan="1">Minimal Scheduling Function (MSF)</td>
              <td align="left" colspan="1" rowspan="1">RFC 9033</td>
            </tr>
          </tbody>
        </table>
        <t indent="0" pn="section-17.1-3">
                    The SFID was chosen from the range 0-127, which has the registration procedure of IETF Review or IESG Approval <xref target="RFC8126" format="default" sectionFormat="of" derivedContent="RFC8126"/>.
        </t>
      </section>
    </section>
  </middle>
  <back>
    <displayreference target="I-D.ietf-6tisch-dtsecurity-zerotouch-join" to="ZEROTOUCH-JOIN"/>
    <references pn="section-18">
      <name slugifiedName="name-references">References</name>
      <references pn="section-18.1">
        <name slugifiedName="name-normative-references">Normative References</name>
        <reference anchor="IEEE802154" target="https://ieeexplore.ieee.org/document/7460875" quoteTitle="true" derivedAnchor="IEEE802154">
          <front>
            <title>IEEE Standard for Low-Rate Wireless Networks</title>
            <author>
              <organization showOnFrontPage="true">IEEE</organization>
            </author>
            <date month="April" year="2016"/>
          </front>
          <seriesInfo name="IEEE Standard" value="802.15.4-2015"/>
          <seriesInfo name="DOI" value="10.1109/IEEESTD.2016.7460875"/>
        </reference>
        <reference anchor="RFC2119" target="https://www.rfc-editor.org/info/rfc2119" quoteTitle="true" derivedAnchor="RFC2119">
          <front>
            <title>Key words for use in RFCs to Indicate Requirement Levels</title>
            <author initials="S." surname="Bradner" fullname="S. Bradner">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="1997" month="March"/>
            <abstract>
              <t indent="0">In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="2119"/>
          <seriesInfo name="DOI" value="10.17487/RFC2119"/>
        </reference>
        <reference anchor="RFC2474" target="https://www.rfc-editor.org/info/rfc2474" quoteTitle="true" derivedAnchor="RFC2474">
          <front>
            <title>Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</title>
            <author initials="K." surname="Nichols" fullname="K. Nichols">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="S." surname="Blake" fullname="S. Blake">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="F." surname="Baker" fullname="F. Baker">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="D." surname="Black" fullname="D. Black">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="1998" month="December"/>
            <abstract>
              <t indent="0">This document defines the IP header field, called the DS (for differentiated services) field.  [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="2474"/>
          <seriesInfo name="DOI" value="10.17487/RFC2474"/>
        </reference>
        <reference anchor="RFC6550" target="https://www.rfc-editor.org/info/rfc6550" quoteTitle="true" derivedAnchor="RFC6550">
          <front>
            <title>RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks</title>
            <author initials="T." surname="Winter" fullname="T. Winter" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="P." surname="Thubert" fullname="P. Thubert" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="A." surname="Brandt" fullname="A. Brandt">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Hui" fullname="J. Hui">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Kelsey" fullname="R. Kelsey">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="P." surname="Levis" fullname="P. Levis">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="K." surname="Pister" fullname="K. Pister">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Struik" fullname="R. Struik">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="JP." surname="Vasseur" fullname="JP. Vasseur">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="R." surname="Alexander" fullname="R. Alexander">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2012" month="March"/>
            <abstract>
              <t indent="0">Low-Power and Lossy Networks (LLNs) are a class of network in which both the routers and their interconnect are constrained.  LLN routers typically operate with constraints on processing power, memory, and energy (battery power).  Their interconnects are characterized by high loss rates, low data rates, and instability.  LLNs are comprised of anything from a few dozen to thousands of routers.  Supported traffic flows include point-to-point (between devices inside the LLN), point-to-multipoint (from a central control point to a subset of devices inside the LLN), and multipoint-to-point (from devices inside the LLN towards a central control point).  This document specifies the IPv6 Routing Protocol for Low-Power and Lossy Networks (RPL), which provides a mechanism whereby multipoint-to-point traffic from devices inside the LLN towards a central control point as well as point-to-multipoint traffic from the central control point to the devices inside the LLN are supported.  Support for point-to-point traffic is also available.  [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6550"/>
          <seriesInfo name="DOI" value="10.17487/RFC6550"/>
        </reference>
        <reference anchor="RFC8126" target="https://www.rfc-editor.org/info/rfc8126" quoteTitle="true" derivedAnchor="RFC8126">
          <front>
            <title>Guidelines for Writing an IANA Considerations Section in RFCs</title>
            <author initials="M." surname="Cotton" fullname="M. Cotton">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="B." surname="Leiba" fullname="B. Leiba">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="T." surname="Narten" fullname="T. Narten">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2017" month="June"/>
            <abstract>
              <t indent="0">Many protocols make use of points of extensibility that use constants to identify various protocol parameters.  To ensure that the values in these fields do not have conflicting uses and to promote interoperability, their allocations are often coordinated by a central record keeper.  For IETF protocols, that role is filled by the Internet Assigned Numbers Authority (IANA).</t>
              <t indent="0">To make assignments in a given registry prudently, guidance describing the conditions under which new values should be assigned, as well as when and how modifications to existing values can be made, is needed.  This document defines a framework for the documentation of these guidelines by specification authors, in order to assure that the provided guidance for the IANA Considerations is clear and addresses the various issues that are likely in the operation of a registry.</t>
              <t indent="0">This is the third edition of this document; it obsoletes RFC 5226.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="26"/>
          <seriesInfo name="RFC" value="8126"/>
          <seriesInfo name="DOI" value="10.17487/RFC8126"/>
        </reference>
        <reference anchor="RFC8174" target="https://www.rfc-editor.org/info/rfc8174" quoteTitle="true" derivedAnchor="RFC8174">
          <front>
            <title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
            <author initials="B." surname="Leiba" fullname="B. Leiba">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2017" month="May"/>
            <abstract>
              <t indent="0">RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="8174"/>
          <seriesInfo name="DOI" value="10.17487/RFC8174"/>
        </reference>
        <reference anchor="RFC8180" target="https://www.rfc-editor.org/info/rfc8180" quoteTitle="true" derivedAnchor="RFC8180">
          <front>
            <title>Minimal IPv6 over the TSCH Mode of IEEE 802.15.4e (6TiSCH) Configuration</title>
            <author initials="X." surname="Vilajosana" fullname="X. Vilajosana" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="K." surname="Pister" fullname="K. Pister">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="T." surname="Watteyne" fullname="T. Watteyne">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2017" month="May"/>
            <abstract>
              <t indent="0">This document describes a minimal mode of operation for an IPv6 over the TSCH mode of IEEE 802.15.4e (6TiSCH) network.  This minimal mode of operation specifies the baseline set of protocols that need to be supported and the recommended configurations and modes of operation sufficient to enable a 6TiSCH functional network.  6TiSCH provides IPv6 connectivity over a Time-Slotted Channel Hopping (TSCH) mesh composed of IEEE Std 802.15.4 TSCH links.  This minimal mode uses a collection of protocols with the respective configurations, including the IPv6 Low-Power Wireless Personal Area Network (6LoWPAN) framework, enabling interoperable IPv6 connectivity over IEEE Std 802.15.4 TSCH.  This minimal configuration provides the necessary bandwidth for network and security bootstrapping and defines the proper link between the IETF protocols that interface to IEEE Std 802.15.4 TSCH.  This minimal mode of operation should be implemented by all 6TiSCH-compliant devices.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="210"/>
          <seriesInfo name="RFC" value="8180"/>
          <seriesInfo name="DOI" value="10.17487/RFC8180"/>
        </reference>
        <reference anchor="RFC8480" target="https://www.rfc-editor.org/info/rfc8480" quoteTitle="true" derivedAnchor="RFC8480">
          <front>
            <title>6TiSCH Operation Sublayer (6top) Protocol (6P)</title>
            <author initials="Q." surname="Wang" fullname="Q. Wang" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="X." surname="Vilajosana" fullname="X. Vilajosana">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="T." surname="Watteyne" fullname="T. Watteyne">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2018" month="November"/>
            <abstract>
              <t indent="0">This document defines the "IPv6 over the TSCH mode of IEEE 802.15.4e" (6TiSCH) Operation Sublayer (6top) Protocol (6P), which enables distributed scheduling in 6TiSCH networks.  6P allows neighbor nodes to add/delete Time-Slotted Channel Hopping (TSCH) cells to/on one another.  6P is part of the 6TiSCH Operation Sublayer (6top), the layer just above the IEEE Std 802.15.4 TSCH Medium Access Control layer.  6top is composed of one or more Scheduling Functions (SFs) and the 6top Protocol defined in this document.  A 6top SF decides when to add/delete cells, and it triggers 6P Transactions.  The definition of SFs is out of scope for this document; however, this document provides the requirements for an SF.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8480"/>
          <seriesInfo name="DOI" value="10.17487/RFC8480"/>
        </reference>
        <reference anchor="RFC9030" target="https://www.rfc-editor.org/info/rfc9030" quoteTitle="true" derivedAnchor="RFC9030">
          <front>
            <title>An Architecture for IPv6 over the Time-Slotted Channel Hopping Mode of IEEE 802.15.4 (6TiSCH)</title>
            <author initials="P" surname="Thubert" fullname="Pascal Thubert" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <date month="May" year="2021"/>
          </front>
          <seriesInfo name="RFC" value="9030"/>
          <seriesInfo name="DOI" value="10.17487/RFC9030"/>
        </reference>
        <reference anchor="RFC9031" target="https://www.rfc-editor.org/info/rfc9031" quoteTitle="true" derivedAnchor="RFC9031">
          <front>
            <title>Constrained Join Protocol (CoJP) for 6TiSCH</title>
            <author initials="M" surname="Vučinić" fullname="Mališa Vučinić" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J" surname="Simon" fullname="Jonathan Simon">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="K" surname="Pister" fullname="Kris Pister">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="M" surname="Richardson" fullname="Michael Richardson">
              <organization showOnFrontPage="true"/>
            </author>
            <date month="May" year="2021"/>
          </front>
          <seriesInfo name="RFC" value="9031"/>
          <seriesInfo name="DOI" value="10.17487/RFC9031"/>
        </reference>
        <reference anchor="RFC9032" target="https://www.rfc-editor.org/info/rfc9032" quoteTitle="true" derivedAnchor="RFC9032">
          <front>
            <title>Encapsulation of 6TiSCH Join and Enrollment Information Elements</title>
            <author initials="D" surname="Dujovne" fullname="Diego Dujovne" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="M" surname="Richardson" fullname="Michael Richardson">
              <organization showOnFrontPage="true"/>
            </author>
            <date month="May" year="2021"/>
          </front>
          <seriesInfo name="RFC" value="9032"/>
          <seriesInfo name="DOI" value="10.17487/RFC9032"/>
        </reference>
        <reference anchor="SAX-DASFAA" quoteTitle="true" target="https://doi.org/10.1142/9789812819536_0023" derivedAnchor="SAX-DASFAA">
          <front>
            <title>Performance in Practice of String Hashing Functions</title>
            <author initials="M.V." surname="Ramakrishna"/>
            <author initials="J" surname="Zobel"/>
            <date year="1997"/>
          </front>
          <refcontent>DASFAA</refcontent>
          <seriesInfo name="DOI" value="10.1142/9789812819536_0023"/>
        </reference>
      </references>
      <references pn="section-18.2">
        <name slugifiedName="name-informative-references">Informative References</name>
        <reference anchor="RFC6206" target="https://www.rfc-editor.org/info/rfc6206" quoteTitle="true" derivedAnchor="RFC6206">
          <front>
            <title>The Trickle Algorithm</title>
            <author initials="P." surname="Levis" fullname="P. Levis">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="T." surname="Clausen" fullname="T. Clausen">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Hui" fullname="J. Hui">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="O." surname="Gnawali" fullname="O. Gnawali">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="J." surname="Ko" fullname="J. Ko">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2011" month="March"/>
            <abstract>
              <t indent="0">The Trickle algorithm allows nodes in a lossy shared medium (e.g., low-power and lossy networks) to exchange information in a highly robust, energy efficient, simple, and scalable manner.  Dynamically adjusting transmission windows allows Trickle to spread new information on the scale of link-layer transmission times while sending only a few messages per hour when information does not change.  A simple suppression mechanism and transmission point selection allow Trickle's communication rate to scale logarithmically with density.  This document describes the Trickle algorithm and considerations in its use.  [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6206"/>
          <seriesInfo name="DOI" value="10.17487/RFC6206"/>
        </reference>
        <reference anchor="RFC7554" target="https://www.rfc-editor.org/info/rfc7554" quoteTitle="true" derivedAnchor="RFC7554">
          <front>
            <title>Using IEEE 802.15.4e Time-Slotted Channel Hopping (TSCH) in the Internet of Things (IoT): Problem Statement</title>
            <author initials="T." surname="Watteyne" fullname="T. Watteyne" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="M." surname="Palattella" fullname="M. Palattella">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="L." surname="Grieco" fullname="L. Grieco">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2015" month="May"/>
            <abstract>
              <t indent="0">This document describes the environment, problem statement, and goals for using the Time-Slotted Channel Hopping (TSCH) Medium Access Control (MAC) protocol of IEEE 802.14.4e in the context of Low-Power and Lossy Networks (LLNs).  The set of goals enumerated in this document form an initial set only.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7554"/>
          <seriesInfo name="DOI" value="10.17487/RFC7554"/>
        </reference>
        <reference anchor="RFC8505" target="https://www.rfc-editor.org/info/rfc8505" quoteTitle="true" derivedAnchor="RFC8505">
          <front>
            <title>Registration Extensions for IPv6 over Low-Power Wireless Personal Area Network (6LoWPAN) Neighbor Discovery</title>
            <author initials="P." surname="Thubert" fullname="P. Thubert" role="editor">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="E." surname="Nordmark" fullname="E. Nordmark">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="S." surname="Chakrabarti" fullname="S. Chakrabarti">
              <organization showOnFrontPage="true"/>
            </author>
            <author initials="C." surname="Perkins" fullname="C. Perkins">
              <organization showOnFrontPage="true"/>
            </author>
            <date year="2018" month="November"/>
            <abstract>
              <t indent="0">This specification updates RFC 6775 -- the Low-Power Wireless Personal Area Network (6LoWPAN) Neighbor Discovery specification -- to clarify the role of the protocol as a registration technique and simplify the registration operation in 6LoWPAN routers, as well as to provide enhancements to the registration capabilities and mobility detection for different network topologies, including the Routing Registrars performing routing for host routes and/or proxy Neighbor Discovery in a low-power network.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8505"/>
          <seriesInfo name="DOI" value="10.17487/RFC8505"/>
        </reference>
        <reference anchor="I-D.ietf-6tisch-dtsecurity-zerotouch-join" quoteTitle="true" target="https://tools.ietf.org/html/draft-ietf-6tisch-dtsecurity-zerotouch-join-04" derivedAnchor="ZEROTOUCH-JOIN">
          <front>
            <title>6tisch Zero-Touch Secure Join protocol</title>
            <author fullname="Michael Richardson">
              <organization showOnFrontPage="true">Sandelman Software Works</organization>
            </author>
            <date month="July" day="8" year="2019"/>
            <abstract>
              <t indent="0">   This document describes a Zero-touch Secure Join (ZSJ) mechanism to
   enroll a new device (the "pledge") into a IEEE802.15.4 TSCH network
   using the 6tisch signaling mechanisms.  The resulting device will
   obtain a domain specific credential that can be used with either
   802.15.9 per-host pair keying protocols, or to obtain the network-
   wide key from a coordinator.  The mechanism describe here is an
   augmentation to the one-touch mechanism described in
   [I-D.ietf-6tisch-minimal-security], and is a profile of the
   constrained voucher mechanism [I-D.ietf-anima-constrained-voucher].

              </t>
            </abstract>
          </front>
          <seriesInfo name="Internet-Draft" value="draft-ietf-6tisch-dtsecurity-zerotouch-join-04"/>
          <format type="TXT" target="https://www.ietf.org/archive/id/draft-ietf-6tisch-dtsecurity-zerotouch-join-04.txt"/>
          <refcontent>Work in Progress</refcontent>
        </reference>
      </references>
    </references>
    <section anchor="sec_hash_function" numbered="true" toc="include" removeInRFC="false" pn="section-appendix.a">
      <name slugifiedName="name-example-implementation-of-t">Example Implementation of the SAX Hash Function</name>
      <t indent="0" pn="section-appendix.a-1">
                To support interoperability, this section provides an example  implementation of the SAX hash function <xref target="SAX-DASFAA" format="default" sectionFormat="of" derivedContent="SAX-DASFAA"/>.
                The input parameters of the function are:
      </t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-appendix.a-2">
        <li pn="section-appendix.a-2.1">T, which is the hashing table length.</li>
        <li pn="section-appendix.a-2.2">c, which is the characters of string s, to be hashed.</li>
      </ul>
      <t indent="0" pn="section-appendix.a-3">
                In MSF, the T is replaced by the length of slotframe 1.
                String s is replaced by the node EUI-64 address. The characters of the string, c0 through c7, are the eight bytes of the EUI-64 address.
      </t>
      <t indent="0" pn="section-appendix.a-4">
                The SAX hash function requires shift operation, which is defined as follow:
      </t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-appendix.a-5">
        <li pn="section-appendix.a-5.1">L_shift(v,b), which refers to the left shift of variable v by b bits</li>
        <li pn="section-appendix.a-5.2">R_shift(v,b), which refers to the right shift of variable v by b bits</li>
      </ul>
      <t indent="0" pn="section-appendix.a-6">
                The steps to calculate the hash value of SAX hash function are:
      </t>
      <ol spacing="normal" indent="adaptive" start="1" type="1" pn="section-appendix.a-7">
                <li anchor="sax_step1" pn="section-appendix.a-7.1" derivedCounter="1.">Initialize variable h, which is the intermediate hash value, to h0 and variable i, which is the index of the bytes of the EUI-64 address, to 0.</li>
        <li anchor="sax_step2" pn="section-appendix.a-7.2" derivedCounter="2.">Sum the value of L_shift(h,l_bit), R_shift(h,r_bit), and ci.</li>
        <li anchor="sax_step3" pn="section-appendix.a-7.3" derivedCounter="3.">Calculate the result of the exclusive OR between the sum value in <xref target="sax_step2" format="none" sectionFormat="of" derivedContent="">Step 2</xref> and h.</li>
        <li anchor="sax_step4" pn="section-appendix.a-7.4" derivedCounter="4.">Modulo the result of <xref target="sax_step3" format="none" sectionFormat="of" derivedContent="">Step 3</xref> by T.</li>
        <li anchor="sax_step5" pn="section-appendix.a-7.5" derivedCounter="5.">Assign the result of <xref target="sax_step4" format="none" sectionFormat="of" derivedContent="">Step 4</xref> to h.</li>
        <li anchor="sax_step6" pn="section-appendix.a-7.6" derivedCounter="6.">Increase i by 1.</li>
        <li anchor="sax_step7" pn="section-appendix.a-7.7" derivedCounter="7.">Repeat <xref target="sax_step2" format="none" sectionFormat="of" derivedContent="">Step 2</xref> to <xref target="sax_step6" format="none" sectionFormat="of" derivedContent="">Step 6</xref> until i reaches to 8. </li>
      </ol>
      <t indent="0" pn="section-appendix.a-8">
                The value of variable h is the hash value of the SAX hash function.
      </t>
      <t indent="0" pn="section-appendix.a-9">
                The values of h0, l_bit, and r_bit in <xref target="sax_step1" format="none" sectionFormat="of" derivedContent="">Step 1</xref> and <xref target="sax_step2" format="none" sectionFormat="of" derivedContent="">Step 2</xref> are configured as: 
      </t>
      <t indent="6" pn="section-appendix.a-10">h0 = 0</t>
      <t indent="6" pn="section-appendix.a-11">l_bit = 0</t>
      <t indent="6" pn="section-appendix.a-12">r_bit = 1</t>
      <t indent="0" pn="section-appendix.a-13">
                The appropriate values of l_bit and r_bit could vary depending on the set of nodes' EUI-64 address.
                How to find those values is out of the scope of this specification. 
      </t>
    </section>
    <section anchor="sec_contributors" numbered="false" removeInRFC="false" toc="include" pn="section-appendix.b">
      <name slugifiedName="name-contributors">Contributors</name>
      <contact fullname="Beshr Al Nahas">
        <organization showOnFrontPage="true">Chalmers University</organization>
        <address>
          <email>beshr@chalmers.se</email>
        </address>
      </contact>
      <contact fullname="Olaf Landsiedel">
        <organization showOnFrontPage="true">Chalmers University</organization>
        <address>
          <email>olafl@chalmers.se</email>
        </address>
      </contact>
      <contact fullname="Yasuyuki Tanaka">
        <organization showOnFrontPage="true">Toshiba</organization>
        <address>
          <email>yatch1.tanaka@toshiba.co.jp</email>
        </address>
      </contact>
    </section>
    <section anchor="authors-addresses" numbered="false" removeInRFC="false" toc="include" pn="section-appendix.c">
      <name slugifiedName="name-authors-addresses">Authors' Addresses</name>
      <author initials="T" surname="Chang" fullname="Tengfei Chang" role="editor">
        <organization showOnFrontPage="true">Inria</organization>
        <address>
          <postal>
            <street>2 rue Simone Iff</street>
            <city>Paris</city>
            <code>75012</code>
            <country>France</country>
          </postal>
          <email>tengfei.chang@gmail.com</email>
        </address>
      </author>
      <author initials="M." surname="Vučinić" fullname="Mališa Vučinić">
        <organization showOnFrontPage="true">Inria</organization>
        <address>
          <postal>
            <street>2 rue Simone Iff</street>
            <city>Paris</city>
            <code>75012</code>
            <country>France</country>
          </postal>
          <email>malisa.vucinic@inria.fr</email>
        </address>
      </author>
      <author initials="X" surname="Vilajosana" fullname="Xavier Vilajosana">
        <organization showOnFrontPage="true">Universitat Oberta de Catalunya</organization>
        <address>
          <postal>
            <street>156 Rambla Poblenou</street>
            <city>Barcelona</city>
            <region>Catalonia</region>
            <code>08018</code>
            <country>Spain</country>
          </postal>
          <email>xvilajosana@uoc.edu</email>
        </address>
      </author>
      <author initials="S" surname="Duquennoy" fullname="Simon Duquennoy">
        <organization showOnFrontPage="true">RISE SICS</organization>
        <address>
          <postal>
            <street>Isafjordsgatan 22</street>
            <city>Kista</city>
            <code>164 29</code>
            <country>Sweden</country>
          </postal>
          <email>simon.duquennoy@gmail.com</email>
        </address>
      </author>
      <author initials="D" surname="Dujovne" fullname="Diego Dujovne">
        <organization showOnFrontPage="true">Universidad Diego Portales</organization>
        <address>
          <postal>
            <street>Escuela de Informática y Telecomunicaciones</street>
            <street>Av. Ejército 441</street>
            <city>Santiago</city>
            <region>Región Metropolitana</region>
            <country>Chile</country>
          </postal>
          <phone>+56 (2) 676-8121</phone>
          <email>diego.dujovne@mail.udp.cl</email>
        </address>
      </author>
    </section>
  </back>
</rfc>
